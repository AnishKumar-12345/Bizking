import{_,o as m,c as b,g as a,b5 as k,b6 as g,w as d,i as n,j as y,k as P,l as h,f as V,m as f,b as c,t as A,v as T,e as S,F as v,q as w,s as B,r as x,u as C}from"./index.dc6d2f7d.js";import{s as M}from"./Services.987bac00.js";import{V as q}from"./VForm.58e20691.js";import{V as U}from"./VAutocomplete.5ee479ab.js";import{V as i}from"./VTextField.793ac199.js";import{V as G}from"./VSnackbar.837b5db7.js";import{V as F,a as D,b as R,c as I}from"./VWindowItem.f3ad2692.js";import"./index.2bd8ddc8.js";import"./VSelect.950943c0.js";import"./VCheckboxBtn.1ed43433.js";import"./VChip.1bcea135.js";const K={mixins:[M],components:{},data(){return{namerules:[t=>!!t||"Name is required"],storerules:[t=>!!t||"Brand Name is required"],bcrules:[t=>!!t||"BC Margin is required"],cpfinal:[t=>!!t||"Bizking CP Final is required"],mrprules:[t=>!!t||"MRP is required"],bcmrules:[t=>!!t||"BC Margin is required"],bcmarules:[t=>!!t||"BC Margin Amount is required"],uomrules:[t=>!!t||"UOM is required"],retailsrules:[t=>!!t||"Final Retails CP is required"],Bkprules:[t=>!!t||"BK Profit is required"],hsnrules:[t=>!!t||"HSN is required"],cgstrules:[t=>!!t||"CGST is required"],sgstrules:[t=>!!t||"SGST is required"],loading:!0,searchQuery:"",page:1,pageSize:10,snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,marchantstocksdata:[],selectedBrand:null,BrandNames:[],userRole:"",Addbrand:{sku_name:"",uom:"",hsn_code:"",mrp:"",total_given_margin:"0%",bizkingz_cp_final:"",pitch_from:"0%",final_ret:"0%",final_retail_cp:"",bc_margin:"0%",bc_margin_amt:"",bk_profit:"",cgst:"0%",sgst:"0%"}}},computed:{},mounted(){this.userRole=localStorage.getItem("userRole"),this.getBranddetails(),setTimeout(()=>{this.loading=!1},4e3)},methods:{computedbcmargin(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"BC margin is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updatebcmargin(t){t==="0%"||t==="0"?this.Addbrand.bc_margin="0%":t.startsWith("0%")?this.Addbrand.bc_margin="0%":this.Addbrand.bc_margin=t},computedSGST(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"SGST is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updateSGST(t){t==="0%"||t==="0"?this.Addbrand.sgst="0%":t.startsWith("0%")?this.Addbrand.sgst="0%":this.Addbrand.sgst=t},computedCGST(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"CGST is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updateCGST(t){t==="0%"||t==="0"?this.Addbrand.cgst="0%":t.startsWith("0%")?this.Addbrand.cgst="0%":this.Addbrand.cgst=t},computedFinalret(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"Final Ret is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updateFinalret(t){t==="0%"||t==="0"?this.Addbrand.final_ret="0%":t.startsWith("0%")?this.Addbrand.final_ret="0%":this.Addbrand.final_ret=t},computedPitchRules(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"Pitch From is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updatePitchfrom(t){t==="0%"||t==="0"?this.Addbrand.pitch_from="0%":t.startsWith("0%")?this.Addbrand.pitch_from="0%":this.Addbrand.pitch_from=t},computedTGMRules(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"Total Given Margin is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updateTotalGivenMargin(t){t==="0%"||t==="0"?this.Addbrand.total_given_margin="0%":t.startsWith("0%")?this.Addbrand.total_given_margin="0%":this.Addbrand.total_given_margin=t},preventPaste(t){const u=(t.clipboardData||window.clipboardData).getData("text");/^[0-9]+$/.test(u)||t.preventDefault()},preventDecimal(t){(t.key===","||t.key==="+"||t.key==="-"||t.keyCode===189||t.keyCode===109)&&t.preventDefault()},validateForm(){this.$refs.purchaseOrderForm.validate().then(t=>{t.valid==!0?this.saveBrands():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},saveBrands(){const t={brand_id:this.selectedBrand,sku_name:this.Addbrand.sku_name,uom:this.Addbrand.uom,hsn_code:this.Addbrand.hsn_code,mrp:this.Addbrand.mrp,total_given_margin:this.Addbrand.total_given_margin===""?"0%":this.Addbrand.total_given_margin,bizkingz_cp_final:this.Addbrand.bizkingz_cp_final,pitch_from:this.Addbrand.pitch_from===""?"0%":this.Addbrand.pitch_from,final_ret:this.Addbrand.final_ret===""?"0%":this.Addbrand.final_ret,final_retail_cp:this.Addbrand.final_retail_cp,bc_margin:this.Addbrand.bc_margin,bc_margin_amt:this.Addbrand.bc_margin_amt,bk_profit:this.Addbrand.bk_profit,cgst:this.Addbrand.cgst===""?"0%":this.Addbrand.cgst,sgst:this.Addbrand.sgst===""?"0%":this.Addbrand.sgst};console.log("post data",t),this.Addbrandproductdata(t).then(e=>{console.log("resp",e),e.data.status==1?(this.snackbarText=e.data.message,this.color="primary",this.snackbar=!0,this.Addbrand={}):(this.snackbarText=e.data.message,this.color="on-background",this.snackbar=!0)})},getBranddetails(){this.getBrands().then(t=>{this.BrandNames=t.data,this.BrandNames=this.BrandNames.map(e=>({value:e.brand_id,text:e.brand_name})),console.log("mer",this.BrandNames)})}}},N={key:0,class:"loading-container"};function z(t,e,u,p,s,l){return m(),b("div",null,[s.loading?(m(),b("div",N,[a(k,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):g("",!0),a(h,null,{default:d(()=>[a(n,{cols:"12"},{default:d(()=>[a(y,{title:"Add Product",class:"mb-4"},{default:d(()=>[a(P,null,{default:d(()=>[a(q,{class:"mt-6",ref:"purchaseOrderForm"},{default:d(()=>[a(h,null,{default:d(()=>[a(n,{md:"6",cols:"12"},{default:d(()=>[a(U,{modelValue:s.selectedBrand,"onUpdate:modelValue":e[0]||(e[0]=r=>s.selectedBrand=r),label:"Brand Name",items:this.BrandNames,"item-value":"value","item-title":"text",rules:s.storerules,"menu-props":{maxHeight:200}},null,8,["modelValue","items","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:d(()=>[a(i,{modelValue:this.Addbrand.sku_name,"onUpdate:modelValue":e[1]||(e[1]=r=>this.Addbrand.sku_name=r),label:"SKU Name",rules:s.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),a(n,{cols:"12",md:"6"},{default:d(()=>[a(i,{modelValue:this.Addbrand.uom,"onUpdate:modelValue":e[2]||(e[2]=r=>this.Addbrand.uom=r),label:"UOM",rules:s.uomrules},null,8,["modelValue","rules"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.hsn_code,"onUpdate:modelValue":e[3]||(e[3]=r=>this.Addbrand.hsn_code=r),label:"HSN Code",rules:s.hsnrules,type:"number",min:"0",onKeydown:l.preventDecimal,onPaste:l.preventPaste},null,8,["modelValue","rules","onKeydown","onPaste"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.mrp,"onUpdate:modelValue":e[4]||(e[4]=r=>this.Addbrand.mrp=r),label:"MRP",rules:s.mrprules,type:"number",min:"0",onKeydown:l.preventDecimal,onPaste:l.preventPaste},null,8,["modelValue","rules","onKeydown","onPaste"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.total_given_margin,"onUpdate:modelValue":e[5]||(e[5]=r=>this.Addbrand.total_given_margin=r),rules:l.computedTGMRules(),label:"Total Given Margin",onInput:l.updateTotalGivenMargin,required:""},null,8,["modelValue","rules","onInput"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.bizkingz_cp_final,"onUpdate:modelValue":e[6]||(e[6]=r=>this.Addbrand.bizkingz_cp_final=r),rules:s.cpfinal,type:"number",label:"Bizking CP Final",min:"0",onKeydown:l.preventDecimal,onPaste:l.preventPaste},null,8,["modelValue","rules","onKeydown","onPaste"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.pitch_from,"onUpdate:modelValue":e[7]||(e[7]=r=>this.Addbrand.pitch_from=r),rules:l.computedPitchRules(),label:"Pitch from",onInput:l.updatePitchfrom},null,8,["modelValue","rules","onInput"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.final_ret,"onUpdate:modelValue":e[8]||(e[8]=r=>this.Addbrand.final_ret=r),rules:l.computedFinalret(),label:"Final Retail",onInput:l.updateFinalret},null,8,["modelValue","rules","onInput"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.final_retail_cp,"onUpdate:modelValue":e[9]||(e[9]=r=>this.Addbrand.final_retail_cp=r),type:"number",rules:s.retailsrules,min:"0",onKeydown:l.preventDecimal,onPaste:l.preventPaste,label:"Final Retail CP"},null,8,["modelValue","rules","onKeydown","onPaste"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.bc_margin,"onUpdate:modelValue":e[10]||(e[10]=r=>this.Addbrand.bc_margin=r),rules:l.computedbcmargin(),label:"BC Margin",onInput:l.updatebcmargin},null,8,["modelValue","rules","onInput"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.bc_margin_amt,"onUpdate:modelValue":e[11]||(e[11]=r=>this.Addbrand.bc_margin_amt=r),min:"0",onKeydown:l.preventDecimal,onPaste:l.preventPaste,type:"number",label:"BC Margin Amount",rules:s.bcmarules},null,8,["modelValue","onKeydown","onPaste","rules"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.bk_profit,"onUpdate:modelValue":e[12]||(e[12]=r=>this.Addbrand.bk_profit=r),type:"number",label:"BK Profit",min:"0",rules:s.Bkprules,onKeydown:l.preventDecimal,onPaste:l.preventPaste},null,8,["modelValue","rules","onKeydown","onPaste"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.cgst,"onUpdate:modelValue":e[13]||(e[13]=r=>this.Addbrand.cgst=r),rules:l.computedCGST(),label:"CGST",onInput:l.updateCGST},null,8,["modelValue","rules","onInput"])]),_:1}),a(n,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.sgst,"onUpdate:modelValue":e[14]||(e[14]=r=>this.Addbrand.sgst=r),rules:l.computedSGST(),onInput:l.updateSGST,label:"SGST"},null,8,["modelValue","rules","onInput"])]),_:1}),s.userRole!="Sales Associate"?(m(),V(n,{key:0,cols:"12",class:"d-flex flex-wrap gap-4"},{default:d(()=>[a(f,{onClick:e[15]||(e[15]=r=>l.validateForm())},{default:d(()=>[c("Save")]),_:1}),a(f,{color:"secondary",variant:"tonal",type:"reset"},{default:d(()=>[c(" Reset ")]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),a(G,{modelValue:s.snackbar,"onUpdate:modelValue":e[16]||(e[16]=r=>s.snackbar=r),timeout:3500,color:s.color},{default:d(()=>[c(A(s.snackbarText),1)]),_:1},8,["modelValue","color"])])}const W=_(K,[["render",z]]),O={components:{Addproducts:W},data(){return{currentroute:"",activeTab:"",tabs:[{title:"Add Products",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=T(),this.activeTab=S(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function H(t,e,u,p,s,l){const r=x("Addproducts");return m(),b("div",null,[a(F,{modelValue:s.activeTab,"onUpdate:modelValue":e[0]||(e[0]=o=>s.activeTab=o),"show-arrows":""},{default:d(()=>[(m(!0),b(v,null,w(s.tabs,o=>(m(),V(I,{key:o.icon,value:o.tab},{default:d(()=>[a(C,{size:"20",start:"",icon:o.icon},null,8,["icon"]),c(" "+A(o.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),a(B),a(R,{modelValue:s.activeTab,"onUpdate:modelValue":e[1]||(e[1]=o=>s.activeTab=o),class:"mt-5 disable-tab-transition",touch:!1},{default:d(()=>[a(D,{value:"account"},{default:d(()=>[a(r)]),_:1})]),_:1},8,["modelValue"])])}const ae=_(O,[["render",H]]);export{ae as default};
