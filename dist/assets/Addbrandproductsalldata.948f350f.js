import{_ as f,o as m,c as b,g as a,b5 as V,b6 as A,w as d,i as s,j as k,k as y,l as g,m as h,b as c,t as _,v as P,e as T,F as v,q as w,s as S,r as x,f as B,u as M}from"./index.986c8b57.js";import{s as C}from"./Services.7881b1f6.js";import{V as U}from"./VForm.45c60dc8.js";import{V as G}from"./VAutocomplete.fe04c61c.js";import{V as i}from"./VTextField.78fcf9d0.js";import{V as q}from"./VSnackbar.34661357.js";import{V as D,a as F,b as z,c as I}from"./VWindowItem.11d828b3.js";import"./index.2bd8ddc8.js";import"./VSelect.1c2f57cf.js";import"./VCheckboxBtn.11a37a8c.js";import"./VChip.10586e46.js";const K={mixins:[C],components:{},data(){return{namerules:[t=>!!t||"Name is required"],storerules:[t=>!!t||"Brand Name is required"],bcrules:[t=>!!t||"BC Margin is required"],cpfinal:[t=>!!t||"Bizking CP Final is required"],mrprules:[t=>!!t||"MRP is required"],bcmrules:[t=>!!t||"BC Margin is required"],uomrules:[t=>!!t||"UOM is required"],cgstrules:[t=>!!t||"CGST is required"],sgstrules:[t=>!!t||"SGST is required"],loading:!0,searchQuery:"",page:1,pageSize:10,snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,marchantstocksdata:[],selectedBrand:null,BrandNames:[],Addbrand:{sku_name:"",uom:"",hsn_code:"",mrp:"",total_given_margin:"0%",bizkingz_cp_final:"",pitch_from:"0%",final_ret:"0%",final_retail_cp:"",bc_margin:"0%",bc_margin_amt:"",bk_profit:"",cgst:"0%",sgst:"0%"}}},computed:{},mounted(){this.getBranddetails(),setTimeout(()=>{this.loading=!1},4e3)},methods:{computedbcmargin(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"BC margin is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updatebcmargin(t){t==="0%"||t==="0"?this.Addbrand.bc_margin="0%":t.startsWith("0%")?this.Addbrand.bc_margin="0%":this.Addbrand.bc_margin=t},computedSGST(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"SGST is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updateSGST(t){t==="0%"||t==="0"?this.Addbrand.sgst="0%":t.startsWith("0%")?this.Addbrand.sgst="0%":this.Addbrand.sgst=t},computedCGST(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"CGST is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updateCGST(t){t==="0%"||t==="0"?this.Addbrand.cgst="0%":t.startsWith("0%")?this.Addbrand.cgst="0%":this.Addbrand.cgst=t},computedFinalret(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"Final Ret is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updateFinalret(t){t==="0%"||t==="0"?this.Addbrand.final_ret="0%":t.startsWith("0%")?this.Addbrand.final_ret="0%":this.Addbrand.final_ret=t},computedPitchRules(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"Pitch From is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updatePitchfrom(t){t==="0%"||t==="0"?this.Addbrand.pitch_from="0%":t.startsWith("0%")?this.Addbrand.pitch_from="0%":this.Addbrand.pitch_from=t},computedTGMRules(){const t=e=>/^(0|([1-9]\d*))(?:\.\d+)?%$/.test(String(e));return[e=>!!e||"Total Given Margin is required",e=>e.startsWith("0%")?e==="0%"||"Must include a numerical value with a percentage symbol.":t(e)||"Must include a numerical value with a percentage symbol"]},updateTotalGivenMargin(t){t==="0%"||t==="0"?this.Addbrand.total_given_margin="0%":t.startsWith("0%")?this.Addbrand.total_given_margin="0%":this.Addbrand.total_given_margin=t},preventPaste(t){const u=(t.clipboardData||window.clipboardData).getData("text");/^[0-9]+$/.test(u)||t.preventDefault()},preventDecimal(t){(t.key===","||t.key==="+"||t.key==="-"||t.keyCode===189||t.keyCode===109)&&t.preventDefault()},validateForm(){this.$refs.purchaseOrderForm.validate().then(t=>{t.valid==!0?this.saveBrands():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},saveBrands(){const t={brand_id:this.selectedBrand,sku_name:this.Addbrand.sku_name,uom:this.Addbrand.uom,hsn_code:this.Addbrand.hsn_code,mrp:this.Addbrand.mrp,total_given_margin:this.Addbrand.total_given_margin===""?"0%":this.Addbrand.total_given_margin,bizkingz_cp_final:this.Addbrand.bizkingz_cp_final,pitch_from:this.Addbrand.pitch_from===""?"0%":this.Addbrand.pitch_from,final_ret:this.Addbrand.final_ret===""?"0%":this.Addbrand.final_ret,final_retail_cp:this.Addbrand.final_retail_cp,bc_margin:this.Addbrand.bc_margin,bc_margin_amt:this.Addbrand.bc_margin_amt,bk_profit:this.Addbrand.bk_profit,cgst:this.Addbrand.cgst===""?"0%":this.Addbrand.cgst,sgst:this.Addbrand.sgst===""?"0%":this.Addbrand.sgst};console.log("post data",t),this.Addbrandproductdata(t).then(e=>{console.log("resp",e),e.data.status==1?(this.snackbarText=e.data.message,this.color="primary",this.snackbar=!0,this.Addbrand={}):(this.snackbarText=e.data.message,this.color="on-background",this.snackbar=!0)})},getBranddetails(){this.getBrands().then(t=>{this.BrandNames=t.data,this.BrandNames=this.BrandNames.map(e=>({value:e.brand_id,text:e.brand_name})),console.log("mer",this.BrandNames)})}}},N={key:0,class:"loading-container"};function W(t,e,u,p,l,n){return m(),b("div",null,[l.loading?(m(),b("div",N,[a(V,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):A("",!0),a(g,null,{default:d(()=>[a(s,{cols:"12"},{default:d(()=>[a(k,{title:"Add Product",class:"mb-4"},{default:d(()=>[a(y,null,{default:d(()=>[a(U,{class:"mt-6",ref:"purchaseOrderForm"},{default:d(()=>[a(g,null,{default:d(()=>[a(s,{md:"6",cols:"12"},{default:d(()=>[a(G,{modelValue:l.selectedBrand,"onUpdate:modelValue":e[0]||(e[0]=r=>l.selectedBrand=r),label:"Brand Name",items:this.BrandNames,"item-value":"value","item-title":"text",rules:l.storerules},null,8,["modelValue","items","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:d(()=>[a(i,{modelValue:this.Addbrand.sku_name,"onUpdate:modelValue":e[1]||(e[1]=r=>this.Addbrand.sku_name=r),label:"SKU Name",rules:l.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),a(s,{cols:"12",md:"6"},{default:d(()=>[a(i,{modelValue:this.Addbrand.uom,"onUpdate:modelValue":e[2]||(e[2]=r=>this.Addbrand.uom=r),label:"UOM",rules:l.uomrules},null,8,["modelValue","rules"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.hsn_code,"onUpdate:modelValue":e[3]||(e[3]=r=>this.Addbrand.hsn_code=r),label:"HSN Code",rules:t.hsnrules,type:"number",min:"0",onKeydown:n.preventDecimal,onPaste:n.preventPaste},null,8,["modelValue","rules","onKeydown","onPaste"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.mrp,"onUpdate:modelValue":e[4]||(e[4]=r=>this.Addbrand.mrp=r),label:"MRP",rules:l.mrprules,type:"number",min:"0",onKeydown:n.preventDecimal,onPaste:n.preventPaste},null,8,["modelValue","rules","onKeydown","onPaste"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.total_given_margin,"onUpdate:modelValue":e[5]||(e[5]=r=>this.Addbrand.total_given_margin=r),rules:n.computedTGMRules(),label:"Total Given Margin",onInput:n.updateTotalGivenMargin,required:""},null,8,["modelValue","rules","onInput"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.bizkingz_cp_final,"onUpdate:modelValue":e[6]||(e[6]=r=>this.Addbrand.bizkingz_cp_final=r),rules:l.cpfinal,type:"number",label:"Bizking CP Final",min:"0",onKeydown:n.preventDecimal,onPaste:n.preventPaste},null,8,["modelValue","rules","onKeydown","onPaste"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.pitch_from,"onUpdate:modelValue":e[7]||(e[7]=r=>this.Addbrand.pitch_from=r),rules:n.computedPitchRules(),label:"Pitch from",onInput:n.updatePitchfrom},null,8,["modelValue","rules","onInput"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.final_ret,"onUpdate:modelValue":e[8]||(e[8]=r=>this.Addbrand.final_ret=r),rules:n.computedFinalret(),label:"Final Ret",onInput:n.updateFinalret},null,8,["modelValue","rules","onInput"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.final_retail_cp,"onUpdate:modelValue":e[9]||(e[9]=r=>this.Addbrand.final_retail_cp=r),type:"number",min:"0",onKeydown:n.preventDecimal,onPaste:n.preventPaste,label:"Final Retail CP"},null,8,["modelValue","onKeydown","onPaste"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.bc_margin,"onUpdate:modelValue":e[10]||(e[10]=r=>this.Addbrand.bc_margin=r),rules:n.computedbcmargin(),label:"BC Margin",onInput:n.updatebcmargin},null,8,["modelValue","rules","onInput"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.bc_margin_amt,"onUpdate:modelValue":e[11]||(e[11]=r=>this.Addbrand.bc_margin_amt=r),min:"0",onKeydown:n.preventDecimal,onPaste:n.preventPaste,type:"number",label:"BC Margin Amount"},null,8,["modelValue","onKeydown","onPaste"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.bk_profit,"onUpdate:modelValue":e[12]||(e[12]=r=>this.Addbrand.bk_profit=r),type:"number",label:"BK Profit",min:"0",onKeydown:n.preventDecimal,onPaste:n.preventPaste},null,8,["modelValue","onKeydown","onPaste"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.cgst,"onUpdate:modelValue":e[13]||(e[13]=r=>this.Addbrand.cgst=r),rules:n.computedCGST(),label:"CGST",onInput:n.updateCGST},null,8,["modelValue","rules","onInput"])]),_:1}),a(s,{md:"6",cols:"12"},{default:d(()=>[a(i,{modelValue:this.Addbrand.sgst,"onUpdate:modelValue":e[14]||(e[14]=r=>this.Addbrand.sgst=r),rules:n.computedSGST(),onInput:n.updateSGST,label:"SGST"},null,8,["modelValue","rules","onInput"])]),_:1}),a(s,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:d(()=>[a(h,{onClick:e[15]||(e[15]=r=>n.validateForm())},{default:d(()=>[c("Save")]),_:1}),a(h,{color:"secondary",variant:"tonal",type:"reset"},{default:d(()=>[c(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),a(q,{modelValue:l.snackbar,"onUpdate:modelValue":e[16]||(e[16]=r=>l.snackbar=r),timeout:3500,color:l.color},{default:d(()=>[c(_(l.snackbarText),1)]),_:1},8,["modelValue","color"])])}const R=f(K,[["render",W]]),O={components:{Addproducts:R},data(){return{currentroute:"",activeTab:"",tabs:[{title:"Add Products",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=P(),this.activeTab=T(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function L(t,e,u,p,l,n){const r=x("Addproducts");return m(),b("div",null,[a(D,{modelValue:l.activeTab,"onUpdate:modelValue":e[0]||(e[0]=o=>l.activeTab=o),"show-arrows":""},{default:d(()=>[(m(!0),b(v,null,w(l.tabs,o=>(m(),B(I,{key:o.icon,value:o.tab},{default:d(()=>[a(M,{size:"20",start:"",icon:o.icon},null,8,["icon"]),c(" "+_(o.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),a(S),a(z,{modelValue:l.activeTab,"onUpdate:modelValue":e[1]||(e[1]=o=>l.activeTab=o),class:"mt-5 disable-tab-transition",touch:!1},{default:d(()=>[a(F,{value:"account"},{default:d(()=>[a(r)]),_:1})]),_:1},8,["modelValue"])])}const ae=f(O,[["render",L]]);export{ae as default};
