import{_ as R,bc as P,bd as A,be as N,o as h,c as V,g as e,b5 as O,b6 as _,w as s,i,j as g,k as b,m,b as u,bf as x,a as c,l as p,f as v,s as k,a4 as S,bg as w,ac as y,t as T,bh as L,bi as B,bj as I,v as j,e as z,F as E,q as G,r as q,u as H}from"./index.dc6d2f7d.js";import{s as Y}from"./Services.987bac00.js";import{V as D}from"./VForm.58e20691.js";import{V as F}from"./VAutocomplete.5ee479ab.js";import{V as C}from"./VTextField.793ac199.js";import{V as U}from"./VSelect.950943c0.js";import{V as M}from"./VDialog.adb2ee33.js";import{V as K}from"./VSnackbar.837b5db7.js";import{V as W,a as J,b as Q,c as X}from"./VWindowItem.f3ad2692.js";import"./index.2bd8ddc8.js";import"./VCheckboxBtn.1ed43433.js";import"./VChip.1bcea135.js";const Z={mixins:[Y],components:{},data(){return{selectSales:null,snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,isProgress:!1,isProgress2:!1,isProgress3:!1,loading:!0,dialog2:!1,dialog3:!1,dialog4:!1,selectdatepicker:null,merchantName:[],reportsMerchant:[],selectAll:!1,selectedmerchants:null,selectedmerchants2:null,salesRules:[a=>!!a||"Sales is required"],storeMerchant:[a=>!!a||"Store & Merchant is required"],selectDate:[a=>!!a||"Select Date is required"],reportsdata:{merchant_id:"",date_filter:"",start_date:"",end_date:""},today:this.getFormattedDate(new Date),todays:this.getFormattedDates(new Date),maxDate:this.getFormattedDate(new Date),minDate:"1900-01-01",maxDate1:this.getFormattedDate(new Date),minDate1:"1900-01-01",jsonfields:[{label:"Closing",field:"Closing"},{label:"Date",field:"Date"},{label:"Merchant Name",field:"Merchant Name"},{label:"Merchant UID",field:"Merchant UID"},{label:"Opening",field:"Opening"},{label:"Physical SOH",field:"Physical SOH"},{label:"SA Name",field:"SA Name"},{label:"SKU Name",field:"SKU Name"},{label:"Sale",field:"Sale"}]}},watch:{"reportsdata.start_date":function(a){this.maxDate=a||this.getFormattedDate(new Date)}},computed:{vuetifyTheme(){return P()},triangleBg(){return this.vuetifyTheme.global.name.value==="light"?A:N}},mounted(){this.getMerchantdetails(),setTimeout(()=>{this.loading=!1},3e3)},methods:{closemreport(){this.dialog4=!1},openMSI(){this.dialog4=!0},validateForm1(){this.$refs.purchaseOrderForm1.validate().then(a=>{a.valid==!0?this.getReport():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},validateForm2(){this.$refs.purchaseOrderForm2.validate().then(a=>{a.valid==!0?this.getSales():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},validateForm3(){this.$refs.purchaseOrderForm3.validate().then(a=>{a.valid==!0?this.getMerchantsreport():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},getMerchantsreport(){this.isProgress3=!0,this.getMerchantstocksreport(this.selectedmerchants2).then(a=>{if(a.data.status==0)this.isProgress3=!1,this.dialog4=!1,this.selectedmerchants2="",this.snackbar=!0,this.color="on-background",this.snackbarText=a.data.message;else{this.isProgress3=!1,this.dialog4=!1,this.reportsdata={},this.selectedmerchants2="";const t=new Blob([a.data],{type:"text/csv"}),n=window.URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.setAttribute("download","Merchant Stock Inventory Report.csv"),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o),window.URL.revokeObjectURL(n),this.snackbar=!0,this.color="primary",this.snackbarText="Reports downloaded successfully."}})},openSales(){this.dialog3=!0},closeSales(){this.dialog3=!1,this.selectSales=null},getFormattedDates(a){const t=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0");return`${t}-${n}-${o}`},closereport(){this.dialog2=!1,this.reportsdata={},this.selectedmerchants=""},selectAllMerchants(){this.selectAll?this.selectedmerchants=["all",...this.merchantName.map(a=>a.value)]:this.selectedmerchants=[]},getFormattedDate(a){const t=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0");return`${t}-${n}-${o}`},downloadExcel(){console.log("download excel")},getSales(){const a={All:"all",Acknowledged:"3",Shipped:"4",Delivered:"5"};console.log("check ",a[this.selectSales]),this.isProgress2=!0,this.salesstocksreport(a[this.selectSales]).then(t=>{if(console.log("check the response",t),t.data.status==0)this.isProgress2=!1,this.dialog3=!1,this.selectSales=null,this.snackbar=!0,this.color="on-background",this.snackbarText=t.data.message;else{this.isProgress2=!1,this.dialog3=!1,this.selectSales=null;const n=new Blob([t.data],{type:"text/csv"}),o=window.URL.createObjectURL(n),l=document.createElement("a");l.href=o,l.setAttribute("download","Sales Report.csv"),document.body.appendChild(l),l.click(),l.parentNode.removeChild(l),window.URL.revokeObjectURL(o),this.snackbar=!0,this.color="primary",this.snackbarText="Reports downloaded successfully."}})},getReport(){this.reportsdata.date_filter==="Custom"?this.reportsdata.date_filter="custom":this.reportsdata.date_filter==="Current Year"?(this.reportsdata.date_filter="this_year",this.reportsdata.start_date=this.getFormattedDate(new Date),this.reportsdata.end_date=this.getFormattedDate(new Date)):this.reportsdata.date_filter==="Current Month"&&(this.reportsdata.date_filter="this_month",this.reportsdata.start_date=this.getFormattedDate(new Date),this.reportsdata.end_date=this.getFormattedDate(new Date)),this.isProgress=!0,this.storestocksreport(this.selectedmerchants,this.reportsdata.date_filter,this.reportsdata.start_date,this.reportsdata.end_date).then(a=>{if(a.data.status==0)this.isProgress=!1,this.dialog2=!1,this.reportsdata={},this.selectedmerchants="",this.snackbar=!0,this.color="on-background",this.snackbarText=a.data.message;else{this.isProgress=!1,this.dialog2=!1,this.reportsdata={},this.selectedmerchants="",this.reportsMerchant=a.data;const t=new Blob([a.data],{type:"text/csv"}),n=window.URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.setAttribute("download","Merchant Report.csv"),document.body.appendChild(o),o.click(),o.parentNode.removeChild(o),window.URL.revokeObjectURL(n),this.snackbar=!0,this.color="primary",this.snackbarText="Reports downloaded successfully."}})},openMPS(){this.dialog2=!0},getMerchantdetails(){this.getMerchants().then(a=>{this.merchantName=[{value:"all",text:"All"},...a.data.data.map(t=>({value:t.merchant_id,text:t.merchant_uid}))],console.log("mer",this.merchantName)})}}},$={key:0,class:"loading-container"},ee=c("h4",{class:"text-4xl font-weight-medium text-primary"}," 2 ",-1),te=c("p",null,"\u{1F389}",-1),le=c("img",{src:L,class:"trophy1"},null,-1),se=["src"],ae=c("h4",{class:"text-4xl font-weight-medium text-primary"}," 2 ",-1),re=c("p",null,"\u{1F389}",-1),oe=c("img",{src:B,class:"trophy4"},null,-1),ie=c("h4",{class:"text-4xl font-weight-medium text-primary"}," 2 ",-1),ne=c("p",null,"\u{1F389}",-1),de=c("img",{src:I,class:"trophy"},null,-1);function ue(a,t,n,o,l,d){return h(),V("div",null,[l.loading?(h(),V("div",$,[e(O,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):_("",!0),e(p,null,{default:s(()=>[e(i,{cols:"12",md:"4"},{default:s(()=>[e(g,{title:"Sales",class:"position-relative"},{default:s(()=>[e(b,null,{default:s(()=>[ee,te,e(m,{size:"small",onClick:t[0]||(t[0]=r=>d.openSales())},{default:s(()=>[u(" Get Reports ")]),_:1})]),_:1}),e(x,{src:d.triangleBg,class:"triangle-bg flip-in-rtl"},null,8,["src"]),le,c("img",{src:a.avatarg,class:"avatarg"},null,8,se)]),_:1})]),_:1}),e(i,{cols:"12",md:"4"},{default:s(()=>[e(g,{title:"Merchant Product Sales",class:"position-relative"},{default:s(()=>[e(b,null,{default:s(()=>[ae,re,e(m,{size:"small",onClick:t[1]||(t[1]=r=>d.openMPS())},{default:s(()=>[u(" Get Reports ")]),_:1})]),_:1}),e(x,{src:d.triangleBg,class:"triangle-bg flip-in-rtl"},null,8,["src"]),oe]),_:1})]),_:1}),e(i,{cols:"12",md:"4"},{default:s(()=>[e(g,{title:"Merchant Stock Inventory",class:"position-relative"},{default:s(()=>[e(b,null,{default:s(()=>[ie,ne,e(m,{size:"small",onClick:t[2]||(t[2]=r=>d.openMSI())},{default:s(()=>[u(" Get Reports ")]),_:1})]),_:1}),e(x,{src:d.triangleBg,class:"triangle-bg flip-in-rtl"},null,8,["src"]),de]),_:1})]),_:1})]),_:1}),e(M,{modelValue:l.dialog2,"onUpdate:modelValue":t[10]||(t[10]=r=>l.dialog2=r),"max-width":"1000"},{default:s(()=>[e(g,{title:"Merchant Product Sales",class:"mb-2"},{default:s(()=>[e(b,null,{default:s(()=>[e(p,null,{default:s(()=>[e(i,{cols:"12"},{default:s(()=>[e(D,{class:"mt-6",ref:"purchaseOrderForm1"},{default:s(()=>[e(p,null,{default:s(()=>[e(i,{md:"6",cols:"12"},{default:s(()=>[l.selectAll?_("",!0):(h(),v(F,{key:0,modelValue:l.selectedmerchants,"onUpdate:modelValue":t[3]||(t[3]=r=>l.selectedmerchants=r),items:l.merchantName,"item-value":"value","item-title":"text",rules:l.storeMerchant,label:"Store or Merchant","menu-props":{maxHeight:200},"no-underline":""},null,8,["modelValue","items","rules"])),l.selectAll?(h(),v(C,{key:1,modelValue:l.selectedmerchants,"onUpdate:modelValue":t[4]||(t[4]=r=>l.selectedmerchants=r),label:"Store or Merchant",disabled:""},null,8,["modelValue"])):_("",!0)]),_:1}),e(i,{md:"6",cols:"12"},{default:s(()=>[e(U,{rules:l.selectDate,modelValue:l.reportsdata.date_filter,"onUpdate:modelValue":t[5]||(t[5]=r=>l.reportsdata.date_filter=r),items:["Custom","Current Year","Current Month"],label:"Select Date"},null,8,["rules","modelValue"])]),_:1}),l.reportsdata.date_filter=="Custom"?(h(),v(i,{key:0,md:"6",cols:"12"},{default:s(()=>[e(C,{modelValue:l.reportsdata.start_date,"onUpdate:modelValue":t[6]||(t[6]=r=>l.reportsdata.start_date=r),type:"date",label:"Start Date",min:l.minDate,max:l.maxDate},null,8,["modelValue","min","max"])]),_:1})):_("",!0),l.reportsdata.date_filter=="Custom"?(h(),v(i,{key:1,md:"6",cols:"12"},{default:s(()=>[e(C,{modelValue:l.reportsdata.end_date,"onUpdate:modelValue":t[7]||(t[7]=r=>l.reportsdata.end_date=r),type:"date",label:"End Date",min:l.minDate1,max:l.maxDate1},null,8,["modelValue","min","max"])]),_:1})):_("",!0),e(k),e(i,{cols:"12"}),e(i,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:s(()=>[e(m,{onClick:t[8]||(t[8]=r=>d.validateForm1())},{default:s(()=>[u("Get")]),_:1}),e(m,{onClick:t[9]||(t[9]=r=>d.closereport())},{default:s(()=>[u("Close")]),_:1}),S(e(w,{size:50,color:"primary",indeterminate:""},null,512),[[y,l.isProgress]])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(M,{modelValue:l.dialog3,"onUpdate:modelValue":t[14]||(t[14]=r=>l.dialog3=r),"max-width":"1000"},{default:s(()=>[e(g,{title:"Sales",class:"mb-2"},{default:s(()=>[e(b,null,{default:s(()=>[e(p,null,{default:s(()=>[e(i,{cols:"12"},{default:s(()=>[e(D,{class:"mt-6",ref:"purchaseOrderForm2"},{default:s(()=>[e(p,null,{default:s(()=>[e(i,{md:"6",cols:"12"},{default:s(()=>[e(U,{modelValue:l.selectSales,"onUpdate:modelValue":t[11]||(t[11]=r=>l.selectSales=r),items:["All","Acknowledged","Shipped","Delivered"],label:"Select",rules:l.salesRules},null,8,["modelValue","rules"])]),_:1}),e(k),e(i,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:s(()=>[e(m,{onClick:t[12]||(t[12]=r=>d.validateForm2())},{default:s(()=>[u("Get")]),_:1}),e(m,{onClick:t[13]||(t[13]=r=>d.closeSales())},{default:s(()=>[u("Close")]),_:1}),S(e(w,{size:50,color:"primary",indeterminate:""},null,512),[[y,l.isProgress2]])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(M,{modelValue:l.dialog4,"onUpdate:modelValue":t[18]||(t[18]=r=>l.dialog4=r),"max-width":"1000"},{default:s(()=>[e(g,{title:"Merchant Stock Inventory",class:"mb-2"},{default:s(()=>[e(b,null,{default:s(()=>[e(p,null,{default:s(()=>[e(i,{cols:"12"},{default:s(()=>[e(D,{class:"mt-6",ref:"purchaseOrderForm3"},{default:s(()=>[e(p,null,{default:s(()=>[e(i,{md:"6",cols:"12"},{default:s(()=>[e(F,{modelValue:l.selectedmerchants2,"onUpdate:modelValue":t[15]||(t[15]=r=>l.selectedmerchants2=r),items:l.merchantName,"item-value":"value","item-title":"text",rules:l.storeMerchant,label:"Store or Merchant","menu-props":{maxHeight:200},"no-underline":""},null,8,["modelValue","items","rules"])]),_:1}),e(k),e(i,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:s(()=>[e(m,{onClick:t[16]||(t[16]=r=>d.validateForm3())},{default:s(()=>[u("Get")]),_:1}),e(m,{onClick:t[17]||(t[17]=r=>d.closemreport())},{default:s(()=>[u("Close")]),_:1}),S(e(w,{size:50,color:"primary",indeterminate:""},null,512),[[y,l.isProgress3]])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(K,{modelValue:l.snackbar,"onUpdate:modelValue":t[19]||(t[19]=r=>l.snackbar=r),timeout:3500,color:l.color},{default:s(()=>[u(T(l.snackbarText),1)]),_:1},8,["modelValue","color"])])}const ce=R(Z,[["render",ue]]),me={components:{Allreports:ce},data(){return{currentroute:"",activeTab:"",tabs:[{title:"Reports",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=j(),this.activeTab=z(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function he(a,t,n,o,l,d){const r=q("Allreports");return h(),V("div",null,[e(W,{modelValue:l.activeTab,"onUpdate:modelValue":t[0]||(t[0]=f=>l.activeTab=f),"show-arrows":""},{default:s(()=>[(h(!0),V(E,null,G(l.tabs,f=>(h(),v(X,{key:f.icon,value:f.tab},{default:s(()=>[e(H,{size:"20",start:"",icon:f.icon},null,8,["icon"]),u(" "+T(f.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(k),e(Q,{modelValue:l.activeTab,"onUpdate:modelValue":t[1]||(t[1]=f=>l.activeTab=f),class:"mt-5 disable-tab-transition",touch:!1},{default:s(()=>[e(J,{value:"account"},{default:s(()=>[e(r)]),_:1})]),_:1},8,["modelValue"])])}const De=R(me,[["render",he]]);export{De as default};
