import{_ as C,o as d,c as u,g as t,w as l,i as m,j as x,k as b,l as v,m as p,b as h,a as r,b8 as k,F as g,q as f,t as n,u as V,bo as P,bp as L,v as z,e as U,s as F,r as N,f as Q}from"./index.29ae4a8e.js";import{s as B}from"./Services.7406fd05.js";import{V as w}from"./VForm.0656b613.js";import{V as S}from"./VAutocomplete.4b72ac3c.js";import{V as y}from"./VTextField.1c951582.js";import{V as T}from"./VDialog.666b6082.js";import{V as A}from"./VTable.813445d6.js";import{V as E}from"./VPagination.1ea2a1a2.js";import{V as O}from"./VSnackbar.cfd560ad.js";import{V as G,a as q,b as H,c as R}from"./VWindowItem.20b992ec.js";import"./VCounter.c77ecd08.js";import"./VSelect.119c8a48.js";import"./VCheckboxBtn.aed2973f.js";import"./VChip.5c10713d.js";const W={mixins:[B],data(){return{snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,Enddate:"",locationdata:"",cityID:"",loading:"",cityLoaction:[],person:[s=>!!s||"Assign Delivery Person is required"],headers:[{text:"Serial No.",value:"user_name"},{text:"City",value:"user_name"},{text:"Trip Name",value:"user_name"},{text:"Location",value:"merchant_uid"},{text:"Driver Name",value:"target_amount"},{text:"Sales Order Count",value:"achieved_target"},{text:"Action",value:"achieved_percentage"}],headers2:[{text:"Serial No.",value:"user_name"},{text:"SKU Name",value:"user_name"},{text:"Shipped Ordered",value:"user_name"},{text:"Shipped Exchange",value:"user_name"}],AssignedPerson:[],deliveryPerson:[],Deliverypersondata:"",TripId:"",searchQuery:"",page:1,pageSize:10,page2:1,pageSize2:10,dialog:!1,getSalesorder:[],dialog2:!1,searchQuery2:""}},computed:{filteredSAwisetarget(){const s=this.searchQuery.toLowerCase().trim();return this.AssignedPerson.filter(e=>e.city&&e.city.toLowerCase().includes(s)||e.delivery_person&&e.delivery_person.toLowerCase().includes(s)||e.location&&e.location.toLowerCase().includes(s)||e.sales_order_count&&e.sales_order_count.toString().includes(s)||e.trip_name&&e.trip_name.toLowerCase().includes(s))},paginatedItems(){const s=(this.page-1)*this.pageSize,e=s+this.pageSize;return this.filteredSAwisetarget.slice(s,e)},filteredSAwisetarget2(){const s=this.searchQuery2.toLowerCase().trim();return this.getSalesorder.filter(e=>e.shipped_exchange&&e.shipped_exchange.toString().includes(s)||e.shipped_ordered&&e.shipped_ordered.toString().includes(s)||e.sku_name&&e.sku_name.toLowerCase().includes(s))},paginatedItems2(){const s=(this.page2-1)*this.pageSize2,e=s+this.pageSize2;return this.filteredSAwisetarget2.slice(s,e)}},mounted(){this.cityID=localStorage.getItem("city_id"),this.handleBrandSelection()},methods:{viewrow(s){this.GetTripdetails(s.trip_id).then(e=>{console.log("response",e),e.data.status==1?(this.getSalesorder=e.data.data,this.dialog2=!0,this.snackbar=!0,this.color="primary",this.snackbarText=e.data.message):(this.getSalesorder=[],this.dialog2=!1,this.snackbar=!0,this.color="on-background",this.snackbarText=e.data.message)})},closeDialog(){this.dialog=!1,this.Deliverypersondata=""},closeDialog2(){this.dialog2=!1},editrow(s){this.TripId=s.trip_id,this.Getsalesperson(this.cityID,this.locationdata).then(e=>{e.data.status==1?(this.deliveryPerson=e.data.data.map(_=>({value:_.delivery_person,text:_.name})),this.dialog=!0):(this.deliveryPerson=[],this.dialog=!1)})},validateForm2(){this.$refs.purchaseOrderForm.validate().then(s=>{s.valid==!0?this.Assigndelperson():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},Assigndelperson(){const s={trip_id:this.TripId,delivery_person:this.Deliverypersondata};this.Assigndeliveryperson(s).then(e=>{e.data.status==1?(this.dialog=!1,this.snackbar=!0,this.loading=!1,this.color="primary",this.snackbarText=e.data.message,this.validateForm(),this.Deliverypersondata="",this.TripId=""):(this.snackbar=!0,this.color="on-background",this.dialog=!1,this.snackbarText=e.data.message)})},updatePagination(s){this.page=s},updatePagination2(s){this.page2=s},validateForm(){this.$refs.tripform.validate().then(s=>{s.valid==!0?this.getAssignedview():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},getAssignedview(){this.loading=!0,this.Assignedpersondata(this.locationdata,this.Enddate).then(s=>{s.data.status==1?(this.AssignedPerson=s.data.data,this.snackbar=!0,this.loading=!1,this.color="primary",this.snackbarText=s.data.message):(this.loading=!1,this.snackbar=!0,this.color="on-background",this.AssignedPerson=[],this.snackbarText=s.data.message)})},handleBrandSelection(){this.getCitylocation(this.cityID).then(s=>{this.cityLoaction=s.data.data.map(e=>({value:e.location_id,text:e.location}))})}}},j={style:{"max-width":"400px"}},K={key:0,id:"app"},M=P('<div id="loading-bg"><div class="loading-logo"><img src="'+L+'" height="60" width="68" alt="Logo"></div><div class="loading"><div class="effect-1 effects"></div><div class="effect-2 effects"></div><div class="effect-3 effects"></div></div></div>',1),J=[M],X={key:0},Y=r("td",{colspan:"16",class:"text-center"},[r("h1",null,"No data found !")],-1),Z=[Y],$={class:"text-center"},ee={class:"text-center"},te={class:"text-center"},se={class:"text-center"},ae={class:"text-center"},le={class:"text-center"},ie={class:"text-center"},re={style:{"max-width":"400px"}},oe={class:"text-center"},ne={class:"text-center"},de={class:"text-center"},ue={class:"text-center"},ce=r("br",null,null,-1);function he(s,e,_,D,i,c){return d(),u("div",null,[t(v,null,{default:l(()=>[t(m,{cols:"12"},{default:l(()=>[t(x,{title:"Assign Trip View",class:"mb-4"},{default:l(()=>[t(b,null,{default:l(()=>[t(w,{class:"mt-6",ref:"tripform"},{default:l(()=>[t(v,null,{default:l(()=>[t(m,{cols:"12",md:"6"},{default:l(()=>[t(S,{modelValue:i.locationdata,"onUpdate:modelValue":e[0]||(e[0]=a=>i.locationdata=a),label:"Location",items:this.cityLoaction,"item-value":"value","item-title":"text","menu-props":{maxHeight:200}},null,8,["modelValue","items"])]),_:1}),t(m,{cols:"12",md:"6"},{default:l(()=>[t(y,{type:"date",label:"Date",modelValue:i.Enddate,"onUpdate:modelValue":e[1]||(e[1]=a=>i.Enddate=a),rules:s.endr},null,8,["modelValue","rules"])]),_:1}),t(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[t(p,{onClick:c.validateForm},{default:l(()=>[h("Get")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),r("div",j,[t(y,{class:"mb-3",modelValue:i.searchQuery,"onUpdate:modelValue":e[2]||(e[2]=a=>i.searchQuery=a),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),i.loading?(d(),u("div",K,J)):k("",!0),t(A,{headers:i.headers,items:this.paginatedItems,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:l(()=>[r("thead",null,[r("tr",null,[(d(!0),u(g,null,f(i.headers,a=>(d(),u("th",{class:"text-center",key:a},n(a.text),1))),128))])]),r("tbody",null,[c.filteredSAwisetarget.length===0?(d(),u("tr",X,Z)):k("",!0),(d(!0),u(g,null,f(this.filteredSAwisetarget,(a,o)=>(d(),u("tr",{key:o},[r("td",$,n(o+1),1),r("td",ee,n(a.city),1),r("td",te,n(a.trip_name),1),r("td",se,n(a.location),1),r("td",ae,n(a.delivery_person),1),r("td",le,n(a.sales_order_count),1),r("td",ie,[t(p,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"x-small"},{default:l(()=>[t(V,{icon:"ri-pencil-line",size:"22",color:"#BA8B32",onClick:I=>c.editrow(a)},null,8,["onClick"])]),_:2},1024),t(p,{icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:I=>c.viewrow(a)},{default:l(()=>[t(V,{color:"success",icon:"basil:eye-outline",size:"22"})]),_:2},1032,["onClick"])])]))),128))]),t(T,{modelValue:i.dialog,"onUpdate:modelValue":e[5]||(e[5]=a=>i.dialog=a),"max-width":"400",persistent:""},{default:l(()=>[t(x,{title:"Assign Delivery Person",class:"mb-2"},{default:l(()=>[t(b,null,{default:l(()=>[t(v,null,{default:l(()=>[t(m,{cols:"12"},{default:l(()=>[t(w,{class:"mt-4",ref:"purchaseOrderForm"},{default:l(()=>[t(v,null,{default:l(()=>[t(m,{md:"12",cols:"12"},{default:l(()=>[t(S,{modelValue:i.Deliverypersondata,"onUpdate:modelValue":e[3]||(e[3]=a=>i.Deliverypersondata=a),items:this.deliveryPerson,"item-value":"value","item-title":"text",label:"Assign Delivery Person",rules:i.person,"menu-props":{maxHeight:200}},null,8,["modelValue","items","rules"])]),_:1}),t(m,{md:"12",cols:"12"},{default:l(()=>[t(p,{onClick:c.validateForm2},{default:l(()=>[h("Save")]),_:1},8,["onClick"]),h(" \xA0 "),t(p,{color:"secondary",variant:"tonal",onClick:e[4]||(e[4]=a=>c.closeDialog())},{default:l(()=>[h(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(T,{modelValue:i.dialog2,"onUpdate:modelValue":e[8]||(e[8]=a=>i.dialog2=a),"max-width":"800"},{default:l(()=>[t(x,{title:"View Trip Sales Orders",class:"mb-2"},{default:l(()=>[t(b,null,{default:l(()=>[r("div",re,[t(y,{class:"mb-3",modelValue:i.searchQuery2,"onUpdate:modelValue":e[6]||(e[6]=a=>i.searchQuery2=a),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),t(A,{headers:i.headers2,items:this.paginatedItems2,"item-key":"dessert",class:"table-rounded","max-height":"90vh","max-width":"800","fixed-header":""},{default:l(()=>[r("thead",null,[r("tr",null,[(d(!0),u(g,null,f(i.headers2,a=>(d(),u("th",{class:"text-center",key:a},n(a.text),1))),128))])]),r("tbody",null,[(d(!0),u(g,null,f(this.filteredSAwisetarget2,(a,o)=>(d(),u("tr",{key:o},[r("td",oe,n(o+1),1),r("td",ne,n(a.sku_name),1),r("td",de,n(a.shipped_ordered),1),r("td",ue,n(a.shipped_exchange),1)]))),128))])]),_:1},8,["headers","items"]),h(),ce,t(p,{color:"primary",onClick:e[7]||(e[7]=a=>c.closeDialog2())},{default:l(()=>[h(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["headers","items"]),t(E,{modelValue:i.page,"onUpdate:modelValue":e[9]||(e[9]=a=>i.page=a),length:Math.ceil(c.filteredSAwisetarget.length/i.pageSize),onInput:c.updatePagination},null,8,["modelValue","length","onInput"]),t(O,{modelValue:i.snackbar,"onUpdate:modelValue":e[10]||(e[10]=a=>i.snackbar=a),timeout:3500,color:i.color},{default:l(()=>[h(n(i.snackbarText),1)]),_:1},8,["modelValue","color"])])}const me=C(W,[["render",he]]),pe={components:{AssignedTripview:me},data(){return{currentroute:"",activeTab:"",tabs:[{title:"Assign Trip View",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=z(),this.activeTab=U(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function ge(s,e,_,D,i,c){const a=N("AssignedTripview");return d(),u("div",null,[t(G,{modelValue:i.activeTab,"onUpdate:modelValue":e[0]||(e[0]=o=>i.activeTab=o),"show-arrows":""},{default:l(()=>[(d(!0),u(g,null,f(i.tabs,o=>(d(),Q(R,{key:o.icon,value:o.tab},{default:l(()=>[t(V,{size:"20",start:"",icon:o.icon},null,8,["icon"]),h(" "+n(o.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(F),t(H,{modelValue:i.activeTab,"onUpdate:modelValue":e[1]||(e[1]=o=>i.activeTab=o),class:"mt-5 disable-tab-transition",touch:!1},{default:l(()=>[t(q,{value:"account"},{default:l(()=>[t(a)]),_:1})]),_:1},8,["modelValue"])])}const Ie=C(pe,[["render",ge]]);export{Ie as default};
