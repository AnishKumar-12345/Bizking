import{_ as V,o as u,c as p,g as t,w as s,i,j as g,k as _,l as b,b as c,m as h,u as v,t as k,v as T,e as C,r as x,F as w,q as S,f as I,s as F}from"./index.08705643.js";import{s as y}from"./Services.f9e4372b.js";import{V as E}from"./VForm.eec84c64.js";import{V as A}from"./VFileInput.405878e9.js";import{V as f}from"./VTextField.0584a3e6.js";import{V as D}from"./VSnackbar.89c018e7.js";import{V as U,a as W,b as B,c as q}from"./VWindowItem.2d182e11.js";import"./VCounter.d136124c.js";import"./VChip.cd0ade04.js";const R={mixins:[y],data(){return{snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,weekname:[e=>!!e||"Weekname is required"],startdate:[e=>!!e||"Startdate is required"],Enddates:[e=>!!e||"Enddate is required"],fileRules:[e=>!!e||"File is required",e=>e&&e.size>0||"File is empty or invalid"],Importcsv:null,Weekname:"",Startdate:"",Enddate:""}},mounted(){},methods:{generateCSV(){return["SA ID","SA Name","Merchant ID","Merchant UID","Assigned Target"].join(",")+`
`},downloadCSV(){const e=this.generateCSV(),a=new Blob([e],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),m=URL.createObjectURL(a);o.setAttribute("href",m),o.setAttribute("download","fileformat.csv"),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},validateForm(){this.$refs.tripform.validate().then(e=>{e.valid==!0?this.saveTripdata():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},handleFileChange(e){e.target.files.length>0?(this.Importcsv=e.target.files[0],console.log("File Selected:",this.Importcsv)):this.Importcsv=null},saveTripdata(){const e=new FormData;this.Importcsv&&e.append("import_csv",this.Importcsv),e.append("week_name",this.Weekname),e.append("start_date",this.Startdate),e.append("end_date",this.Enddate),this.saveTrip(e).then(a=>{a.data.status==1?(this.snackbar=!0,this.snackbarText=a.data.message,this.color="primary",this.Importcsv="",this.Weekname="",this.Startdate="",this.Enddate="",window.location.reload(!0)):a.data.status==0?(this.snackbar=!0,this.snackbarText=a.data.message,this.color="on-background"):(this.snackbar=!0,this.color="on-background",this.snackbarText="File Is Mandatory")}).catch(a=>{console.error("Error uploading file:",a)})}}};function z(e,a,o,m,l,d){return u(),p("div",null,[t(b,null,{default:s(()=>[t(i,{cols:"12"},{default:s(()=>[t(g,{title:"Add SA Targets",class:"mb-4"},{default:s(()=>[t(_,null,{default:s(()=>[t(E,{class:"mt-6",ref:"tripform"},{default:s(()=>[t(b,null,{default:s(()=>[t(i,{cols:"12"},{default:s(()=>[c(" File Format Download "),t(h,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"small"},{default:s(()=>[t(v,{icon:"material-symbols:file-download",size:"42",color:"#BA8B32",onClick:d.downloadCSV},null,8,["onClick"])]),_:1})]),_:1}),t(i,{md:"6",cols:"12"},{default:s(()=>[t(A,{file:l.Importcsv,"onUpdate:file":a[0]||(a[0]=r=>l.Importcsv=r),label:"File Browse",accept:".csv, .xls, .xlsx",onInput:d.handleFileChange,multiple:""},null,8,["file","onInput"])]),_:1}),t(i,{md:"6",cols:"12"},{default:s(()=>[t(f,{modelValue:this.Weekname,"onUpdate:modelValue":a[1]||(a[1]=r=>this.Weekname=r),label:"Week Name",rules:l.weekname},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:s(()=>[t(f,{type:"date",modelValue:this.Startdate,"onUpdate:modelValue":a[2]||(a[2]=r=>this.Startdate=r),rules:l.startdate,label:"Start Date"},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",md:"6"},{default:s(()=>[t(f,{modelValue:this.Enddate,"onUpdate:modelValue":a[3]||(a[3]=r=>this.Enddate=r),type:"date",label:"End Date",rules:l.Enddates},null,8,["modelValue","rules"])]),_:1}),t(i,{cols:"12",class:"d-flex flex-wrap gap-4",onClick:d.validateForm},{default:s(()=>[t(h,null,{default:s(()=>[c("Save")]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{modelValue:l.snackbar,"onUpdate:modelValue":a[4]||(a[4]=r=>l.snackbar=r),timeout:3500,color:l.color},{default:s(()=>[c(k(l.snackbarText),1)]),_:1},8,["modelValue","color"])])}const N=V(R,[["render",z]]),j={components:{Createsatargets:N},data(){return{currentroute:"",activeTab:"",tabs:[{title:"Create SA Tragets",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=T(),this.activeTab=C(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function L(e,a,o,m,l,d){const r=x("Createsatargets");return u(),p("div",null,[t(W,{modelValue:l.activeTab,"onUpdate:modelValue":a[0]||(a[0]=n=>l.activeTab=n),"show-arrows":""},{default:s(()=>[(u(!0),p(w,null,S(l.tabs,n=>(u(),I(U,{key:n.icon,value:n.tab},{default:s(()=>[t(v,{size:"20",start:"",icon:n.icon},null,8,["icon"]),c(" "+k(n.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(F),t(q,{modelValue:l.activeTab,"onUpdate:modelValue":a[1]||(a[1]=n=>l.activeTab=n),class:"mt-5 disable-tab-transition",touch:!1},{default:s(()=>[t(B,{value:"account"},{default:s(()=>[t(r)]),_:1})]),_:1},8,["modelValue"])])}const Y=V(j,[["render",L]]);export{Y as default};
