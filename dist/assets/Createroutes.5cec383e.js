import{_ as V,o as u,c as m,g as t,w as a,i as n,j as b,k as _,l as f,m as p,b as h,v as g,e as x,F as k,q as w,s as A,r as T,f as R,u as S,t as y}from"./index.42f55023.js";import{s as D}from"./Services.f692740f.js";import{V as F}from"./VForm.777a4687.js";import{V as v}from"./VAutocomplete.65639584.js";import{V as C}from"./VTextField.e1a88779.js";import{V as I,a as B,b as q,c as U}from"./VWindowItem.4c69d9f4.js";import"./VSelect.63c3a47b.js";import"./VCheckboxBtn.99960a28.js";import"./VChip.19dc4ade.js";const N={mixins:[D],data(){return{cityID:"",text:123,salesdata:[],salesassicate:"",merchantsawise:"",Routename:"",merchantSA:[],merchantSAdata:[],routerules:[l=>!!l||"Route Name is required"],routesdata:{}}},mounted(){this.cityID=localStorage.getItem("city_id"),this.getAllsales(),console.log("tric",this.cityID)},methods:{validateForm(){this.$refs.purchaseOrderForm.validate().then(l=>{l.valid==!0?this.saveRoutedetails():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},saveRoutedetails(){const l={route_name:this.Routename,user_id:this.salesassicate,merchants:this.merchantsawise.map(e=>{const s=this.merchantSA.find(d=>d.value===e);return s?{merchant_id:s.value,merchant_uid:s.text,merchant_name:s.merchant_name,latitude:s.latitude,longitude:s.longitude}:(console.warn(`Merchant with ID ${e} not found in merchantSA`),null)}).filter(e=>e!==null)};console.log("check route",l),this.saveRoute(l).then(e=>{console.log("check route",e),e.data.status==1?(this.snackbar=!0,this.snackbarText=e.data.message,this.color="primary",window.location.reload()):(this.snackbar=!0,this.snackbarText=e.data.message,this.color="on-background")})},handleBrandSelection(l){this.getmerchantsawise(l).then(e=>{console.log("check rp",e),this.merchantSA=e.data.map(s=>({value:s.merchant_id,text:s.merchant_uid,merchant_name:s.merchant_name,latitude:s.latitude,longitude:s.longitude}))})},getAllsales(){this.getSalesassociate(this.cityID).then(l=>{console.log("sales",l),this.salesdata=l.data.data,this.salesdata=this.salesdata.map(e=>({value:e.user_id,text:e.name})),console.log("sales",this.salesdata)})}}};function W(l,e,s,d,o,c){return u(),m("div",null,[t(f,null,{default:a(()=>[t(n,{cols:"12"},{default:a(()=>[t(b,{title:"Add Routes",class:"mb-4"},{default:a(()=>[t(_,null,{default:a(()=>[t(F,{class:"mt-6",ref:"purchaseOrderForm"},{default:a(()=>[t(f,null,{default:a(()=>[t(n,{cols:"12",md:"6"},{default:a(()=>[t(v,{modelValue:o.salesassicate,"onUpdate:modelValue":[e[0]||(e[0]=r=>o.salesassicate=r),e[1]||(e[1]=r=>c.handleBrandSelection(o.salesassicate))],label:"Sales Associate",items:this.salesdata,"item-value":"value","item-title":"text","menu-props":{maxHeight:200},required:""},null,8,["modelValue","items"])]),_:1}),t(n,{cols:"12",md:"6"},{default:a(()=>[t(v,{modelValue:this.merchantsawise,"onUpdate:modelValue":e[2]||(e[2]=r=>this.merchantsawise=r),label:"Merchants SA Wise",items:this.merchantSA,"item-value":"value","item-title":"text",multiple:"",required:"","menu-props":{maxHeight:200}},null,8,["modelValue","items"])]),_:1}),t(n,{cols:"12",md:"6"},{default:a(()=>[t(C,{modelValue:this.Routename,"onUpdate:modelValue":e[3]||(e[3]=r=>this.Routename=r),label:"Route Name",rules:o.routerules,required:""},null,8,["modelValue","rules"])]),_:1}),t(n,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(p,{onClick:e[4]||(e[4]=r=>c.validateForm())},{default:a(()=>[h("Save")]),_:1}),t(p,{color:"secondary",variant:"tonal",type:"reset"},{default:a(()=>[h(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})])}const $=V(N,[["render",W]]),H={components:{Addroutes:$},data(){return{currentroute:"",activeTab:"",tabs:[{title:"Add Routes",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=g(),this.activeTab=x(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function M(l,e,s,d,o,c){const r=T("Addroutes");return u(),m("div",null,[t(I,{modelValue:o.activeTab,"onUpdate:modelValue":e[0]||(e[0]=i=>o.activeTab=i),"show-arrows":""},{default:a(()=>[(u(!0),m(k,null,w(o.tabs,i=>(u(),R(U,{key:i.icon,value:i.tab},{default:a(()=>[t(S,{size:"20",start:"",icon:i.icon},null,8,["icon"]),h(" "+y(i.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(A),t(q,{modelValue:o.activeTab,"onUpdate:modelValue":e[1]||(e[1]=i=>o.activeTab=i),class:"mt-5 disable-tab-transition",touch:!1},{default:a(()=>[t(B,{value:"account"},{default:a(()=>[t(r)]),_:1})]),_:1},8,["modelValue"])])}const Q=V(H,[["render",M]]);export{Q as default};
