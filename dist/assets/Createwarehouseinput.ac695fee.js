import{_ as x,o as u,c as i,g as e,w as o,i as d,j as g,k as I,l as S,m as p,a as n,F as b,s as V,t as m,n as v,b as k,x as T,e as D,u as q,r as U,f as w,v as C}from"./index.a09c0f04.js";import{s as P}from"./Services.cbe723d2.js";import{V as R}from"./VForm.01c3c56f.js";import{V as y}from"./VSelect.f0e3a4e8.js";import{V as F}from"./VTable.867fae40.js";import{V as O}from"./VSnackbar.e3222511.js";import{V as B,a as N,b as E,c as M}from"./VWindowItem.438b72a9.js";import"./index.2bd8ddc8.js";import"./VCheckboxBtn.0a67b70e.js";import"./VChip.fad8bb56.js";const Q={mixins:[P],props:["po_id"],data(){return{snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,today:this.getFormattedDate(new Date),inputStock:{brand_id:"",stock_updated_date:this.getFormattedDate(new Date),received_quantity:"",remarks:"",rtm:"",products:[{brand_id:"",brand_product_id:"",received_quantity:"",rtm:"",remarks:""}]},PoId:"",InputStockDetails:[],selectedPurchaseOrder:null,dialog:!1,headers:[{text:"Product Name",value:"brand_name"},{text:"Ordered Quantity",value:"quantity"},{text:"Received Quantity",value:"quantity"},{text:"RTM",value:"carbs"},{text:"Remarks",value:"protein"}]}},computed:{filteredDesserts(){return this.selectedPurchaseOrder,this.desserts.filter(s=>s.purchaseOrder===this.selectedPurchaseOrder)}},mounted(){this.PoId=this.$route.query.po_id,console.log("Received po_id:",this.PoId),this.getInputstockdetails()},methods:{saveInputstock(){const s={brand_id:this.inputStock.brand_id,stock_updated_date:this.inputStock.stock_updated_date,products:this.inputStockproducts.filter(t=>t.received_quantity>0).map((t,_)=>({brand_id:this.inputStock.brand_id,brand_product_id:t.brand_product_id,received_quantity:t.received_quantity,rtm:t.rtm,remarks:t.remarks}))};console.log("check the post data",s),this.PostInputstock(s).then(t=>{console.log("check the response",t),console.log("check the response",t.status),t.status==1?(this.snackbar=!0,this.color="success",this.formData={},this.snackbarText=t.message,this.getInputstockdetails()):(this.snackbar=!0,this.color="error")})},getFormattedDate(s){const t=s.getFullYear(),_=String(s.getMonth()+1).padStart(2,"0"),h=String(s.getDate()).padStart(2,"0");return`${t}-${_}-${h}`},getInputstockdetails(){this.getInputstock(this.PoId).then(s=>{this.InputStockDetails=s.data,console.log("check input dtock",s),this.InputStockDetails.forEach(t=>{this.inputStock.brand_id=t.brand_id,this.inputStock.po_number=t.po_number,this.inputStock.brand_name=t.brand_name,this.inputStock.po_status=t.po_status,this.inputStockproducts=t.products,this.inputStock.received_quantity=t.received_quantity,this.inputStock.remarks=t.remarks,this.inputStock.rtm=t.rtm,console.log("inputStockproducts",this.inputStockproducts)})})}}},W={class:"text-center"},j={class:"text-center"},z={class:"text-center"},A={class:"text-center"},L={class:"text-center"};function Y(s,t,_,h,l,f){return u(),i("div",null,[e(S,null,{default:o(()=>[e(d,{cols:"12"},{default:o(()=>[e(g,{title:"Input Stock",class:"mb-4"},{default:o(()=>[e(I,null,{default:o(()=>[e(R,{class:"mt-6"},{default:o(()=>[e(S,null,{default:o(()=>[e(d,{md:"6",cols:"12"},{default:o(()=>[e(y,{modelValue:this.inputStock.po_number,"onUpdate:modelValue":t[0]||(t[0]=a=>this.inputStock.po_number=a),label:"Purchase Order"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:o(()=>[e(p,{modelValue:this.inputStock.brand_name,"onUpdate:modelValue":t[1]||(t[1]=a=>this.inputStock.brand_name=a),label:"Order To"},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:o(()=>[e(p,{modelValue:this.inputStock.stock_updated_date,"onUpdate:modelValue":t[2]||(t[2]=a=>this.inputStock.stock_updated_date=a),type:"date",label:"Date",min:l.today,rules:s.dateRules,readonly:""},null,8,["modelValue","min","rules"])]),_:1}),e(d,{md:"6",cols:"12"},{default:o(()=>[e(y,{modelValue:this.inputStock.po_status,"onUpdate:modelValue":t[3]||(t[3]=a=>this.inputStock.po_status=a),label:"PO Status",items:["Draft","Created","Shared","Acknowledged","Received","Close"]},null,8,["modelValue"])]),_:1}),e(d,{cols:"12"},{default:o(()=>[e(F,{headers:l.headers,items:l.InputStockDetails},{default:o(()=>[n("thead",null,[n("tr",null,[(u(!0),i(b,null,V(l.headers,a=>(u(),i("th",{class:"text-center",key:a},m(a.text),1))),128))])]),n("tbody",null,[(u(!0),i(b,null,V(this.inputStockproducts,(a,r)=>(u(),i("tr",{key:r},[n("td",W,m(a.sku_name),1),n("td",j,m(a.quantity),1),n("td",z,[e(p,{modelValue:a.received_quantity,"onUpdate:modelValue":c=>a.received_quantity=c,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),n("td",A,[e(p,{modelValue:a.rtm,"onUpdate:modelValue":c=>a.rtm=c,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),n("td",L,[e(p,{modelValue:a.remarks,"onUpdate:modelValue":c=>a.remarks=c,outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])]),_:1},8,["headers","items"])]),_:1}),e(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:o(()=>[e(v,{onClick:f.saveInputstock},{default:o(()=>[k("Save")]),_:1},8,["onClick"]),e(v,{color:"secondary",variant:"tonal",type:"reset"},{default:o(()=>[k(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(O,{modelValue:l.snackbar,"onUpdate:modelValue":t[4]||(t[4]=a=>l.snackbar=a),timeout:3e3,color:l.color},{default:o(()=>[k(m(l.snackbarText),1)]),_:1},8,["modelValue","color"])])}const G=x(Q,[["render",Y]]),H={components:{Inputstock:G},data(){return{currentroute:"",activeTab:"",tabs:[{title:"Create Input Stock",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=T(),this.activeTab=D(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function J(s,t,_,h,l,f){const a=U("Inputstock");return u(),i("div",null,[e(B,{modelValue:l.activeTab,"onUpdate:modelValue":t[0]||(t[0]=r=>l.activeTab=r),"show-arrows":""},{default:o(()=>[(u(!0),i(b,null,V(l.tabs,r=>(u(),w(M,{key:r.icon,value:r.tab},{default:o(()=>[e(C,{size:"20",start:"",icon:r.icon},null,8,["icon"]),k(" "+m(r.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(q),e(E,{modelValue:l.activeTab,"onUpdate:modelValue":t[1]||(t[1]=r=>l.activeTab=r),class:"mt-5 disable-tab-transition",touch:!1},{default:o(()=>[e(N,{value:"account"},{default:o(()=>[e(a)]),_:1})]),_:1},8,["modelValue"])])}const rt=x(H,[["render",J]]);export{rt as default};
