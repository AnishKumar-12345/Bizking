import{_ as h,o as s,f as c,w as n,g as r,bq as k,b as u,k as y,a as b,m as p,j as V,v as T,e as S,c as g,F as x,q as D,s as M,r as w,u as I,t as L}from"./index.f18c6187.js";import{V as C,a as R,b as P,c as E}from"./VWindowItem.a6b004d0.js";const F={name:"LocationTracker",data(){return{map:null,truckMarker:null,locations:[{name:"SLN TERMINALS",lat:17.452,lng:78.3641},{name:"IKEA",lat:17.4387591,lng:78.3751236},{name:"lulu",lat:17.4899592,lng:78.3931159},{name:"inorbit",lat:17.4345546,lng:78.3866982},{name:"Shilparamam",lat:17.4514663,lng:78.3774635}],currentLocationIndex:0,journeyStarted:!1}},mounted(){this.initMap()},methods:{initMap(){this.map=new google.maps.Map(this.$refs.map,{center:{lat:17.452,lng:78.3641},zoom:12}),this.locations.forEach(e=>{new google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:this.map,title:e.name})})},async startJourney(){this.journeyStarted=!0,navigator.geolocation.getCurrentPosition(e=>{const a={lat:e.coords.latitude,lng:e.coords.longitude};this.truckMarker=new google.maps.Marker({position:a,map:this.map,icon:{path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW,scale:6,strokeColor:"#FF0000",fillColor:"#FF0000",fillOpacity:1,rotation:0}}),this.moveTruck(a,this.locations[0])},e=>{console.error("Error getting user location:",e)})},moveTruck(e,a){new google.maps.DirectionsService().route({origin:e,destination:{lat:a.lat,lng:a.lng},travelMode:"DRIVING"},(l,o)=>{if(o==="OK"){const i=new google.maps.DirectionsRenderer;i.setMap(this.map),i.setDirections(l);const t=l.routes[0].legs[0].steps[0].end_location,f=setInterval(()=>{if(google.maps.geometry.spherical.computeDistanceBetween(this.truckMarker.getPosition(),t)>10){const v=google.maps.geometry.spherical.computeHeading(this.truckMarker.getPosition(),t),_=google.maps.geometry.spherical.computeOffset(this.truckMarker.getPosition(),10,v);this.truckMarker.setPosition(_)}else clearInterval(f),this.currentLocationIndex<this.locations.length-1?(this.currentLocationIndex++,this.moveTruck(t,this.locations[this.currentLocationIndex])):(alert("Truck reached all locations!"),this.journeyStarted=!1)},2e3)}else console.error("Directions request failed due to "+o)})}}},B={ref:"map",style:{height:"400px"}};function N(e,a,d,l,o,i){return s(),c(V,null,{default:n(()=>[r(k,null,{default:n(()=>[u("Location Tracker")]),_:1}),r(y,null,{default:n(()=>[b("div",B,null,512),o.journeyStarted?(s(),c(p,{key:1,disabled:""},{default:n(()=>[u("Truck is on its way")]),_:1})):(s(),c(p,{key:0,onClick:i.startJourney},{default:n(()=>[u("Start Journey")]),_:1},8,["onClick"]))]),_:1})]),_:1})}const O=h(F,[["render",N]]),j={components:{Delivery:O},data(){return{currentroute:"",activeTab:"",tabs:[{title:"MAP",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=T(),this.activeTab=S(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function A(e,a,d,l,o,i){const m=w("Delivery");return s(),g("div",null,[r(C,{modelValue:o.activeTab,"onUpdate:modelValue":a[0]||(a[0]=t=>o.activeTab=t),"show-arrows":""},{default:n(()=>[(s(!0),g(x,null,D(o.tabs,t=>(s(),c(E,{key:t.icon,value:t.tab},{default:n(()=>[r(I,{size:"20",start:"",icon:t.icon},null,8,["icon"]),u(" "+L(t.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),r(M),r(P,{modelValue:o.activeTab,"onUpdate:modelValue":a[1]||(a[1]=t=>o.activeTab=t),class:"mt-5 disable-tab-transition",touch:!1},{default:n(()=>[r(R,{value:"account"},{default:n(()=>[r(m)]),_:1})]),_:1},8,["modelValue"])])}const J=h(j,[["render",A]]);export{J as default};
