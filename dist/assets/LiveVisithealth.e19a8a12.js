import{_ as S,r as D,o,c as r,g as l,w as n,k as Q,l as U,i as T,j as v,a as i,b8 as p,F as h,q as g,t as u,b as c,bs as y,bu as b,m as C,bp as N,bq as M,v as P,e as B,s as F,f as q,u as A}from"./index.7e5301d2.js";import{s as G}from"./Services.e2ee330a.js";import{V as R}from"./VAutocomplete.8599a9d6.js";import{V as f}from"./VTextField.969f3f52.js";import{V as k}from"./VChip.af398333.js";import{V}from"./VTable.dc5363c0.js";import{V as x}from"./VPagination.c14eede1.js";import{V as w}from"./VDialog.6d843b05.js";import{V as E}from"./VSnackbar.3334e156.js";import{V as H,a as W,b as j,c as J}from"./VWindowItem.f305b40e.js";import"./VSelect.2e908d75.js";import"./VCheckboxBtn.96ebc215.js";import"./VCounter.f7f19471.js";const K={mixins:[G],data(){return{searchQuery:"",searchQuery2:"",searchQuery3:"",searchQuery4:"",snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,loading:!1,visithealth:[],visitagegap3:[],visitagegap5:[],visitagegapabove5:[],interval:null,cityID:"",page:1,pageSize:10,page2:1,pageSize2:10,dialog:!1,dialog2:!1,dialog3:!1,locationsdata:[],page3:1,pageSize3:10,page4:1,pageSize4:10,headers:[{text:"Retail Chain",value:"brand_name"},{text:"Stores Count",value:"sku_name"},{text:"Visit Age < 3Days",value:"uom"},{text:"Visit Age < 5Days",value:"hsn_code"},{text:"Visit Age >= 5Days",value:"available_qty"}],headers2:[{text:"Merchant Name",value:"brand_name"},{text:"Merchant UID",value:"sku_name"},{text:"Last Visited Date",value:"uom"}],headers3:[{text:"Merchant Name",value:"brand_name"},{text:"Merchant UID",value:"sku_name"},{text:"Last Visited Date",value:"uom"}],headers4:[{text:"Merchant Name",value:"brand_name"},{text:"Merchant UID",value:"sku_name"},{text:"Last Visited Date",value:"uom"}]}},computed:{filteredvisitagegapabove5(){const s=this.searchQuery4.toLowerCase().trim();return this.visitagegapabove5.filter(e=>e.merchant_name&&e.merchant_name.toLowerCase().includes(s)||e.merchant_uid&&e.merchant_uid.toLowerCase().includes(s)||e.last_visited_date&&e.last_visited_date.toLowerCase().includes(s))},paginatedItems4(){const s=(this.page4-1)*this.pageSize4,e=s+this.pageSize4;return this.filteredvisitagegapabove5.slice(s,e)},filteredvisitagegap5(){const s=this.searchQuery3.toLowerCase().trim();return this.visitagegap5.filter(e=>e.merchant_name&&e.merchant_name.toLowerCase().includes(s)||e.merchant_uid&&e.merchant_uid.toLowerCase().includes(s)||e.last_visited_date&&e.last_visited_date.toLowerCase().includes(s))},paginatedItems3(){const s=(this.page3-1)*this.pageSize3,e=s+this.pageSize3;return this.filteredvisitagegap5.slice(s,e)},filteredvisitagegap3(){const s=this.searchQuery2.toLowerCase().trim();return this.visitagegap3.filter(e=>e.merchant_name&&e.merchant_name.toLowerCase().includes(s)||e.merchant_uid&&e.merchant_uid.toLowerCase().includes(s)||e.last_visited_date&&e.last_visited_date.toLowerCase().includes(s))},paginatedItems2(){const s=(this.page2-1)*this.pageSize2,e=s+this.pageSize2;return this.filteredvisitagegap3.slice(s,e)},filteredvisithealth(){const s=this.searchQuery.toLowerCase().trim();return this.visithealth.filter(e=>e.merchant_name&&e.merchant_name.toLowerCase().includes(s)||e.sa_delivery_age_gap_3&&e.sa_delivery_age_gap_3.toString().includes(s)||e.sa_delivery_age_gap_5&&e.sa_delivery_age_gap_5.toString().includes(s)||e.sa_delivery_age_gap_above&&e.sa_delivery_age_gap_above.toString().includes(s)||e.stores_count&&e.stores_count.toString().includes(s))},paginatedItems(){const s=(this.page-1)*this.pageSize,e=s+this.pageSize;return this.filteredvisithealth.slice(s,e)}},mounted(){this.getBranchnames()},beforeUnmount(){this.interval&&clearInterval(this.interval)},methods:{openDialog(s){this.dialog=!0,this.visitagegap3=s},openDialog2(s){this.dialog2=!0,this.visitagegap5=s},openDialog3(s){this.dialog3=!0,this.visitagegapabove5=s},getvisithealthdata(s){this.visithealth=[],this.loading=!0,this.getVisithealth(s).then(e=>{console.log({response:e}),e.data.status==1?(this.snackbarText=e.data.message,this.color="primary",this.snackbar=!0,this.visithealth=e.data.data,this.loading=!1):(this.snackbarText=e.data.message,this.color="on-background",this.snackbar=!0,this.loading=!1)})},updatePagination(s){this.page=s},updatePagination2(s){this.page2=s},updatePagination3(s){this.page3=s},updatePagination4(s){this.page4=s},getBranchnames(){this.Locationdata().then(s=>{this.locationsdata=s.data.data.map(e=>({value:e.city_id,text:e.city})),console.log("ceck tye res",this.locationsdata)})}}},O={style:{"max-width":"400px"}},X={key:0,id:"app"},Y=N('<div id="loading-bg"><div class="loading-logo"><img src="'+M+'" height="60" width="68" alt="Logo"></div><div class="loading"><div class="effect-1 effects"></div><div class="effect-2 effects"></div><div class="effect-3 effects"></div></div></div>',1),Z=[Y],$={key:0},ee=i("td",{colspan:"16",class:"text-center"},[i("h1",null,"No data found !")],-1),te=[ee],ae={class:"text-center"},se={class:"text-center"},le={class:"text-center"},ie=["onClick"],ne={class:"text-center"},oe=["onClick"],re={class:"text-center"},de=["onClick"],ue={style:{"max-width":"400px",padding:"20px"}},ce={key:0},he=i("td",{colspan:"16",class:"text-center"},[i("h1",null,"No Data Found !")],-1),ge=[he],_e={class:"text-center"},me={class:"text-center"},pe={class:"text-center"},ve={style:{"max-width":"400px",padding:"20px"}},fe={key:0},Ve=i("td",{colspan:"16",class:"text-center"},[i("h1",null,"No Data Found !")],-1),xe=[Ve],ye={class:"text-center"},be={class:"text-center"},Ce={class:"text-center"},ke={style:{"max-width":"400px",padding:"20px"}},we={key:0},Ie=i("td",{colspan:"16",class:"text-center"},[i("h1",null,"No Data Found !")],-1),Se=[Ie],De={class:"text-center"},Le={class:"text-center"},ze={class:"text-center"};function Qe(s,e,L,z,a,d){const m=D("VCardContent");return o(),r("div",null,[l(v,{class:"mb-4"},{default:n(()=>[l(Q,null,{default:n(()=>[l(U,null,{default:n(()=>[l(T,{cols:"12",md:"6"},{default:n(()=>[l(R,{modelValue:a.cityID,"onUpdate:modelValue":[e[0]||(e[0]=t=>a.cityID=t),e[1]||(e[1]=t=>d.getvisithealthdata(a.cityID))],label:"City Names",items:a.locationsdata,"item-title":"text","item-value":"value",rules:s.locationrules,required:"","menu-props":{maxHeight:200}},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),i("div",O,[l(f,{modelValue:a.searchQuery,"onUpdate:modelValue":e[2]||(e[2]=t=>a.searchQuery=t),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),a.loading?(o(),r("div",X,Z)):p("",!0),l(V,{headers:a.headers,items:d.paginatedItems,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:n(()=>[i("thead",null,[i("tr",null,[(o(!0),r(h,null,g(a.headers,t=>(o(),r("th",{key:t,class:"text-center"},u(t.text),1))),128))])]),i("tbody",null,[d.filteredvisithealth.length===0?(o(),r("tr",$,te)):p("",!0),(o(!0),r(h,null,g(d.paginatedItems,(t,_)=>(o(),r("tr",{key:_},[i("td",ae,u(t.merchant_name),1),i("td",se,u(t.stores_count),1),i("td",le,[i("a",{onClick:I=>d.openDialog(t.sa_visit_age_gap_3_merchants)},[l(k,{color:"success",class:"font-weight-medium",size:"small"},{default:n(()=>[c(u(t.sa_visit_age_gap_3),1)]),_:2},1024)],8,ie)]),c(),i("td",ne,[i("a",{onClick:I=>d.openDialog2(t.sa_visit_age_gap_5_merchants)},[l(k,{color:"warning",class:"font-weight-medium",size:"small"},{default:n(()=>[c(u(t.sa_visit_age_gap_5),1)]),_:2},1024)],8,oe)]),c(),i("td",re,[i("a",{onClick:I=>d.openDialog3(t.sa_visit_age_gap_above_merchants)},[l(k,{color:"error",class:"font-weight-medium",size:"small"},{default:n(()=>[c(u(t.sa_visit_age_gap_above),1)]),_:2},1024)],8,de)])]))),128))])]),_:1},8,["headers","items"]),l(x,{modelValue:a.page,"onUpdate:modelValue":e[3]||(e[3]=t=>a.page=t),length:Math.ceil(d.filteredvisithealth.length/a.pageSize),onInput:d.updatePagination},null,8,["modelValue","length","onInput"]),l(w,{modelValue:a.dialog,"onUpdate:modelValue":e[7]||(e[7]=t=>a.dialog=t),"max-width":"1000px"},{default:n(()=>[l(v,null,{default:n(()=>[l(y,{class:"m-10"},{default:n(()=>[c(" Visit age Gap Lessthan 3 days ")]),_:1}),l(m,null,{default:n(()=>[i("div",ue,[l(f,{modelValue:a.searchQuery2,"onUpdate:modelValue":e[4]||(e[4]=t=>a.searchQuery2=t),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),l(V,{headers:a.headers},{default:n(()=>[i("thead",null,[i("tr",null,[(o(!0),r(h,null,g(a.headers2,t=>(o(),r("th",{key:t,class:"text-center"},u(t.text),1))),128))])]),i("tbody",null,[d.filteredvisitagegap3.length===0?(o(),r("tr",ce,ge)):p("",!0),(o(!0),r(h,null,g(d.paginatedItems2,(t,_)=>(o(),r("tr",{key:_},[i("td",_e,u(t.merchant_name),1),i("td",me,u(t.merchant_uid),1),i("td",pe,u(t.last_visited_date),1)]))),128))])]),_:1},8,["headers"]),l(x,{modelValue:a.page2,"onUpdate:modelValue":e[5]||(e[5]=t=>a.page2=t),length:Math.ceil(d.filteredvisitagegap3.length/a.pageSize2),onInput:d.updatePagination2},null,8,["modelValue","length","onInput"])]),_:1}),l(b,null,{default:n(()=>[l(C,{variant:"elevated",onClick:e[6]||(e[6]=t=>a.dialog=!1)},{default:n(()=>[c(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(w,{modelValue:a.dialog2,"onUpdate:modelValue":e[11]||(e[11]=t=>a.dialog2=t),"max-width":"1000px"},{default:n(()=>[l(v,null,{default:n(()=>[l(y,null,{default:n(()=>[c("Visit age Gap Lessthan 5 days")]),_:1}),l(m,null,{default:n(()=>[i("div",ve,[l(f,{modelValue:a.searchQuery3,"onUpdate:modelValue":e[8]||(e[8]=t=>a.searchQuery3=t),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),l(V,{headers:a.headers},{default:n(()=>[i("thead",null,[i("tr",null,[(o(!0),r(h,null,g(a.headers3,t=>(o(),r("th",{key:t,class:"text-center"},u(t.text),1))),128))])]),i("tbody",null,[d.filteredvisitagegap5.length===0?(o(),r("tr",fe,xe)):p("",!0),(o(!0),r(h,null,g(d.paginatedItems3,(t,_)=>(o(),r("tr",{key:_},[i("td",ye,u(t.merchant_name),1),i("td",be,u(t.merchant_uid),1),i("td",Ce,u(t.last_visited_date),1)]))),128))])]),_:1},8,["headers"]),l(x,{modelValue:a.page3,"onUpdate:modelValue":e[9]||(e[9]=t=>a.page3=t),length:Math.ceil(d.filteredvisitagegap5.length/a.pageSize3),onInput:d.updatePagination3},null,8,["modelValue","length","onInput"])]),_:1}),l(b,null,{default:n(()=>[l(C,{variant:"elevated",onClick:e[10]||(e[10]=t=>a.dialog2=!1)},{default:n(()=>[c(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(w,{modelValue:a.dialog3,"onUpdate:modelValue":e[15]||(e[15]=t=>a.dialog3=t),"max-width":"1000px"},{default:n(()=>[l(v,null,{default:n(()=>[l(y,null,{default:n(()=>[c("Visit age Gap Greater than and Equal to 5 days")]),_:1}),l(m,null,{default:n(()=>[i("div",ke,[l(f,{modelValue:a.searchQuery4,"onUpdate:modelValue":e[12]||(e[12]=t=>a.searchQuery4=t),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),l(V,{headers:a.headers},{default:n(()=>[i("thead",null,[i("tr",null,[(o(!0),r(h,null,g(a.headers4,t=>(o(),r("th",{key:t,class:"text-center"},u(t.text),1))),128))])]),i("tbody",null,[d.filteredvisitagegapabove5.length===0?(o(),r("tr",we,Se)):p("",!0),(o(!0),r(h,null,g(d.paginatedItems4,(t,_)=>(o(),r("tr",{key:_},[i("td",De,u(t.merchant_name),1),i("td",Le,u(t.merchant_uid),1),i("td",ze,u(t.last_visited_date),1)]))),128))])]),_:1},8,["headers"]),l(x,{modelValue:a.page4,"onUpdate:modelValue":e[13]||(e[13]=t=>a.page4=t),length:Math.ceil(d.filteredvisitagegapabove5.length/a.pageSize4),onInput:d.updatePagination4},null,8,["modelValue","length","onInput"])]),_:1}),l(b,null,{default:n(()=>[l(C,{variant:"elevated",onClick:e[14]||(e[14]=t=>a.dialog3=!1)},{default:n(()=>[c(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(E,{modelValue:a.snackbar,"onUpdate:modelValue":e[16]||(e[16]=t=>a.snackbar=t),timeout:3500,color:a.color},{default:n(()=>[c(u(a.snackbarText),1)]),_:1},8,["modelValue","color"])])}const Ue=S(K,[["render",Qe]]),Te={components:{Visithealth:Ue},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Visit Health",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=P(),this.activeTab=B(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function Ne(s,e,L,z,a,d){const m=D("Visithealth");return o(),r("div",null,[l(H,{modelValue:a.activeTab,"onUpdate:modelValue":e[0]||(e[0]=t=>a.activeTab=t),"show-arrows":""},{default:n(()=>[(o(!0),r(h,null,g(a.tabs,t=>(o(),q(J,{key:t.icon,value:t.tab},{default:n(()=>[l(A,{size:"20",start:"",icon:t.icon},null,8,["icon"]),c(" "+u(t.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(F),l(j,{modelValue:a.activeTab,"onUpdate:modelValue":e[1]||(e[1]=t=>a.activeTab=t),class:"mt-5 disable-tab-transition",touch:!1},{default:n(()=>[l(W,{value:"account"},{default:n(()=>[l(m)]),_:1})]),_:1},8,["modelValue"])])}const Ke=S(Te,[["render",Ne]]);export{Ke as default};
