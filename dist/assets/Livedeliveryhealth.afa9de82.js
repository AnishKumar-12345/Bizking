import{_ as T,r as A,o as i,c as d,g as n,w as r,k as E,l as N,i as L,a as s,b as c,t as u,j as y,b8 as f,F as h,q as _,bt as D,bv as C,m as S,bp as U,bq as Q,v as z,e as P,f as R,u as M,s as F}from"./index.08705643.js";import{s as B}from"./Services.f9e4372b.js";import{V as W}from"./VAutocomplete.457394fd.js";import{V as x}from"./VTextField.0584a3e6.js";import{V as w}from"./VChip.cd0ade04.js";import{V as b}from"./VTable.eda8fa83.js";import{V}from"./VPagination.f3ba474e.js";import{V as I}from"./VDialog.54dfbcf0.js";import{V as q}from"./VSnackbar.89c018e7.js";import{V as G,a as H,b as Y,c as O}from"./VWindowItem.2d182e11.js";import"./VSelect.00b3ff1f.js";import"./VCheckboxBtn.770726d6.js";import"./VCounter.d136124c.js";const j={mixins:[B],data(){return{searchQuery:"",searchQuery2:"",searchQuery3:"",searchQuery4:"",snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,loading:!1,deliveryhealth:[],deliveryhealth3:[],deliveryhealth5:[],deliveryhealthabove5:[],interval:null,cityID:"",page:1,pageSize:10,page2:1,pageSize2:10,page3:1,pageSize3:10,page4:1,pageSize4:10,dialog:!1,dialog2:!1,dialog3:!1,locationsdata:[],headers:[{text:"Retail Chain",value:"brand_name"},{text:"Stores Count",value:"sku_name"},{text:"Service Age < 3Days",value:"uom"},{text:"Service Age < 5Days",value:"hsn_code"},{text:"Service Age >= 5Days",value:"available_qty"}],headers2:[{text:"Merchant Name",value:"brand_name"},{text:"Merchant UID",value:"sku_name"},{text:"Last Delivered Date",value:"uom"}],headers3:[{text:"Merchant Name",value:"brand_name"},{text:"Merchant UID",value:"sku_name"},{text:"Last Delivered Date",value:"uom"}],headers4:[{text:"Merchant Name",value:"brand_name"},{text:"Merchant UID",value:"sku_name"},{text:"Last Delivered Date",value:"uom"}]}},computed:{todaysoldquanity(){const t=this.deliveryhealth.reduce((e,p)=>{const m=parseFloat(p.stores_count);return isNaN(m)?e:e+m},0);return isNaN(t)?0:t.toFixed(0)},filtereddeliveryagegapabove5(){const t=this.searchQuery4.toLowerCase().trim();return this.deliveryhealthabove5.filter(e=>e.merchant_name&&e.merchant_name.toLowerCase().includes(t)||e.merchant_uid&&e.merchant_uid.toLowerCase().includes(t)||e.last_delivered_date&&e.last_delivered_date.toLowerCase().includes(t))},sortedItems3(){return this.filtereddeliveryagegapabove5.slice().sort((t,e)=>new Date(e.last_delivered_date)-new Date(t.last_delivered_date))},paginatedItems4(){const t=(this.page4-1)*this.pageSize4,e=t+this.pageSize4;return this.sortedItems3.slice(t,e)},filtereddeliveryagegap5(){const t=this.searchQuery3.toLowerCase().trim();return this.deliveryhealth5.filter(e=>e.merchant_name&&e.merchant_name.toLowerCase().includes(t)||e.merchant_uid&&e.merchant_uid.toLowerCase().includes(t)||e.last_delivered_date&&e.last_delivered_date.toLowerCase().includes(t))},sortedItems2(){return this.filtereddeliveryagegap5.slice().sort((t,e)=>new Date(e.last_delivered_date)-new Date(t.last_delivered_date))},paginatedItems3(){const t=(this.page3-1)*this.pageSize3,e=t+this.pageSize3;return this.sortedItems2.slice(t,e)},filterdeliveryagegap3(){const t=this.searchQuery2.toLowerCase().trim();return this.deliveryhealth3.filter(e=>e.merchant_name&&e.merchant_name.toLowerCase().includes(t)||e.merchant_uid&&e.merchant_uid.toLowerCase().includes(t)||e.last_delivered_date&&e.last_delivered_date.toLowerCase().includes(t))},sortedItems(){return this.filterdeliveryagegap3.slice().sort((t,e)=>new Date(e.last_delivered_date)-new Date(t.last_delivered_date))},paginatedItems2(){const t=(this.page2-1)*this.pageSize2,e=t+this.pageSize2;return this.sortedItems.slice(t,e)},filteredeliveryhealth(){const t=this.searchQuery.toLowerCase().trim();return this.deliveryhealth.filter(e=>e.merchant_name&&e.merchant_name.toLowerCase().includes(t)||e.sa_visit_age_gap_3&&e.sa_visit_age_gap_3.toString().includes(t)||e.sa_visit_age_gap_5&&e.sa_visit_age_gap_5.toString().includes(t)||e.sa_visit_age_gap_above&&e.sa_visit_age_gap_above.toString().includes(t)||e.stores_count&&e.stores_count.toString().includes(t))},paginatedItems(){const t=(this.page-1)*this.pageSize,e=t+this.pageSize;return this.filteredeliveryhealth.slice(t,e)}},mounted(){this.getBranchnames()},beforeUnmount(){this.interval&&clearInterval(this.interval)},methods:{openDialog(t){this.dialog=!0,this.deliveryhealth3=t},openDialog2(t){this.dialog2=!0,this.deliveryhealth5=t},openDialog3(t){this.dialog3=!0,this.deliveryhealthabove5=t},getDeliveryhealthdata(t){this.deliveryhealth=[],this.loading=!0,this.getDeliveryhealth(t).then(e=>{console.log({response:e}),e.data.status==1?(this.snackbarText=e.data.message,this.color="primary",this.snackbar=!0,this.deliveryhealth=e.data.data,this.loading=!1):(this.snackbarText=e.data.message,this.color="on-background",this.snackbar=!0,this.loading=!1)})},getBranchnames(){this.Locationdata().then(t=>{this.locationsdata=t.data.data.map(e=>({value:e.city_id,text:e.city}))})},updatePagination(t){this.page=t},updatePagination2(t){this.page2=t},updatePagination3(t){this.page3=t},updatePagination4(t){this.page4=t}}},J={class:"stores-count"},K={style:{color:"rgb(13, 180, 13)"}},X={style:{"max-width":"400px"}},Z={key:0,id:"app"},$=U('<div id="loading-bg"><div class="loading-logo"><img src="'+Q+'" height="60" width="68" alt="Logo"></div><div class="loading"><div class="effect-1 effects"></div><div class="effect-2 effects"></div><div class="effect-3 effects"></div></div></div>',1),ee=[$],te={key:0},ae=s("td",{colspan:"16",class:"text-center"},[s("h1",null,"No data found !")],-1),le=[ae],se={class:"text-center"},ne={class:"text-center"},re={class:"text-center"},ie=["onClick"],oe={class:"text-center"},de=["onClick"],ue={class:"text-center"},ce=["onClick"],he=s("span",{style:{"background-color":"#bf9442","border-radius":"8px",padding:"10px","box-shadow":"0 2px 5px rgba(185, 178, 178, 0.1)",color:"#ffffff"}}," SERVICE AGE GAP LESS THAN 3 DAYS",-1),_e={style:{"max-width":"400px",padding:"20px"}},ge={key:0},me=s("td",{colspan:"16",class:"text-center"},[s("h1",null,"No Data Found !")],-1),pe=[me],ve={class:"text-center"},fe={class:"text-center"},ye={class:"text-center"},xe=s("span",{style:{"background-color":"#bf9442","border-radius":"8px",padding:"10px","box-shadow":"0 2px 5px rgba(185, 178, 178, 0.1)",color:"#ffffff"}}," SERVICE AGE GAP LESS THAN 5 DAYS ",-1),be={style:{"max-width":"400px",padding:"20px"}},Ve={key:0},De=s("td",{colspan:"16",class:"text-center"},[s("h1",null,"No Data Found !")],-1),Ce=[De],Se={class:"text-center"},we={class:"text-center"},Ie={class:"text-center"},ke=s("span",{style:{"background-color":"#bf9442","border-radius":"8px",padding:"10px","box-shadow":"0 2px 5px rgba(185, 178, 178, 0.1)",color:"#ffffff"}}," SERVICE AGE GAP GREATER THAN AND EQUAL TO 5 DAYS",-1),Le={style:{"max-width":"400px",padding:"20px"}},Te={key:0},Ae=s("td",{colspan:"16",class:"text-center"},[s("h1",null,"No Data Found !")],-1),Ee=[Ae],Ne={class:"text-center"},Ue={class:"text-center"},Qe={class:"text-center"};function ze(t,e,p,m,l,o){const v=A("VCardContent");return i(),d("div",null,[n(y,{class:"mb-4"},{default:r(()=>[n(E,null,{default:r(()=>[n(N,null,{default:r(()=>[n(L,{cols:"12",md:"6"},{default:r(()=>[n(W,{modelValue:l.cityID,"onUpdate:modelValue":[e[0]||(e[0]=a=>l.cityID=a),e[1]||(e[1]=a=>o.getDeliveryhealthdata(l.cityID))],label:"City Names",items:l.locationsdata,"item-title":"text","item-value":"value",rules:t.locationrules,required:"","menu-props":{maxHeight:200}},null,8,["modelValue","items","rules"])]),_:1}),n(L,{cols:"12",md:"6"},{default:r(()=>[s("h2",J,[c(" STORES COUNT "),s("span",K,u(o.todaysoldquanity),1)])]),_:1})]),_:1})]),_:1})]),_:1}),s("div",X,[n(x,{modelValue:l.searchQuery,"onUpdate:modelValue":e[2]||(e[2]=a=>l.searchQuery=a),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),l.loading?(i(),d("div",Z,ee)):f("",!0),n(b,{headers:l.headers,items:o.paginatedItems,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:r(()=>[s("thead",null,[s("tr",null,[(i(!0),d(h,null,_(l.headers,a=>(i(),d("th",{key:a,class:"text-center"},u(a.text),1))),128))])]),s("tbody",null,[o.filteredeliveryhealth.length===0?(i(),d("tr",te,le)):f("",!0),(i(!0),d(h,null,_(o.paginatedItems,(a,g)=>(i(),d("tr",{key:g},[s("td",se,u(a.merchant_name),1),s("td",ne,u(a.stores_count),1),s("td",re,[s("a",{onClick:k=>o.openDialog(a.sa_delivery_age_gap_3_merchants)},[n(w,{color:"success",class:"font-weight-medium",size:"small"},{default:r(()=>[c(u(a.sa_delivery_age_gap_3),1)]),_:2},1024)],8,ie)]),c(),s("td",oe,[s("a",{onClick:k=>o.openDialog2(a.sa_delivery_age_gap_5_merchants)},[n(w,{color:"warning",class:"font-weight-medium",size:"small"},{default:r(()=>[c(u(a.sa_delivery_age_gap_5),1)]),_:2},1024)],8,de)]),c(),s("td",ue,[s("a",{onClick:k=>o.openDialog3(a.sa_delivery_age_gap_above_merchants)},[n(w,{color:"error",class:"font-weight-medium",size:"small"},{default:r(()=>[c(u(a.sa_delivery_age_gap_above),1)]),_:2},1024)],8,ce)])]))),128))])]),_:1},8,["headers","items"]),n(V,{modelValue:l.page,"onUpdate:modelValue":e[3]||(e[3]=a=>l.page=a),length:Math.ceil(o.filteredeliveryhealth.length/l.pageSize),onInput:o.updatePagination},null,8,["modelValue","length","onInput"]),n(I,{modelValue:l.dialog,"onUpdate:modelValue":e[7]||(e[7]=a=>l.dialog=a),"max-width":"1000px"},{default:r(()=>[n(y,null,{default:r(()=>[n(D,{class:"mt-5 text-h5 text-center"},{default:r(()=>[he]),_:1}),n(v,null,{default:r(()=>[s("div",_e,[n(x,{modelValue:l.searchQuery2,"onUpdate:modelValue":e[4]||(e[4]=a=>l.searchQuery2=a),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),n(b,{headers:l.headers},{default:r(()=>[s("thead",null,[s("tr",null,[(i(!0),d(h,null,_(l.headers2,a=>(i(),d("th",{key:a,class:"text-center"},u(a.text),1))),128))])]),s("tbody",null,[o.filterdeliveryagegap3.length===0?(i(),d("tr",ge,pe)):f("",!0),(i(!0),d(h,null,_(o.paginatedItems2,(a,g)=>(i(),d("tr",{key:g},[s("td",ve,u(a.merchant_name),1),s("td",fe,u(a.merchant_uid),1),s("td",ye,u(a.last_delivered_date),1)]))),128))])]),_:1},8,["headers"]),n(V,{modelValue:l.page2,"onUpdate:modelValue":e[5]||(e[5]=a=>l.page2=a),length:Math.ceil(o.filterdeliveryagegap3.length/l.pageSize2),onInput:o.updatePagination2},null,8,["modelValue","length","onInput"])]),_:1}),n(C,null,{default:r(()=>[n(S,{variant:"elevated",onClick:e[6]||(e[6]=a=>l.dialog=!1)},{default:r(()=>[c(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(I,{modelValue:l.dialog2,"onUpdate:modelValue":e[11]||(e[11]=a=>l.dialog2=a),"max-width":"1000px"},{default:r(()=>[n(y,null,{default:r(()=>[n(D,{class:"mt-5 text-h5 text-center"},{default:r(()=>[xe]),_:1}),n(v,null,{default:r(()=>[s("div",be,[n(x,{modelValue:l.searchQuery3,"onUpdate:modelValue":e[8]||(e[8]=a=>l.searchQuery3=a),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),n(b,{headers:l.headers},{default:r(()=>[s("thead",null,[s("tr",null,[(i(!0),d(h,null,_(l.headers3,a=>(i(),d("th",{key:a,class:"text-center"},u(a.text),1))),128))])]),s("tbody",null,[o.filtereddeliveryagegap5.length===0?(i(),d("tr",Ve,Ce)):f("",!0),(i(!0),d(h,null,_(o.paginatedItems3,(a,g)=>(i(),d("tr",{key:g},[s("td",Se,u(a.merchant_name),1),s("td",we,u(a.merchant_uid),1),s("td",Ie,u(a.last_delivered_date),1)]))),128))])]),_:1},8,["headers"]),n(V,{modelValue:l.page3,"onUpdate:modelValue":e[9]||(e[9]=a=>l.page3=a),length:Math.ceil(o.filtereddeliveryagegap5.length/l.pageSize3),onInput:o.updatePagination3},null,8,["modelValue","length","onInput"])]),_:1}),n(C,null,{default:r(()=>[n(S,{variant:"elevated",onClick:e[10]||(e[10]=a=>l.dialog2=!1)},{default:r(()=>[c(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(I,{modelValue:l.dialog3,"onUpdate:modelValue":e[15]||(e[15]=a=>l.dialog3=a),"max-width":"1000px"},{default:r(()=>[n(y,null,{default:r(()=>[n(D,{class:"mt-5 text-h5 text-center"},{default:r(()=>[ke]),_:1}),n(v,null,{default:r(()=>[s("div",Le,[n(x,{modelValue:l.searchQuery4,"onUpdate:modelValue":e[12]||(e[12]=a=>l.searchQuery4=a),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),n(b,{headers:l.headers},{default:r(()=>[s("thead",null,[s("tr",null,[(i(!0),d(h,null,_(l.headers4,a=>(i(),d("th",{key:a,class:"text-center"},u(a.text),1))),128))])]),s("tbody",null,[o.filtereddeliveryagegapabove5.length===0?(i(),d("tr",Te,Ee)):f("",!0),(i(!0),d(h,null,_(o.paginatedItems4,(a,g)=>(i(),d("tr",{key:g},[s("td",Ne,u(a.merchant_name),1),s("td",Ue,u(a.merchant_uid),1),s("td",Qe,u(a.last_delivered_date),1)]))),128))])]),_:1},8,["headers"]),n(V,{modelValue:l.page4,"onUpdate:modelValue":e[13]||(e[13]=a=>l.page4=a),length:Math.ceil(o.filtereddeliveryagegapabove5.length/l.pageSize4),onInput:o.updatePagination4},null,8,["modelValue","length","onInput"])]),_:1}),n(C,null,{default:r(()=>[n(S,{variant:"elevated",onClick:e[14]||(e[14]=a=>l.dialog3=!1)},{default:r(()=>[c(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(q,{modelValue:l.snackbar,"onUpdate:modelValue":e[16]||(e[16]=a=>l.snackbar=a),timeout:3500,color:l.color},{default:r(()=>[c(u(l.snackbarText),1)]),_:1},8,["modelValue","color"])])}const Pe=T(j,[["render",ze]]);const Re={components:{Deliveryhealth:Pe},data(){return{currentroute:"",activeTab:"",tabs:[{title:"STORE RETAIL CHAIN LEVEL DELIVERY HEALTH STATUS",icon:"ic:baseline-connect-without-contact",tab:"account"}],currentDate:""}},computed:{tabsWithDate(){return this.currentDate=this.formatDate(new Date),this.tabs.map(t=>({...t,title:t.title}))}},mounted(){this.currentroute=z(),this.activeTab=P(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab},methods:{formatDate(t){const e=t.getDate(),p=t.toLocaleString("default",{month:"long"}),m=t.getFullYear();return`${this.getDayWithSuffix(e)} ${p} ${m}`},getDayWithSuffix(t){if(t>3&&t<21)return t+"th";switch(t%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd";default:return t+"th"}}}},Me={class:"title-text"},Fe={class:"date-text"};function Be(t,e,p,m,l,o){const v=A("Deliveryhealth");return i(),d("div",null,[n(H,{modelValue:l.activeTab,"onUpdate:modelValue":e[0]||(e[0]=a=>l.activeTab=a),"show-arrows":""},{default:r(()=>[(i(!0),d(h,null,_(o.tabsWithDate,a=>(i(),R(G,{key:a.icon,value:a.tab},{default:r(()=>[n(M,{size:"30",start:"",icon:a.icon},null,8,["icon"]),s("h2",null,[s("span",Me,u(a.title),1),c(" \xA0\xA0 "),s("span",Fe,"["+u(l.currentDate)+"]",1)])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),n(F),n(O,{modelValue:l.activeTab,"onUpdate:modelValue":e[1]||(e[1]=a=>l.activeTab=a),class:"mt-5 disable-tab-transition",touch:!1},{default:r(()=>[n(Y,{value:"account"},{default:r(()=>[n(v)]),_:1})]),_:1},8,["modelValue"])])}const tt=T(Re,[["render",Be]]);export{tt as default};
