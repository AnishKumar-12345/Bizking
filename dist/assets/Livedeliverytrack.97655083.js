import{_ as p,o as n,c,g as i,w as d,k as b,l as x,i as V,j as y,a as o,b8 as f,F as v,q as g,t as l,b as _,bp as k,bq as D,v as S,e as T,r as w,f as C,u as L,s as I}from"./index.08705643.js";import{s as N}from"./Services.f9e4372b.js";import{V as z}from"./VAutocomplete.457394fd.js";import{V as Q}from"./VTextField.0584a3e6.js";import{V as W}from"./VTable.eda8fa83.js";import{V as U}from"./VPagination.f3ba474e.js";import{V as j}from"./VSnackbar.89c018e7.js";import{V as B,a as O,b as R,c as q}from"./VWindowItem.2d182e11.js";import"./VSelect.00b3ff1f.js";import"./VCheckboxBtn.770726d6.js";import"./VCounter.d136124c.js";import"./VChip.cd0ade04.js";const F={mixins:[N],data(){return{searchQuery:"",searchQuery2:"",searchQuery3:"",searchQuery4:"",snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,loading:!1,deliveryTrack:[],visitagegapabove5:[],interval:null,cityID:"",page:1,pageSize:10,page2:1,pageSize2:10,dialog:!1,dialog2:!1,dialog3:!1,locationsdata:[],page3:1,pageSize3:10,page4:1,pageSize4:10,headers:[{text:"Driver Name",value:"sa_name"},{text:"Route Name",value:"route_name"},{text:"Status",value:"status"},{text:"SO Deliveries as Planned",value:"so_deliveries_planed"},{text:"SO Deliveries Completed",value:"visited_stores_count"},{text:"SO Deliveries On Route",value:"so_deliveries_on_route"},{text:"SO Deliveries Rejected/Onhold",value:"so_deliveries_rejected_onhold"},{text:"Login Time",value:"login_time"},{text:"Logout Time",value:"logout_time"}]}},computed:{filteredvisithealth(){const t=this.searchQuery.toLowerCase().trim();return this.deliveryTrack.filter(e=>e.sa_name&&e.sa_name.toLowerCase().includes(t)||e.route_name&&e.route_name.toLowerCase().includes(t)||e.stores_count&&e.stores_count.toString().includes(t)||e.visited_stores_count&&e.visited_stores_count.toString().includes(t)||e.status&&e.status.toLowerCase().includes(t)||e.login_time&&e.login_time.toLowerCase().includes(t)||e.logout_time&&e.logout_time.toLowerCase().includes(t)||e.so_deliveries_on_route&&e.so_deliveries_on_route.toString().includes(t)||e.so_deliveries_rejected_onhold&&e.so_deliveries_rejected_onhold.toString().includes(t))},paginatedItems(){const t=(this.page-1)*this.pageSize,e=t+this.pageSize;return this.filteredvisithealth.slice(t,e)}},mounted(){this.getBranchnames()},beforeUnmount(){this.interval&&clearInterval(this.interval)},methods:{getSAvisittarck(t){this.deliveryTrack=[],this.loading=!0,this.getDeliveryTrack(t).then(e=>{console.log({response:e}),e.data.status==1?(this.snackbarText=e.data.message,this.color="primary",this.snackbar=!0,this.deliveryTrack=e.data.data,this.loading=!1):(this.snackbarText=e.data.message,this.color="on-background",this.snackbar=!0,this.loading=!1)})},updatePagination(t){this.page=t},getBranchnames(){this.Locationdata().then(t=>{this.locationsdata=t.data.data.map(e=>({value:e.city_id,text:e.city})),console.log("ceck tye res",this.locationsdata)})}}},P={style:{"max-width":"400px"}},A={key:0,id:"app"},E=k('<div id="loading-bg"><div class="loading-logo"><img src="'+D+'" height="60" width="68" alt="Logo"></div><div class="loading"><div class="effect-1 effects"></div><div class="effect-2 effects"></div><div class="effect-3 effects"></div></div></div>',1),H=[E],M={key:0},Y=o("td",{colspan:"16",class:"text-center"},[o("h1",null,"No data found !")],-1),G=[Y],J={class:"text-center"},K={class:"text-center"},X={class:"text-center"},Z={class:"text-center"},$={class:"text-center"},ee={class:"text-center"},te={class:"text-center"},se={class:"text-center"},ae={class:"text-center"};function oe(t,e,h,m,a,u){return n(),c("div",null,[i(y,{class:"mb-4"},{default:d(()=>[i(b,null,{default:d(()=>[i(x,null,{default:d(()=>[i(V,{cols:"12",md:"6"},{default:d(()=>[i(z,{modelValue:a.cityID,"onUpdate:modelValue":[e[0]||(e[0]=s=>a.cityID=s),e[1]||(e[1]=s=>u.getSAvisittarck(a.cityID))],label:"City Names",items:a.locationsdata,"item-title":"text","item-value":"value",rules:t.locationrules,required:"","menu-props":{maxHeight:200}},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),o("div",P,[i(Q,{modelValue:a.searchQuery,"onUpdate:modelValue":e[2]||(e[2]=s=>a.searchQuery=s),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),a.loading?(n(),c("div",A,H)):f("",!0),i(W,{headers:a.headers,items:u.paginatedItems,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:d(()=>[o("thead",null,[o("tr",null,[(n(!0),c(v,null,g(a.headers,s=>(n(),c("th",{key:s,class:"text-center"},l(s.text),1))),128))])]),o("tbody",null,[u.filteredvisithealth.length===0?(n(),c("tr",M,G)):f("",!0),(n(!0),c(v,null,g(u.paginatedItems,(s,r)=>(n(),c("tr",{key:r},[o("td",J,l(s.sa_name),1),o("td",K,l(s.route_name),1),_(),o("td",X,l(s.status),1),_(),o("td",Z,l(s.so_deliveries_planed),1),_(),o("td",$,l(s.visited_stores_count),1),_(),o("td",ee,l(s.so_deliveries_on_route),1),o("td",te,l(s.so_deliveries_rejected_onhold),1),o("td",se,l(s.login_time),1),_(),o("td",ae,l(s.logout_time),1)]))),128))])]),_:1},8,["headers","items"]),i(U,{modelValue:a.page,"onUpdate:modelValue":e[3]||(e[3]=s=>a.page=s),length:Math.ceil(u.filteredvisithealth.length/a.pageSize),onInput:u.updatePagination},null,8,["modelValue","length","onInput"]),i(j,{modelValue:a.snackbar,"onUpdate:modelValue":e[4]||(e[4]=s=>a.snackbar=s),timeout:3500,color:a.color},{default:d(()=>[_(l(a.snackbarText),1)]),_:1},8,["modelValue","color"])])}const ie=p(F,[["render",oe]]);const le={components:{Deliverytrack:ie},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Route Level Daily Visit Tracking Date",icon:"ic:baseline-production-quantity-limits",tab:"account"}]}},computed:{tabsWithDate(){return this.currentDate=this.formatDate(new Date),this.tabs.map(t=>({...t,title:t.title}))}},mounted(){this.currentroute=S(),this.activeTab=T(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab},methods:{formatDate(t){const e=t.getDate(),h=t.toLocaleString("default",{month:"long"}),m=t.getFullYear();return`${this.getDayWithSuffix(e)} ${h} ${m}`},getDayWithSuffix(t){if(t>3&&t<21)return t+"th";switch(t%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd";default:return t+"th"}}}},re={class:"title-text"},ne={class:"date-text"};function de(t,e,h,m,a,u){const s=w("Deliverytrack");return n(),c("div",null,[i(O,{modelValue:a.activeTab,"onUpdate:modelValue":e[0]||(e[0]=r=>a.activeTab=r),"show-arrows":""},{default:d(()=>[(n(!0),c(v,null,g(u.tabsWithDate,r=>(n(),C(B,{key:r.icon,value:r.tab},{default:d(()=>[i(L,{size:"30",start:"",icon:r.icon},null,8,["icon"]),o("h2",null,[o("span",re,l(r.title),1),_(" \xA0\xA0 "),o("span",ne,"["+l(t.currentDate)+"]",1)])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),i(I),i(q,{modelValue:a.activeTab,"onUpdate:modelValue":e[1]||(e[1]=r=>a.activeTab=r),class:"mt-5 disable-tab-transition",touch:!1},{default:d(()=>[i(R,{value:"account"},{default:d(()=>[i(s)]),_:1})]),_:1},8,["modelValue"])])}const ye=p(le,[["render",de]]);export{ye as default};
