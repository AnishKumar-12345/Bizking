import{_ as g,o as c,c as _,g as i,w as m,k as p,l as x,i as b,j as S,a as s,b8 as v,F as y,q as f,t as r,b as h,bp as V,bq as w,v as N,e as k,r as q,f as F,u as T,s as A}from"./index.08705643.js";import{s as B}from"./Services.f9e4372b.js";import{V as D}from"./VAutocomplete.457394fd.js";import{V as C}from"./VTextField.0584a3e6.js";import{V as Q}from"./VTable.eda8fa83.js";import{V as I}from"./VSnackbar.89c018e7.js";import{V as L,a as W,b as U,c as z}from"./VWindowItem.2d182e11.js";import"./VSelect.00b3ff1f.js";import"./VCheckboxBtn.770726d6.js";import"./VCounter.d136124c.js";import"./VChip.cd0ade04.js";const R={mixins:[B],data(){return{searchQuery:"",searchQuery2:"",searchQuery3:"",searchQuery4:"",snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,loading:!1,SAsumskulevel:[],visitagegapabove5:[],interval:null,cityID:"",page:1,pageSize:10,page2:1,pageSize2:10,dialog:!1,dialog2:!1,dialog3:!1,locationsdata:[],page3:1,pageSize3:10,page4:1,pageSize4:10,headers:[{text:"Retail Chain Name",value:"today_sold_qty"},{text:"Today Sold Quantity",value:"today_sold_qty"},{text:"Today Sold Value",value:"today_sold_amount"},{text:"Month Till Date Sold Quantity",value:"monthly_sold_qty"},{text:"Month Till Date Sold Value",value:"monthly_sold_amount"},{text:"Tomorrow Sale Quantity",value:"tomorrow_sold_qty"},{text:"Tomorrow Sale Value",value:"tomorrow_sold_amount"}]}},computed:{monthsellammount(){const e=this.SAsumskulevel.reduce((t,n)=>{const a=parseFloat(n.monthly_sold_amount);return isNaN(a)?t:t+a},0);return isNaN(e)?0:e.toFixed(0)},monthsellquan(){const e=this.SAsumskulevel.reduce((t,n)=>{const a=parseFloat(n.monthly_sold_qty);return isNaN(a)?t:t+a},0);return isNaN(e)?0:e.toFixed(0)},todaysoldquanity(){const e=this.SAsumskulevel.reduce((t,n)=>{const a=parseFloat(n.today_sold_qty);return isNaN(a)?t:t+a},0);return isNaN(e)?0:e.toFixed(0)},todaysoldvalue(){const e=this.SAsumskulevel.reduce((t,n)=>{const a=parseFloat(n.today_sold_amount);return isNaN(a)?t:t+a},0);return isNaN(e)?0:e.toFixed(0)},tomorrowsellquanity(){const e=this.SAsumskulevel.reduce((t,n)=>{const a=parseFloat(n.tomorrow_sold_qty);return isNaN(a)?t:t+a},0);return isNaN(e)?0:e.toFixed(0)},tomorrowsellvalue(){const e=this.SAsumskulevel.reduce((t,n)=>{const a=parseFloat(n.tomorrow_sold_amount);return isNaN(a)?t:t+a},0);return isNaN(e)?0:e.toFixed(0)},filteredvisithealth(){const e=this.searchQuery.toLowerCase().trim();return this.SAsumskulevel.filter(t=>t.merchant_name&&t.merchant_name.toLowerCase().includes(e)||t.today_sold_qty&&t.today_sold_qty.toString().includes(e)||t.today_sold_amount&&t.today_sold_amount.toString().includes(e)||t.monthly_sold_qty&&t.monthly_sold_qty.toString().includes(e)||t.monthly_sold_amount&&t.monthly_sold_amount.toString().includes(e)||t.tomorrow_sold_qty&&t.tomorrow_sold_qty.toString().includes(e)||t.tomorrow_sold_amount&&t.tomorrow_sold_amount.toString().includes(e))}},mounted(){this.getBranchnames()},beforeUnmount(){this.interval&&clearInterval(this.interval)},methods:{getSAvisittarck(e){this.SAsumskulevel=[],this.loading=!0,this.getSalessummaryretail(e).then(t=>{console.log({response:t}),t.data.status==1?(this.snackbarText=t.data.message,this.color="primary",this.snackbar=!0,this.SAsumskulevel=t.data.data,this.loading=!1):(this.snackbarText=t.data.message,this.color="on-background",this.snackbar=!0,this.loading=!1)})},updatePagination(e){this.page=e},getBranchnames(){this.Locationdata().then(e=>{this.locationsdata=e.data.data.map(t=>({value:t.city_id,text:t.city})),console.log("ceck tye res",this.locationsdata)})}}},H={style:{"max-width":"400px"}},M={key:0,id:"app"},j=V('<div id="loading-bg"><div class="loading-logo"><img src="'+w+'" height="60" width="68" alt="Logo"></div><div class="loading"><div class="effect-1 effects"></div><div class="effect-2 effects"></div><div class="effect-3 effects"></div></div></div>',1),E=[j],P={key:0},Y=s("td",{colspan:"16",class:"text-center"},[s("h1",null,"No data found !")],-1),G=[Y],J={class:"text-center"},K={class:"text-center"},O={class:"text-center"},X={class:"text-center"},Z={class:"text-center"},$={class:"text-center"},tt={class:"text-center"},et=s("td",{class:"text-center",style:{"font-weight":"Bold"}}," Total ",-1),st={class:"text-center",style:{"font-weight":"Bold"}},ot={class:"text-center",style:{"font-weight":"Bold"}},at={class:"text-center",style:{"font-weight":"Bold"}},lt={class:"text-center",style:{"font-weight":"Bold"}},rt={class:"text-center",style:{"font-weight":"Bold"}},nt={class:"text-center",style:{"font-weight":"Bold"}};function it(e,t,n,a,l,d){return c(),_("div",null,[i(S,{class:"mb-4"},{default:m(()=>[i(p,null,{default:m(()=>[i(x,null,{default:m(()=>[i(b,{cols:"12",md:"6"},{default:m(()=>[i(D,{modelValue:l.cityID,"onUpdate:modelValue":[t[0]||(t[0]=o=>l.cityID=o),t[1]||(t[1]=o=>d.getSAvisittarck(l.cityID))],label:"City Names",items:l.locationsdata,"item-title":"text","item-value":"value",rules:e.locationrules,required:"","menu-props":{maxHeight:200}},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),s("div",H,[i(C,{modelValue:l.searchQuery,"onUpdate:modelValue":t[2]||(t[2]=o=>l.searchQuery=o),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),l.loading?(c(),_("div",M,E)):v("",!0),i(Q,{headers:l.headers,items:d.filteredvisithealth,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:m(()=>[s("thead",null,[s("tr",null,[(c(!0),_(y,null,f(l.headers,o=>(c(),_("th",{key:o,class:"text-center"},r(o.text),1))),128))])]),s("tbody",null,[d.filteredvisithealth.length===0?(c(),_("tr",P,G)):v("",!0),(c(!0),_(y,null,f(d.filteredvisithealth,(o,u)=>(c(),_("tr",{key:u},[s("td",J,r(o.merchant_name),1),s("td",K,r(o.today_sold_qty),1),h(),s("td",O," \u20B9"+r(isNaN(parseFloat(o.today_sold_amount))?"0.00":parseFloat(o.today_sold_amount).toFixed(2)),1),h(),s("td",X,r(o.monthly_sold_qty),1),h(),s("td",Z," \u20B9"+r(isNaN(parseFloat(o.monthly_sold_amount))?"0.00":parseFloat(o.monthly_sold_amount).toFixed(2)),1),h(),s("td",$,r(o.tomorrow_sold_qty),1),s("td",tt," \u20B9"+r(isNaN(parseFloat(o.tomorrow_sold_amount))?"0.00":parseFloat(o.tomorrow_sold_amount).toFixed(2)),1)]))),128))]),s("tfoot",null,[s("tr",null,[et,s("td",st,r(d.todaysoldquanity),1),s("td",ot," \u20B9 "+r(d.todaysoldvalue),1),s("td",at,r(d.monthsellquan),1),s("td",lt," \u20B9 "+r(d.monthsellammount),1),s("td",rt,r(d.tomorrowsellquanity),1),s("td",nt," \u20B9 "+r(d.tomorrowsellvalue),1)])])]),_:1},8,["headers","items"]),i(I,{modelValue:l.snackbar,"onUpdate:modelValue":t[3]||(t[3]=o=>l.snackbar=o),timeout:3500,color:l.color},{default:m(()=>[h(r(l.snackbarText),1)]),_:1},8,["modelValue","color"])])}const dt=g(R,[["render",it]]);const ut={components:{Salessummaryretail:dt},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Sales Summary : Retail CHAIN",icon:"ri:customer-service-2-line",tab:"account"}],currentDate:""}},computed:{tabsWithDate(){return this.currentDate=this.formatDate(new Date),this.tabs.map(e=>({...e,title:e.title}))}},mounted(){this.currentroute=N(),this.activeTab=k(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab},methods:{formatDate(e){const t=e.getDate(),n=e.toLocaleString("default",{month:"long"}),a=e.getFullYear();return`${this.getDayWithSuffix(t)} ${n} ${a}`},getDayWithSuffix(e){if(e>3&&e<21)return e+"th";switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}}},ct={class:"title-text"},mt={class:"date-text"};function _t(e,t,n,a,l,d){const o=q("Salessummaryretail");return c(),_("div",null,[i(W,{modelValue:l.activeTab,"onUpdate:modelValue":t[0]||(t[0]=u=>l.activeTab=u),"show-arrows":""},{default:m(()=>[(c(!0),_(y,null,f(d.tabsWithDate,u=>(c(),F(L,{key:u.icon,value:u.tab},{default:m(()=>[i(T,{size:"30",start:"",icon:u.icon},null,8,["icon"]),s("h2",null,[s("span",ct,r(u.title),1),h(" \xA0\xA0 "),s("span",mt,"["+r(l.currentDate)+"]",1)])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),i(A),i(z,{modelValue:l.activeTab,"onUpdate:modelValue":t[1]||(t[1]=u=>l.activeTab=u),class:"mt-5 disable-tab-transition",touch:!1},{default:m(()=>[i(U,{value:"account"},{default:m(()=>[i(o)]),_:1})]),_:1},8,["modelValue"])])}const Nt=g(ut,[["render",_t]]);export{Nt as default};
