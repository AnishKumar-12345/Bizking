import{_ as p,o as n,c as u,g as o,w as c,k as V,l as b,i as x,j as k,a as i,b8 as v,F as _,q as f,t as l,b as h,bp as y,bq as S,v as T,e as D,r as w,f as L,u as C,s as I}from"./index.08705643.js";import{s as A}from"./Services.f9e4372b.js";import{V as N}from"./VAutocomplete.457394fd.js";import{V as z}from"./VTextField.0584a3e6.js";import{V as Q}from"./VTable.eda8fa83.js";import{V as W}from"./VPagination.f3ba474e.js";import{V as U}from"./VSnackbar.89c018e7.js";import{V as B,a as F,b as q,c as P}from"./VWindowItem.2d182e11.js";import"./VSelect.00b3ff1f.js";import"./VCheckboxBtn.770726d6.js";import"./VCounter.d136124c.js";import"./VChip.cd0ade04.js";const R={mixins:[A],data(){return{searchQuery:"",searchQuery2:"",searchQuery3:"",searchQuery4:"",snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,loading:!1,visitTrack:[],visitagegapabove5:[],interval:null,cityID:"",page:1,pageSize:10,page2:1,pageSize2:10,dialog:!1,dialog2:!1,dialog3:!1,locationsdata:[],page3:1,pageSize3:10,page4:1,pageSize4:10,headers:[{text:"SA Name",value:"sa_name"},{text:"Route Name",value:"route_name"},{text:"Store Assigned",value:"stores_count"},{text:"Visited Stores",value:"visited_stores_count"},{text:"Status",value:"status"},{text:"Login Time",value:"login_time"},{text:"Logout Time",value:"logout_time"}]}},computed:{filteredvisithealth(){const e=this.searchQuery.toLowerCase().trim();return this.visitTrack.filter(t=>t.sa_name&&t.sa_name.toLowerCase().includes(e)||t.route_name&&t.route_name.toLowerCase().includes(e)||t.stores_count&&t.stores_count.toString().includes(e)||t.visited_stores_count&&t.visited_stores_count.toString().includes(e)||t.status&&t.status.toLowerCase().includes(e)||t.login_time&&t.login_time.toLowerCase().includes(e)||t.logout_time&&t.logout_time.toLowerCase().includes(e))},paginatedItems(){const e=(this.page-1)*this.pageSize,t=e+this.pageSize;return this.filteredvisithealth.slice(e,t)}},mounted(){this.getBranchnames()},beforeUnmount(){this.interval&&clearInterval(this.interval)},methods:{getSAvisittarck(e){this.visitTrack=[],this.loading=!0,this.getVisitTrack(e).then(t=>{console.log({response:t}),t.data.status==1?(this.snackbarText=t.data.message,this.color="primary",this.snackbar=!0,this.visitTrack=t.data.data,this.loading=!1):(this.snackbarText=t.data.message,this.color="on-background",this.snackbar=!0,this.loading=!1)})},updatePagination(e){this.page=e},getBranchnames(){this.Locationdata().then(e=>{this.locationsdata=e.data.data.map(t=>({value:t.city_id,text:t.city})),console.log("ceck tye res",this.locationsdata)})}}},j={style:{"max-width":"400px"}},E={key:0,id:"app"},H=y('<div id="loading-bg"><div class="loading-logo"><img src="'+S+'" height="60" width="68" alt="Logo"></div><div class="loading"><div class="effect-1 effects"></div><div class="effect-2 effects"></div><div class="effect-3 effects"></div></div></div>',1),M=[H],Y={key:0},G=i("td",{colspan:"16",class:"text-center"},[i("h1",null,"No data found !")],-1),J=[G],K={class:"text-center"},O={class:"text-center"},X={class:"text-center"},Z={class:"text-center"},$={class:"text-center"},tt={class:"text-center"},et={class:"text-center"};function at(e,t,m,g,a,d){return n(),u("div",null,[o(k,{class:"mb-4"},{default:c(()=>[o(V,null,{default:c(()=>[o(b,null,{default:c(()=>[o(x,{cols:"12",md:"6"},{default:c(()=>[o(N,{modelValue:a.cityID,"onUpdate:modelValue":[t[0]||(t[0]=s=>a.cityID=s),t[1]||(t[1]=s=>d.getSAvisittarck(a.cityID))],label:"City Names",items:a.locationsdata,"item-title":"text","item-value":"value",rules:e.locationrules,required:"","menu-props":{maxHeight:200}},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),i("div",j,[o(z,{modelValue:a.searchQuery,"onUpdate:modelValue":t[2]||(t[2]=s=>a.searchQuery=s),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),a.loading?(n(),u("div",E,M)):v("",!0),o(Q,{headers:a.headers,items:d.paginatedItems,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:c(()=>[i("thead",null,[i("tr",null,[(n(!0),u(_,null,f(a.headers,s=>(n(),u("th",{key:s,class:"text-center"},l(s.text),1))),128))])]),i("tbody",null,[d.filteredvisithealth.length===0?(n(),u("tr",Y,J)):v("",!0),(n(!0),u(_,null,f(d.paginatedItems,(s,r)=>(n(),u("tr",{key:r},[i("td",K,l(s.sa_name),1),i("td",O,l(s.route_name),1),h(),i("td",X,l(s.stores_count),1),h(),i("td",Z,l(s.visited_stores_count),1),h(),i("td",$,l(s.status),1),h(),i("td",tt,l(s.login_time),1),i("td",et,l(s.logout_time),1)]))),128))])]),_:1},8,["headers","items"]),o(W,{modelValue:a.page,"onUpdate:modelValue":t[3]||(t[3]=s=>a.page=s),length:Math.ceil(d.filteredvisithealth.length/a.pageSize),onInput:d.updatePagination},null,8,["modelValue","length","onInput"]),o(U,{modelValue:a.snackbar,"onUpdate:modelValue":t[4]||(t[4]=s=>a.snackbar=s),timeout:3500,color:a.color},{default:c(()=>[h(l(a.snackbarText),1)]),_:1},8,["modelValue","color"])])}const st=p(R,[["render",at]]);const it={components:{SADailytrack:st},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View SA Level Daily Visit Tracking ",icon:"mdi-alpha-b-circle-outline",tab:"account"}],currentDate:""}},computed:{tabsWithDate(){return this.currentDate=this.formatDate(new Date),this.tabs.map(e=>({...e,title:e.title}))}},mounted(){this.currentroute=T(),this.activeTab=D(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab},methods:{formatDate(e){const t=e.getDate(),m=e.toLocaleString("default",{month:"long"}),g=e.getFullYear();return`${this.getDayWithSuffix(t)} ${m} ${g}`},getDayWithSuffix(e){if(e>3&&e<21)return e+"th";switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}}},ot={class:"title-text"},lt={class:"date-text"};function rt(e,t,m,g,a,d){const s=w("SADailytrack");return n(),u("div",null,[o(F,{modelValue:a.activeTab,"onUpdate:modelValue":t[0]||(t[0]=r=>a.activeTab=r),"show-arrows":""},{default:c(()=>[(n(!0),u(_,null,f(d.tabsWithDate,r=>(n(),L(B,{key:r.icon,value:r.tab},{default:c(()=>[o(C,{size:"30",start:"",icon:r.icon},null,8,["icon"]),i("h2",null,[i("span",ot,l(r.title),1),h(" \xA0\xA0 "),i("span",lt,"["+l(a.currentDate)+"]",1)])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),o(I),o(P,{modelValue:a.activeTab,"onUpdate:modelValue":t[1]||(t[1]=r=>a.activeTab=r),class:"mt-5 disable-tab-transition",touch:!1},{default:c(()=>[o(q,{value:"account"},{default:c(()=>[o(s)]),_:1})]),_:1},8,["modelValue"])])}const bt=p(it,[["render",rt]]);export{bt as default};
