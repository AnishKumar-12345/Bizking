import{_ as v,o as n,c as u,g as o,w as c,k as V,l as b,i as x,j as k,a as i,b8 as _,F as h,q as g,t as r,b as m,bp as y,bq as T,v as S,e as w,s as C,r as I,f as L,u as D}from"./index.7e5301d2.js";import{s as N}from"./Services.e2ee330a.js";import{V as z}from"./VAutocomplete.8599a9d6.js";import{V as A}from"./VTextField.969f3f52.js";import{V as Q}from"./VTable.dc5363c0.js";import{V as U}from"./VPagination.c14eede1.js";import{V as B}from"./VSnackbar.3334e156.js";import{V as q,a as F,b as P,c as R}from"./VWindowItem.f305b40e.js";import"./VSelect.2e908d75.js";import"./VCheckboxBtn.96ebc215.js";import"./VCounter.f7f19471.js";import"./VChip.af398333.js";const W={mixins:[N],data(){return{searchQuery:"",searchQuery2:"",searchQuery3:"",searchQuery4:"",snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,loading:!1,visitTrack:[],visitagegapabove5:[],interval:null,cityID:"",page:1,pageSize:10,page2:1,pageSize2:10,dialog:!1,dialog2:!1,dialog3:!1,locationsdata:[],page3:1,pageSize3:10,page4:1,pageSize4:10,headers:[{text:"SA Name",value:"sa_name"},{text:"Route Name",value:"route_name"},{text:"Store Assigned",value:"stores_count"},{text:"Visited Stores",value:"visited_stores_count"},{text:"Status",value:"status"},{text:"Login Time",value:"login_time"},{text:"Logout Time",value:"logout_time"}]}},computed:{filteredvisithealth(){const s=this.searchQuery.toLowerCase().trim();return this.visitTrack.filter(e=>e.sa_name&&e.sa_name.toLowerCase().includes(s)||e.route_name&&e.route_name.toLowerCase().includes(s)||e.stores_count&&e.stores_count.toString().includes(s)||e.visited_stores_count&&e.visited_stores_count.toString().includes(s)||e.status&&e.status.toLowerCase().includes(s)||e.login_time&&e.login_time.toLowerCase().includes(s)||e.logout_time&&e.logout_time.toLowerCase().includes(s))},paginatedItems(){const s=(this.page-1)*this.pageSize,e=s+this.pageSize;return this.filteredvisithealth.slice(s,e)}},mounted(){this.getBranchnames()},beforeUnmount(){this.interval&&clearInterval(this.interval)},methods:{getSAvisittarck(s){this.visitTrack=[],this.loading=!0,this.getVisitTrack(s).then(e=>{console.log({response:e}),e.data.status==1?(this.snackbarText=e.data.message,this.color="primary",this.snackbar=!0,this.visitTrack=e.data.data,this.loading=!1):(this.snackbarText=e.data.message,this.color="on-background",this.snackbar=!0,this.loading=!1)})},updatePagination(s){this.page=s},getBranchnames(){this.Locationdata().then(s=>{this.locationsdata=s.data.data.map(e=>({value:e.city_id,text:e.city})),console.log("ceck tye res",this.locationsdata)})}}},j={style:{"max-width":"400px"}},E={key:0,id:"app"},H=y('<div id="loading-bg"><div class="loading-logo"><img src="'+T+'" height="60" width="68" alt="Logo"></div><div class="loading"><div class="effect-1 effects"></div><div class="effect-2 effects"></div><div class="effect-3 effects"></div></div></div>',1),M=[H],G={key:0},J=i("td",{colspan:"16",class:"text-center"},[i("h1",null,"No data found !")],-1),K=[J],O={class:"text-center"},X={class:"text-center"},Y={class:"text-center"},Z={class:"text-center"},$={class:"text-center"},ee={class:"text-center"},te={class:"text-center"};function ae(s,e,f,p,t,d){return n(),u("div",null,[o(k,{class:"mb-4"},{default:c(()=>[o(V,null,{default:c(()=>[o(b,null,{default:c(()=>[o(x,{cols:"12",md:"6"},{default:c(()=>[o(z,{modelValue:t.cityID,"onUpdate:modelValue":[e[0]||(e[0]=a=>t.cityID=a),e[1]||(e[1]=a=>d.getSAvisittarck(t.cityID))],label:"City Names",items:t.locationsdata,"item-title":"text","item-value":"value",rules:s.locationrules,required:"","menu-props":{maxHeight:200}},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),i("div",j,[o(A,{modelValue:t.searchQuery,"onUpdate:modelValue":e[2]||(e[2]=a=>t.searchQuery=a),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),t.loading?(n(),u("div",E,M)):_("",!0),o(Q,{headers:t.headers,items:d.paginatedItems,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:c(()=>[i("thead",null,[i("tr",null,[(n(!0),u(h,null,g(t.headers,a=>(n(),u("th",{key:a,class:"text-center"},r(a.text),1))),128))])]),i("tbody",null,[d.filteredvisithealth.length===0?(n(),u("tr",G,K)):_("",!0),(n(!0),u(h,null,g(d.paginatedItems,(a,l)=>(n(),u("tr",{key:l},[i("td",O,r(a.sa_name),1),i("td",X,r(a.route_name),1),m(),i("td",Y,r(a.stores_count),1),m(),i("td",Z,r(a.visited_stores_count),1),m(),i("td",$,r(a.status),1),m(),i("td",ee,r(a.login_time),1),i("td",te,r(a.logout_time),1)]))),128))])]),_:1},8,["headers","items"]),o(U,{modelValue:t.page,"onUpdate:modelValue":e[3]||(e[3]=a=>t.page=a),length:Math.ceil(d.filteredvisithealth.length/t.pageSize),onInput:d.updatePagination},null,8,["modelValue","length","onInput"]),o(B,{modelValue:t.snackbar,"onUpdate:modelValue":e[4]||(e[4]=a=>t.snackbar=a),timeout:3500,color:t.color},{default:c(()=>[m(r(t.snackbarText),1)]),_:1},8,["modelValue","color"])])}const se=v(W,[["render",ae]]),oe={components:{SADailytrack:se},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Visit Track",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=S(),this.activeTab=w(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function ie(s,e,f,p,t,d){const a=I("SADailytrack");return n(),u("div",null,[o(q,{modelValue:t.activeTab,"onUpdate:modelValue":e[0]||(e[0]=l=>t.activeTab=l),"show-arrows":""},{default:c(()=>[(n(!0),u(h,null,g(t.tabs,l=>(n(),L(R,{key:l.icon,value:l.tab},{default:c(()=>[o(D,{size:"20",start:"",icon:l.icon},null,8,["icon"]),m(" "+r(l.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),o(C),o(P,{modelValue:t.activeTab,"onUpdate:modelValue":e[1]||(e[1]=l=>t.activeTab=l),class:"mt-5 disable-tab-transition",touch:!1},{default:c(()=>[o(F,{value:"account"},{default:c(()=>[o(a)]),_:1})]),_:1},8,["modelValue"])])}const pe=v(oe,[["render",ie]]);export{pe as default};
