import{_ as y,o as r,c as u,g as a,b6 as h,b5 as w,f as _,w as l,i as x,j as S,k as C,b as f,l as T,a as n,F as g,q as v,t as c,m as b,u as V,bA as O,bk as A,v as z,e as I,s as N,r as L}from"./index.dc6d2f7d.js";import{s as D}from"./Services.987bac00.js";import{V as P}from"./VTextField.793ac199.js";import{V as F,a as B}from"./VAlert.fef88ac4.js";import{V as H}from"./VChip.1bcea135.js";import{V as Q}from"./VTable.8a65c88e.js";import{V as U}from"./VPagination.1167edb3.js";import{V as q,a as R,b as W,c as j}from"./VWindowItem.f3ad2692.js";import"./index.2bd8ddc8.js";const E={mixins:[D],data(){return{page:1,pageSize:10,loading2:!1,loaded:!1,loading:!0,saleshistory:[],searchQuery:"",headers:[{text:"Sales Order",value:"so_number"},{text:"Order Date",value:"created_date"},{text:"Status",value:"so_status"},{text:"Order From",value:"merchant_name"},{text:"Shipped To",value:"merchant_name"},{text:"Order Value",value:"total_so_amount"},{text:"Action",value:"actions",sortable:!1}]}},computed:{filteredSalesHistory(){const t=this.searchQuery.toLowerCase().trim();return this.saleshistory.filter(e=>{const m=e.so_number&&e.so_number.toLowerCase().includes(t)||e.created_date&&e.created_date.toLowerCase().includes(t)||e.so_status&&e.so_status.toLowerCase().includes(t)||e.merchant_name&&e.merchant_name.toLowerCase().includes(t)||e.total_so_amount&&e.total_so_amount.toString().includes(t),p=e.so_status==="Acknowledged"||e.so_status==="On Hold";return m&&p})},paginatedItems(){const t=(this.page-1)*this.pageSize,e=t+this.pageSize;return this.filteredSalesHistory.slice(t,e)},showNoSalesAlert(){return!this.saleshistory.some(t=>t.so_status==="Acknowledged"||t.so_status==="On Hold")}},mounted(){this.getSalesorderdetails(),setTimeout(()=>{this.loading=!1},4500)},methods:{updatePagination(t){this.page=t},getPDFupdate(t){this.loading2=!0,window.open(t,"_blank"),this.loading2=!1},outputstock(t){this.$router.push({name:"Createwarehouseoutput",query:{so_id:t.so_id}})},resolveStatusVariant(t){return t=="Acknowledged"?{color:"warning"}:{color:"error"}},getSalesorderdetails(){this.getSalesorders().then(t=>{this.saleshistory=t.data,this.saleshistory.reverse(),console.log("check rhe res",this.saleshistory)})}}},M={key:0,style:{"max-width":"400px"}},Y={key:1,class:"loading-container"},G=n("p",{class:"mb-0"},' The system is trying to retrieving the Orders. Please ensure that you have "Acknowledged" and "Onhold" Output Stock Orders !',-1),J={key:3,id:"app"},K=O('<div id="loading-bg"><div class="loading-logo"><img src="'+A+'" height="60" width="68" alt="Logo"></div><div class="loading"><div class="effect-1 effects"></div><div class="effect-2 effects"></div><div class="effect-3 effects"></div></div></div>',1),X=[K],Z={class:"text-center"},$={class:"text-center"},ee={class:"text-center"},te={class:"text-center"},se={class:"text-center"},ae={class:"text-center"},oe={class:"text-center"};function re(t,e,m,p,o,i){return r(),u("div",null,[i.showNoSalesAlert?h("",!0):(r(),u("div",M,[a(P,{class:"mb-3",modelValue:o.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=s=>o.searchQuery=s),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])])),o.loading2?(r(),u("div",Y,[a(w,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):h("",!0),i.showNoSalesAlert?(r(),_(T,{key:2},{default:l(()=>[a(x,{cols:"12"},{default:l(()=>[a(S,{title:"Sales Order View"},{default:l(()=>[a(C,null,{default:l(()=>[a(F,{color:"warning",variant:"tonal",class:"mb-4",border:"top"},{default:l(()=>[a(B,{class:"mb-1"},{default:l(()=>[f(" Are you sure you have Output Stocks? ")]),_:1}),G]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):h("",!0),o.loading?(r(),u("div",J,X)):h("",!0),i.showNoSalesAlert?h("",!0):(r(),_(Q,{key:4,headers:o.headers,items:i.paginatedItems,class:"table-rounded",height:"500","fixed-header":""},{default:l(()=>[n("thead",null,[n("tr",null,[(r(!0),u(g,null,v(o.headers,s=>(r(),u("th",{class:"text-center",key:s},c(s.text),1))),128))])]),n("tbody",null,[(r(!0),u(g,null,v(this.paginatedItems,(s,d)=>(r(),u("tr",{key:d},[n("td",Z,c(s.so_number),1),n("td",$,c(s.created_date),1),n("td",ee,[a(H,{color:i.resolveStatusVariant(s.so_status).color,class:"font-weight-medium",size:"small"},{default:l(()=>[f(c(s.so_status),1)]),_:2},1032,["color"])]),n("td",te,c(s.merchant_name),1),n("td",se,c(s.merchant_name),1),n("td",ae,c(s.total_so_amount),1),n("td",oe,[s.so_status!="Shipped"&&s.so_status!="Delivered"?(r(),_(b,{key:0,icon:"",variant:"text",color:"success",class:"me-2",size:"small"},{default:l(()=>[a(V,{icon:"mdi-invoice-receive-outline",color:"success",size:"30",onClick:k=>i.outputstock(s)},null,8,["onClick"])]),_:2},1024)):h("",!0),s.so_status=="Shipped"||s.so_status=="Delivered"?(r(),_(b,{key:1,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:k=>i.getPDFupdate(s.delivery_challan_file)},{default:l(()=>[a(V,{color:"error",icon:"iwwa:file-pdf",size:"26"})]),_:2},1032,["onClick"])):h("",!0)])]))),128))])]),_:1},8,["headers","items"])),a(U,{modelValue:o.page,"onUpdate:modelValue":e[1]||(e[1]=s=>o.page=s),length:Math.ceil(i.filteredSalesHistory.length/o.pageSize),onInput:i.updatePagination},null,8,["modelValue","length","onInput"])])}const le=y(E,[["render",re]]),ne={components:{Outputstockupdate:le},data(){return{currentroute:"",activeTab:"",tabs:[{title:"Add Your Sales",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=z(),this.activeTab=I(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function ie(t,e,m,p,o,i){const s=L("Outputstockupdate");return r(),u("div",null,[a(q,{modelValue:o.activeTab,"onUpdate:modelValue":e[0]||(e[0]=d=>o.activeTab=d),"show-arrows":""},{default:l(()=>[(r(!0),u(g,null,v(o.tabs,d=>(r(),_(j,{key:d.icon,value:d.tab},{default:l(()=>[a(V,{size:"20",start:"",icon:d.icon},null,8,["icon"]),f(" "+c(d.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),a(N),a(W,{modelValue:o.activeTab,"onUpdate:modelValue":e[1]||(e[1]=d=>o.activeTab=d),class:"mt-5 disable-tab-transition",touch:!1},{default:l(()=>[a(R,{value:"account"},{default:l(()=>[a(s)]),_:1})]),_:1},8,["modelValue"])])}const ve=y(ne,[["render",ie]]);export{ve as default};
