import{_ as x,o as n,c,a as r,g as s,w as d,F as T,q as v,t as l,b as m,f as p,m as f,u as y,bg as b,j as k,k as S,l as R,i as V,s as w,v as P,e as C,r as D}from"./index.932c584e.js";import{s as U}from"./Services.ed5d9645.js";import{V as g}from"./VTextField.08a83681.js";import{V as F}from"./VChip.670d4bda.js";import{V as q}from"./VTable.ac4f1758.js";import{V as B}from"./VPagination.33a460d5.js";import{V as I}from"./VForm.a45b52ba.js";import{V as z}from"./VSelect.562421d6.js";import{V as N}from"./VDialog.63c3f013.js";import{V as Q}from"./VSnackbar.8ee9aa12.js";import{V as W,a as L,b as M,c as O}from"./VWindowItem.beef0345.js";import"./index.2bd8ddc8.js";import"./VCheckboxBtn.769d3b14.js";const A={mixins:[U],data(){return{dateRules:[t=>!!t||"Date is required"],snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,searchQuery:"",PostRTV:{rtv_id:"",goods_status:"",quantity:"",warehouse_updated_date:"",send_to_brand_date:""},page:1,pageSize:10,today:this.getFormattedDate(new Date),dialog:!1,RTVdata:[],headers:[{text:"Brand Name",value:"brand_name"},{text:"SKU.",value:"sku_name"},{text:"UOM",value:"uom"},{text:"Goods Status",value:"goods_status"},{text:"RTV Reason",value:"rtv_reason"},{text:"Collected Date",value:"collected_date"},{text:"Quantity",value:"quantity"},{text:"Warehouse UpdateDate",value:"warehouse_updated_date"},{text:"Send to BrandDate",value:"send_to_brand_date"},{text:"Action",value:"actions"}]}},computed:{filteredRTV(){const t=this.searchQuery.toLowerCase().trim();return this.RTVdata.filter(e=>e.brand_name&&e.brand_name.toLowerCase().includes(t)||e.sku_name&&e.sku_name.toLowerCase().includes(t)||e.uom&&e.uom.toLowerCase().includes(t)||e.goods_status&&e.goods_status.toLowerCase().includes(t)||e.rtv_reason&&e.rtv_reason.toString().includes(t)||e.collected_date&&e.collected_date.toString().includes(t)||e.quantity&&e.quantity.toString().includes(t)||e.warehouse_updated_date&&e.warehouse_updated_date.toString().includes(t)||e.send_to_brand_date&&e.send_to_brand_date.toString().includes(t))},paginatedItems(){const t=(this.page-1)*this.pageSize,e=t+this.pageSize;return this.filteredRTV.slice(t,e)}},mounted(){this.getRTVdatas()},methods:{updatePagination(t){this.page=t},validateForm(){this.$refs.purchaseOrderForm.validate().then(t=>{console.log("form valid",t.valid),t.valid==!0?this.saveeditRTVproducts():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},saveeditRTVproducts(){const t={goods_status:this.PostRTV.goods_status,quantity:this.PostRTV.quantity,warehouse_updated_date:this.PostRTV.warehouse_updated_date,send_to_brand_date:this.PostRTV.send_to_brand_date,rtv_id:this.PostRTV.rtv_id};console.log("RTV",t),this.editrtvproducts(t).then(e=>{console.log(e),e.data.status==1?(this.snackbar=!0,this.color="primary",this.PostRTV={},this.snackbarText=e.data.message,this.dialog=!1,this.getRTVdatas()):(this.snackbar=!0,this.color="on-background",this.snackbarText=e.data.message)})},getFormattedDate(t){const e=t.getFullYear(),_=String(t.getMonth()+1).padStart(2,"0"),h=String(t.getDate()).padStart(2,"0");return`${e}-${_}-${h}`},closedialog(){this.dialog=!1},editrow(t){this.dialog=!0,this.PostRTV={rtv_id:t.rtv_id,goods_status:t.goods_status,quantity:t.quantity,warehouse_updated_date:t.warehouse_updated_date!="N/A"?this.convertDateFormat(t.warehouse_updated_date):"",send_to_brand_date:t.send_to_brand_date!="N/A"?this.convertDateFormat(t.send_to_brand_date):""}},convertDateFormat(t){const e=new Date(t),_=e.getFullYear(),h=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${_}-${h}-${o}`},colorgoodsstatus(t){return t=="Collected"?{color:"warning"}:t=="Reached Warehouse"||t=="Send To Brand"?{color:"success"}:{color:"error"}},getRTVdatas(){this.getrtvproducts().then(t=>{this.RTVdata=t.data.data,this.RTVdata.reverse()})}}},G={style:{"max-width":"400px"}},Y={class:"text-center"},j={class:"text-center"},E={class:"text-center"},K={class:"text-center"},H={class:"text-center"},J={class:"text-center"},X={class:"text-center"},Z={class:"text-center"},$={class:"text-center"},ee={class:"text-center"};function te(t,e,_,h,o,i){return n(),c("div",null,[r("div",G,[s(g,{class:"mb-3",modelValue:o.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=a=>o.searchQuery=a),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),s(q,{headers:o.headers,items:this.paginatedItems,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:d(()=>[r("thead",null,[r("tr",null,[(n(!0),c(T,null,v(o.headers,a=>(n(),c("th",{class:"text-center",key:a},l(a.text),1))),128))])]),r("tbody",null,[(n(!0),c(T,null,v(this.paginatedItems,(a,u)=>(n(),c("tr",{key:u},[r("td",Y,l(a.brand_name),1),r("td",j,l(a.sku_name),1),r("td",E,l(a.uom),1),r("td",K,[s(F,{color:i.colorgoodsstatus(a.goods_status).color,class:"font-weight-medium",size:"small"},{default:d(()=>[m(l(a.goods_status),1)]),_:2},1032,["color"])]),r("td",H,l(a.rtv_reason),1),r("td",J,l(a.collected_date),1),r("td",X,l(a.quantity),1),r("td",Z,l(a.warehouse_updated_date),1),r("td",$,l(a.send_to_brand_date),1),r("td",ee,[a.goods_status!="Send To Brand"?(n(),p(f,{key:0,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:de=>i.editrow(a)},{default:d(()=>[s(y,{color:"warning",icon:"ri-pencil-line",size:"22"})]),_:2},1032,["onClick"])):b("",!0)])]))),128))])]),_:1},8,["headers","items"]),s(B,{modelValue:o.page,"onUpdate:modelValue":e[1]||(e[1]=a=>o.page=a),length:Math.ceil(i.filteredRTV.length/o.pageSize),onInput:i.updatePagination},null,8,["modelValue","length","onInput"]),s(N,{modelValue:o.dialog,"onUpdate:modelValue":e[8]||(e[8]=a=>o.dialog=a),"max-width":"1000"},{default:d(()=>[s(k,{title:"Purchase Order",class:"mb-2"},{default:d(()=>[s(S,null,{default:d(()=>[s(R,null,{default:d(()=>[s(V,{cols:"12"},{default:d(()=>[s(I,{class:"mt-6",ref:"purchaseOrderForm"},{default:d(()=>[s(R,null,{default:d(()=>[s(V,{md:"6",cols:"12"},{default:d(()=>[s(z,{label:"Select Good Status",modelValue:this.PostRTV.goods_status,"onUpdate:modelValue":e[2]||(e[2]=a=>this.PostRTV.goods_status=a),items:["Reached Warehouse","Send To Brand"]},null,8,["modelValue"])]),_:1}),s(V,{md:"6",cols:"12"},{default:d(()=>[s(g,{label:"Quantity",modelValue:this.PostRTV.quantity,"onUpdate:modelValue":e[3]||(e[3]=a=>this.PostRTV.quantity=a)},null,8,["modelValue"])]),_:1}),s(V,{md:"6",cols:"12"},{default:d(()=>[this.PostRTV.goods_status=="Send To Brand"?(n(),p(g,{key:0,modelValue:this.PostRTV.send_to_brand_date,"onUpdate:modelValue":e[4]||(e[4]=a=>this.PostRTV.send_to_brand_date=a),type:"date",label:"Send To Brand Date",min:o.today,rules:o.dateRules},null,8,["modelValue","min","rules"])):b("",!0),this.PostRTV.goods_status=="Reached Warehouse"?(n(),p(g,{key:1,modelValue:this.PostRTV.warehouse_updated_date,"onUpdate:modelValue":e[5]||(e[5]=a=>this.PostRTV.warehouse_updated_date=a),type:"date",label:"Warehouse Update Date",min:o.today,rules:o.dateRules},null,8,["modelValue","min","rules"])):b("",!0)]),_:1}),s(w),s(V,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:d(()=>[s(f,{onClick:e[6]||(e[6]=a=>i.validateForm()),disabled:this.PostRTV.goods_status=="Collected"},{default:d(()=>[m("Save")]),_:1},8,["disabled"]),s(f,{color:"secondary",variant:"tonal",onClick:e[7]||(e[7]=a=>i.closedialog())},{default:d(()=>[m(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Q,{modelValue:o.snackbar,"onUpdate:modelValue":e[9]||(e[9]=a=>o.snackbar=a),timeout:3500,color:o.color},{default:d(()=>[m(l(o.snackbarText),1)]),_:1},8,["modelValue","color"])])}const ae=x(A,[["render",te]]),se={components:{UpdateRTV:ae},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Return Goods",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=P(),this.activeTab=C(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function oe(t,e,_,h,o,i){const a=D("UpdateRTV");return n(),c("div",null,[s(W,{modelValue:o.activeTab,"onUpdate:modelValue":e[0]||(e[0]=u=>o.activeTab=u),"show-arrows":""},{default:d(()=>[(n(!0),c(T,null,v(o.tabs,u=>(n(),p(O,{key:u.icon,value:u.tab},{default:d(()=>[s(y,{size:"20",start:"",icon:u.icon},null,8,["icon"]),m(" "+l(u.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(w),s(M,{modelValue:o.activeTab,"onUpdate:modelValue":e[1]||(e[1]=u=>o.activeTab=u),class:"mt-5 disable-tab-transition",touch:!1},{default:d(()=>[s(L,{value:"account"},{default:d(()=>[s(a)]),_:1})]),_:1},8,["modelValue"])])}const be=x(se,[["render",oe]]);export{be as default};
