import{_ as U,o as i,c,a as n,g as a,w as s,F as R,q as v,t as u,b as m,f as T,m as p,u as y,b6 as f,j as w,k,l as b,i as d,s as x,v as D,e as q,r as F}from"./index.986c8b57.js";import{s as B}from"./Services.7881b1f6.js";import{V as r}from"./VTextField.78fcf9d0.js";import{V as N}from"./VChip.10586e46.js";import{V as z}from"./VTable.4ed8be04.js";import{V as I}from"./VPagination.51a41da9.js";import{V as S}from"./VForm.45c60dc8.js";import{V as W}from"./VSelect.1c2f57cf.js";import{V as P}from"./VDialog.11623bc4.js";import{V as Q}from"./VSnackbar.34661357.js";import{V as L,a as M,b as O,c as G}from"./VWindowItem.11d828b3.js";import"./index.2bd8ddc8.js";import"./VCheckboxBtn.11a37a8c.js";const A={mixins:[B],data(){return{dateRules:[o=>!!o||"Date is required"],maxPaginationPages:5,snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,searchQuery:"",PostRTV:{rtv_id:"",goods_status:"",quantity:"",warehouse_updated_date:"",send_to_brand_date:"",rtv_reason:"",merchant_product_id:""},getRTV:{so_number:"",brand_name:"",sku_name:"",uom:"",goods_status:"",delivery_person:"",rtv_reason:"",collected_date:"",quantity:"",warehouse_updated_date:"",send_to_brand_date:""},dialog2:!1,page:1,pageSize:10,today:this.getFormattedDate(new Date),dialog:!1,RTVdata:[],headers:[{text:"SoNo",value:"so_number"},{text:"Brand Name",value:"brand_name"},{text:"SKU.",value:"sku_name"},{text:"UOM",value:"uom"},{text:"Goods Status",value:"goods_status"},{text:"Delivery Person",value:"delivery_person"},{text:"RTV Reason",value:"rtv_reason"},{text:"Collected Date",value:"collected_date"},{text:"Quantity",value:"quantity"},{text:"Warehouse UpdateDate",value:"warehouse_updated_date"},{text:"Send to BrandDate",value:"send_to_brand_date"},{text:"Action",value:"actions"}]}},computed:{filteredRTV(){const o=this.searchQuery.toLowerCase().trim();return this.RTVdata.filter(e=>e.brand_name&&e.brand_name.toLowerCase().includes(o)||e.sku_name&&e.sku_name.toLowerCase().includes(o)||e.uom&&e.uom.toLowerCase().includes(o)||e.goods_status&&e.goods_status.toLowerCase().includes(o)||e.rtv_reason&&e.rtv_reason.toString().includes(o)||e.collected_date&&e.collected_date.toString().includes(o)||e.quantity&&e.quantity.toString().includes(o)||e.warehouse_updated_date&&e.warehouse_updated_date.toString().includes(o)||e.send_to_brand_date&&e.send_to_brand_date.toString().includes(o))},paginatedItems(){const o=(this.page-1)*this.pageSize,e=o+this.pageSize;return this.filteredRTV.slice(o,e)}},mounted(){this.getRTVdatas()},methods:{viewrow(o){console.log("chec",o),this.dialog2=!0,this.getRTV.so_number=o.so_number,this.getRTV.brand_name=o.brand_name,this.getRTV.sku_name=o.sku_name,this.getRTV.uom=o.uom,this.getRTV.goods_status=o.goods_status,this.getRTV.delivery_person=o.delivery_person,this.getRTV.rtv_reason=o.rtv_reason,this.getRTV.collected_date=o.collected_date,this.getRTV.quantity=o.quantity,this.getRTV.warehouse_updated_date=o.warehouse_updated_date,this.getRTV.send_to_brand_date=o.send_to_brand_date},closedialog2(){this.dialog2=!1},updatePagination(o){this.page=o},validateForm(){this.$refs.purchaseOrderForm.validate().then(o=>{o.valid==!0?this.saveeditRTVproducts():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},saveeditRTVproducts(){const o={goods_status:this.PostRTV.goods_status,quantity:this.PostRTV.quantity,warehouse_updated_date:this.PostRTV.warehouse_updated_date,send_to_brand_date:this.PostRTV.send_to_brand_date,rtv_id:this.PostRTV.rtv_id,rtv_reason:this.PostRTV.rtv_reason,merchant_product_id:this.PostRTV.merchant_product_id};console.log("RTV",o),this.editrtvproducts(o).then(e=>{e.data.status==1?(this.snackbar=!0,this.color="primary",this.PostRTV={},this.snackbarText=e.data.message,this.dialog=!1,this.getRTVdatas()):(this.snackbar=!0,this.color="on-background",this.snackbarText=e.data.message)})},getFormattedDate(o){const e=o.getFullYear(),g=String(o.getMonth()+1).padStart(2,"0"),h=String(o.getDate()).padStart(2,"0");return`${e}-${g}-${h}`},closedialog(){this.dialog=!1},editrow(o){console.log("check",o),this.dialog=!0,this.PostRTV={merchant_product_id:o.merchant_product_id,rtv_id:o.rtv_id,goods_status:o.goods_status,quantity:o.quantity,rtv_reason:o.rtv_reason,warehouse_updated_date:o.warehouse_updated_date!="N/A"?this.convertDateFormat(o.warehouse_updated_date):"",send_to_brand_date:o.send_to_brand_date!="N/A"?this.convertDateFormat(o.send_to_brand_date):""}},convertDateFormat(o){const e=new Date(o),g=e.getFullYear(),h=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return`${g}-${h}-${l}`},colorgoodsstatus(o){return o=="Collected"?{color:"warning"}:o=="Reached Warehouse"||o=="Send To Brand"?{color:"success"}:{color:"error"}},getRTVdatas(){this.getrtvproducts().then(o=>{this.RTVdata=o.data.data,this.RTVdata.reverse()})}}},K={style:{"max-width":"400px"}},Y={class:"text-center"},j={class:"text-center"},E={class:"text-center"},H={class:"text-center"},J={class:"text-center"},X={class:"text-center"},Z={class:"text-center"},$={class:"text-center"},ee={class:"text-center"},te={class:"text-center"},ae={class:"text-center"},oe={class:"text-center"};function se(o,e,g,h,l,V){return i(),c("div",null,[n("div",K,[a(r,{class:"mb-3",modelValue:l.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=t=>l.searchQuery=t),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),a(z,{headers:l.headers,items:this.paginatedItems,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:s(()=>[n("thead",null,[n("tr",null,[(i(!0),c(R,null,v(l.headers,t=>(i(),c("th",{class:"text-center",key:t},u(t.text),1))),128))])]),n("tbody",null,[(i(!0),c(R,null,v(this.paginatedItems,(t,_)=>(i(),c("tr",{key:_},[n("td",Y,u(t.so_number),1),n("td",j,u(t.brand_name),1),n("td",E,u(t.sku_name),1),n("td",H,u(t.uom),1),n("td",J,[a(N,{color:V.colorgoodsstatus(t.goods_status).color,class:"font-weight-medium",size:"small"},{default:s(()=>[m(u(t.goods_status),1)]),_:2},1032,["color"])]),n("td",X,u(t.delivery_person),1),n("td",Z,u(t.rtv_reason),1),n("td",$,u(t.collected_date),1),n("td",ee,u(t.quantity),1),n("td",te,u(t.warehouse_updated_date),1),n("td",ae,u(t.send_to_brand_date),1),n("td",oe,[t.goods_status!=="Send To Brand"?(i(),T(p,{key:0,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:C=>V.editrow(t)},{default:s(()=>[a(y,{color:"warning",icon:"ri-pencil-line",size:"22"})]),_:2},1032,["onClick"])):f("",!0),t.rtv_reason=="Not Moving"&&t.goods_status=="Reached Warehouse"||t.goods_status=="Send To Brand"?(i(),T(p,{key:1,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:C=>V.viewrow(t)},{default:s(()=>[a(y,{color:"warning",icon:"basil:eye-outline",size:"22"})]),_:2},1032,["onClick"])):f("",!0)])]))),128))])]),_:1},8,["headers","items"]),a(I,{modelValue:l.page,"onUpdate:modelValue":e[1]||(e[1]=t=>l.page=t),length:Math.ceil(V.filteredRTV.length/l.pageSize),onInput:V.updatePagination,max:l.maxPaginationPages},null,8,["modelValue","length","onInput","max"]),a(P,{modelValue:l.dialog,"onUpdate:modelValue":e[8]||(e[8]=t=>l.dialog=t),"max-width":"1000"},{default:s(()=>[a(w,{title:"Purchase Order",class:"mb-2"},{default:s(()=>[a(k,null,{default:s(()=>[a(b,null,{default:s(()=>[a(d,{cols:"12"},{default:s(()=>[a(S,{class:"mt-6",ref:"purchaseOrderForm"},{default:s(()=>[a(b,null,{default:s(()=>[a(d,{md:"6",cols:"12"},{default:s(()=>[a(W,{label:"Select Good Status",modelValue:this.PostRTV.goods_status,"onUpdate:modelValue":e[2]||(e[2]=t=>this.PostRTV.goods_status=t),items:["Reached Warehouse","Send To Brand"]},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{label:"Quantity",modelValue:this.PostRTV.quantity,"onUpdate:modelValue":e[3]||(e[3]=t=>this.PostRTV.quantity=t)},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[this.PostRTV.goods_status=="Send To Brand"?(i(),T(r,{key:0,modelValue:this.PostRTV.send_to_brand_date,"onUpdate:modelValue":e[4]||(e[4]=t=>this.PostRTV.send_to_brand_date=t),type:"date",label:"Send To Brand Date",min:l.today,rules:l.dateRules},null,8,["modelValue","min","rules"])):f("",!0),this.PostRTV.goods_status=="Reached Warehouse"?(i(),T(r,{key:1,modelValue:this.PostRTV.warehouse_updated_date,"onUpdate:modelValue":e[5]||(e[5]=t=>this.PostRTV.warehouse_updated_date=t),type:"date",label:"Warehouse Update Date",min:l.today,rules:l.dateRules},null,8,["modelValue","min","rules"])):f("",!0)]),_:1}),a(x),a(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:s(()=>[a(p,{onClick:e[6]||(e[6]=t=>V.validateForm()),disabled:this.PostRTV.goods_status=="Collected"},{default:s(()=>[m("Save")]),_:1},8,["disabled"]),a(p,{color:"secondary",variant:"tonal",onClick:e[7]||(e[7]=t=>V.closedialog())},{default:s(()=>[m(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(P,{modelValue:l.dialog2,"onUpdate:modelValue":e[21]||(e[21]=t=>l.dialog2=t),"max-width":"1000"},{default:s(()=>[a(w,{title:"View RTV Details",class:"mb-2"},{default:s(()=>[a(k,null,{default:s(()=>[a(b,null,{default:s(()=>[a(d,{cols:"12"},{default:s(()=>[a(S,{class:"mt-6",ref:"purchaseOrderForm"},{default:s(()=>[a(b,null,{default:s(()=>[a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{label:"So No",modelValue:this.getRTV.so_number,"onUpdate:modelValue":e[9]||(e[9]=t=>this.getRTV.so_number=t),readonly:""},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{label:"BrandName",modelValue:this.getRTV.brand_name,"onUpdate:modelValue":e[10]||(e[10]=t=>this.getRTV.brand_name=t),readonly:""},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{modelValue:this.getRTV.sku_name,"onUpdate:modelValue":e[11]||(e[11]=t=>this.getRTV.sku_name=t),readonly:"",label:"SKU Name"},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{modelValue:this.getRTV.uom,"onUpdate:modelValue":e[12]||(e[12]=t=>this.getRTV.uom=t),readonly:"",label:"UOM"},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{modelValue:this.getRTV.goods_status,"onUpdate:modelValue":e[13]||(e[13]=t=>this.getRTV.goods_status=t),label:"Goods Status",readonly:""},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{modelValue:this.getRTV.delivery_person,"onUpdate:modelValue":e[14]||(e[14]=t=>this.getRTV.delivery_person=t),label:"Delivery Person",readonly:""},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{modelValue:this.getRTV.rtv_reason,"onUpdate:modelValue":e[15]||(e[15]=t=>this.getRTV.rtv_reason=t),readonly:"",label:"RTV Reason"},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{modelValue:this.getRTV.collected_date,"onUpdate:modelValue":e[16]||(e[16]=t=>this.getRTV.collected_date=t),readonly:"",label:"Collected Date"},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{modelValue:this.getRTV.quantity,"onUpdate:modelValue":e[17]||(e[17]=t=>this.getRTV.quantity=t),readonly:"",label:"Quantity"},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{modelValue:this.getRTV.warehouse_updated_date,"onUpdate:modelValue":e[18]||(e[18]=t=>this.getRTV.warehouse_updated_date=t),readonly:"",label:"WareHouse Updated Date"},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:s(()=>[a(r,{modelValue:this.getRTV.send_to_brand_date,"onUpdate:modelValue":e[19]||(e[19]=t=>this.getRTV.send_to_brand_date=t),readonly:"",label:"Send To Brand Date"},null,8,["modelValue"])]),_:1}),a(x),a(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:s(()=>[a(p,{color:"secondary",variant:"tonal",onClick:e[20]||(e[20]=t=>V.closedialog2())},{default:s(()=>[m(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Q,{modelValue:l.snackbar,"onUpdate:modelValue":e[22]||(e[22]=t=>l.snackbar=t),timeout:3500,color:l.color},{default:s(()=>[m(u(l.snackbarText),1)]),_:1},8,["modelValue","color"])])}const le=U(A,[["render",se]]),de={components:{UpdateRTV:le},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Return Goods",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=D(),this.activeTab=q(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function ne(o,e,g,h,l,V){const t=F("UpdateRTV");return i(),c("div",null,[a(L,{modelValue:l.activeTab,"onUpdate:modelValue":e[0]||(e[0]=_=>l.activeTab=_),"show-arrows":""},{default:s(()=>[(i(!0),c(R,null,v(l.tabs,_=>(i(),T(G,{key:_.icon,value:_.tab},{default:s(()=>[a(y,{size:"20",start:"",icon:_.icon},null,8,["icon"]),m(" "+u(_.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),a(x),a(O,{modelValue:l.activeTab,"onUpdate:modelValue":e[1]||(e[1]=_=>l.activeTab=_),class:"mt-5 disable-tab-transition",touch:!1},{default:s(()=>[a(M,{value:"account"},{default:s(()=>[a(t)]),_:1})]),_:1},8,["modelValue"])])}const Re=U(de,[["render",ne]]);export{Re as default};
