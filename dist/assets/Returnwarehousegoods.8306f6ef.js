import{_ as x,o as n,c as i,g as s,w as o,a as l,F as b,q as T,t as r,b as m,m as f,u as k,bg as p,j as w,k as S,l as R,i as V,f as v,s as y,v as P,e as D,r as C}from"./index.9e8238bc.js";import{s as F}from"./Services.a0afbe6c.js";import{V as U}from"./VChip.61664a67.js";import{V as B}from"./VTable.47b87660.js";import{V as q,a as g}from"./VTextField.d627febb.js";import{V as N}from"./VSelect.c6616b42.js";import{V as W}from"./VDialog.a7ba21dc.js";import{V as z}from"./VSnackbar.e16afacf.js";import{V as O,a as A,b as G,c as M}from"./VWindowItem.c8530ca1.js";import"./index.2bd8ddc8.js";import"./VCheckboxBtn.b67094c8.js";const I={mixins:[F],data(){return{dateRules:[a=>!!a||"Date is required"],snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,PostRTV:{rtv_id:"",goods_status:"",quantity:"",warehouse_updated_date:"",send_to_brand_date:""},today:this.getFormattedDate(new Date),dialog:!1,RTVdata:[],headers:[{text:"Brand Name",value:"brand_name"},{text:"SKU.",value:"sku_name"},{text:"UOM",value:"uom"},{text:"Goods Status",value:"goods_status"},{text:"RTV Reason",value:"rtv_reason"},{text:"Collected Date",value:"collected_date"},{text:"Quantity",value:"quantity"},{text:"Warehouse UpdateDate",value:"warehouse_updated_date"},{text:"Send to BrandDate",value:"send_to_brand_date"},{text:"Action",value:"actions"}]}},computed:{},mounted(){this.getRTVdatas()},methods:{validateForm(){this.$refs.purchaseOrderForm.validate().then(a=>{console.log("form valid",a.valid),a.valid==!0?this.saveeditRTVproducts():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},saveeditRTVproducts(){const a={goods_status:this.PostRTV.goods_status,quantity:this.PostRTV.quantity,warehouse_updated_date:this.PostRTV.warehouse_updated_date,send_to_brand_date:this.PostRTV.send_to_brand_date,rtv_id:this.PostRTV.rtv_id};console.log("RTV",a),this.editrtvproducts(a).then(t=>{console.log(t),t.data.status==1?(this.snackbar=!0,this.color="primary",this.PostRTV={},this.snackbarText=t.data.message,this.dialog=!1,this.getRTVdatas()):(this.snackbar=!0,this.color="on-background",this.snackbarText=t.data.message)})},getFormattedDate(a){const t=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),_=String(a.getDate()).padStart(2,"0");return`${t}-${c}-${_}`},closedialog(){this.dialog=!1},editrow(a){this.dialog=!0,this.PostRTV={rtv_id:a.rtv_id,goods_status:a.goods_status,quantity:a.quantity,warehouse_updated_date:a.warehouse_updated_date!="N/A"?this.convertDateFormat(a.warehouse_updated_date):"",send_to_brand_date:a.send_to_brand_date!="N/A"?this.convertDateFormat(a.send_to_brand_date):""}},convertDateFormat(a){const t=new Date(a),c=t.getFullYear(),_=String(t.getMonth()+1).padStart(2,"0"),d=String(t.getDate()).padStart(2,"0");return`${c}-${_}-${d}`},colorgoodsstatus(a){return a=="Collected"?{color:"warning"}:a=="Reached Warehouse"||a=="Send To Brand"?{color:"success"}:{color:"error"}},getRTVdatas(){this.getrtvproducts().then(a=>{console.log("check the rtv",a),this.RTVdata=a.data,this.RTVdata.data.reverse()})}}},Q={class:"text-center"},Y={class:"text-center"},j={class:"text-center"},E={class:"text-center"},K={class:"text-center"},L={class:"text-center"},H={class:"text-center"},J={class:"text-center"},X={class:"text-center"},Z={key:0,class:"text-center"};function $(a,t,c,_,d,h){return n(),i("div",null,[s(B,{headers:d.headers,items:this.RTVdata,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:o(()=>[l("thead",null,[l("tr",null,[(n(!0),i(b,null,T(d.headers,e=>(n(),i("th",{class:"text-center",key:e},r(e.text),1))),128))])]),l("tbody",null,[(n(!0),i(b,null,T(this.RTVdata.data,(e,u)=>(n(),i("tr",{key:u},[l("td",Q,r(e.brand_name),1),l("td",Y,r(e.sku_name),1),l("td",j,r(e.uom),1),l("td",E,[s(U,{color:h.colorgoodsstatus(e.goods_status).color,class:"font-weight-medium",size:"small"},{default:o(()=>[m(r(e.goods_status),1)]),_:2},1032,["color"])]),l("td",K,r(e.rtv_reason),1),l("td",L,r(e.collected_date),1),l("td",H,r(e.quantity),1),l("td",J,r(e.warehouse_updated_date),1),l("td",X,r(e.send_to_brand_date),1),e.goods_status!="Send To Brand"?(n(),i("td",Z,[s(f,{icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:st=>h.editrow(e)},{default:o(()=>[s(k,{color:"warning",icon:"ri-pencil-line",size:"22"})]),_:2},1032,["onClick"])])):p("",!0)]))),128))])]),_:1},8,["headers","items"]),s(W,{modelValue:d.dialog,"onUpdate:modelValue":t[6]||(t[6]=e=>d.dialog=e),"max-width":"1000"},{default:o(()=>[s(w,{title:"Purchase Order",class:"mb-2"},{default:o(()=>[s(S,null,{default:o(()=>[s(R,null,{default:o(()=>[s(V,{cols:"12"},{default:o(()=>[s(q,{class:"mt-6",ref:"purchaseOrderForm"},{default:o(()=>[s(R,null,{default:o(()=>[s(V,{md:"6",cols:"12"},{default:o(()=>[s(N,{label:"Select Good Status",modelValue:this.PostRTV.goods_status,"onUpdate:modelValue":t[0]||(t[0]=e=>this.PostRTV.goods_status=e),items:["Reached Warehouse","Send To Brand"]},null,8,["modelValue"])]),_:1}),s(V,{md:"6",cols:"12"},{default:o(()=>[s(g,{label:"Quantity",modelValue:this.PostRTV.quantity,"onUpdate:modelValue":t[1]||(t[1]=e=>this.PostRTV.quantity=e)},null,8,["modelValue"])]),_:1}),s(V,{md:"6",cols:"12"},{default:o(()=>[this.PostRTV.goods_status=="Send To Brand"?(n(),v(g,{key:0,modelValue:this.PostRTV.send_to_brand_date,"onUpdate:modelValue":t[2]||(t[2]=e=>this.PostRTV.send_to_brand_date=e),type:"date",label:"Send To Brand Date",min:d.today,rules:d.dateRules},null,8,["modelValue","min","rules"])):p("",!0),this.PostRTV.goods_status=="Reached Warehouse"?(n(),v(g,{key:1,modelValue:this.PostRTV.warehouse_updated_date,"onUpdate:modelValue":t[3]||(t[3]=e=>this.PostRTV.warehouse_updated_date=e),type:"date",label:"Warehouse Update Date",min:d.today,rules:d.dateRules},null,8,["modelValue","min","rules"])):p("",!0)]),_:1}),s(y),s(V,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:o(()=>[s(f,{onClick:t[4]||(t[4]=e=>h.validateForm()),disabled:this.PostRTV.goods_status=="Collected"},{default:o(()=>[m("Save")]),_:1},8,["disabled"]),s(f,{color:"secondary",variant:"tonal",onClick:t[5]||(t[5]=e=>h.closedialog())},{default:o(()=>[m(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(z,{modelValue:d.snackbar,"onUpdate:modelValue":t[7]||(t[7]=e=>d.snackbar=e),timeout:3500,color:d.color},{default:o(()=>[m(r(d.snackbarText),1)]),_:1},8,["modelValue","color"])])}const tt=x(I,[["render",$]]),et={components:{UpdateRTV:tt},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Return Goods",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=P(),this.activeTab=D(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function at(a,t,c,_,d,h){const e=C("UpdateRTV");return n(),i("div",null,[s(O,{modelValue:d.activeTab,"onUpdate:modelValue":t[0]||(t[0]=u=>d.activeTab=u),"show-arrows":""},{default:o(()=>[(n(!0),i(b,null,T(d.tabs,u=>(n(),v(M,{key:u.icon,value:u.tab},{default:o(()=>[s(k,{size:"20",start:"",icon:u.icon},null,8,["icon"]),m(" "+r(u.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(y),s(G,{modelValue:d.activeTab,"onUpdate:modelValue":t[1]||(t[1]=u=>d.activeTab=u),class:"mt-5 disable-tab-transition",touch:!1},{default:o(()=>[s(A,{value:"account"},{default:o(()=>[s(e)]),_:1})]),_:1},8,["modelValue"])])}const mt=x(et,[["render",at]]);export{mt as default};
