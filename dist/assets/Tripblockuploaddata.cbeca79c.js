import{_ as h,o as c,c as m,g as e,w as a,i as n,j as k,k as V,l as f,b as p,m as b,u as v,v as _,e as T,F as g,q as C,s as x,r as w,f as I,t as F}from"./index.41c60b66.js";import{s as B}from"./Services.b982fcd6.js";import{V as y}from"./VForm.87542611.js";import{V as D}from"./VFileInput.2ec15ea4.js";import{V as S,a as U,b as L,c as R}from"./VWindowItem.aa48fc95.js";import"./VCounter.de05658a.js";import"./VChip.f9e50110.js";const j={mixins:[B],data(){return{Importcsv:null}},methods:{generateCSV(){return["SO ID","SO Number","Merchant UID","Merchant Code","City ID","Location ID","Trip name"].join(",")+`
`},downloadCSV(){const o=this.generateCSV(),t=new Blob([o],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),d=URL.createObjectURL(t);l.setAttribute("href",d),l.setAttribute("download","fileformat.csv"),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},handleFileChange(o){o.target.files.length>0?(this.Importcsv=o.target.files[0],console.log("File Selected:",this.Importcsv)):this.Importcsv=null},validateForm(){this.$refs.tripform.validate().then(o=>{o.valid==!0?this.uploadTripdata():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},uploadTripdata(){const o=new FormData;this.Importcsv&&o.append("import_csv",this.Importcsv);for(const t of o.entries())console.log("Trip Data",`${t[0]}: ${t[1]}`);this.Uploadtrip(o).then(t=>{t.data.status==1?(this.snackbar=!0,this.snackbarText=t.data.message,this.color="primary",window.location.reload(!0)):t.data.status==0?(this.snackbar=!0,this.snackbarText=t.data.message,this.color="on-background"):(this.snackbar=!0,this.color="on-background",this.snackbarText="File Is Mandatory")}).catch(t=>{console.error("Error uploading file:",t)})}}};function z(o,t,l,d,s,i){return c(),m("div",null,[e(f,null,{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(k,{title:"Trip Bulk Upload",class:"mb-4"},{default:a(()=>[e(V,null,{default:a(()=>[e(y,{ref:"tripform",class:"mt-6"},{default:a(()=>[e(f,null,{default:a(()=>[e(n,{md:"6",cols:"12"},{default:a(()=>[e(D,{file:s.Importcsv,"onUpdate:file":t[0]||(t[0]=u=>s.Importcsv=u),label:"File Browse",accept:".csv, .xls, .xlsx",multiple:"",onInput:i.handleFileChange},null,8,["file","onInput"])]),_:1}),e(n,{md:"6",cols:"12"},{default:a(()=>[p(" File Format Download "),e(b,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"small"},{default:a(()=>[e(v,{icon:"material-symbols:file-download",size:"42",color:"#BA8B32",onClick:i.downloadCSV},null,8,["onClick"])]),_:1})]),_:1}),e(n,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(b,{onClick:i.validateForm},{default:a(()=>[p(" Submit ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})])}const A=h(j,[["render",z]]),E={components:{TripBlockupload:A},data(){return{currentroute:"",activeTab:"",tabs:[{title:"Trip Bulk Upload",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=_(),this.activeTab=T(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function M(o,t,l,d,s,i){const u=w("TripBlockupload");return c(),m("div",null,[e(S,{modelValue:s.activeTab,"onUpdate:modelValue":t[0]||(t[0]=r=>s.activeTab=r),"show-arrows":""},{default:a(()=>[(c(!0),m(g,null,C(s.tabs,r=>(c(),I(R,{key:r.icon,value:r.tab},{default:a(()=>[e(v,{size:"20",start:"",icon:r.icon},null,8,["icon"]),p(" "+F(r.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(x),e(L,{modelValue:s.activeTab,"onUpdate:modelValue":t[1]||(t[1]=r=>s.activeTab=r),class:"mt-5 disable-tab-transition",touch:!1},{default:a(()=>[e(U,{value:"account"},{default:a(()=>[e(u)]),_:1})]),_:1},8,["modelValue"])])}const H=h(E,[["render",M]]);export{H as default};
