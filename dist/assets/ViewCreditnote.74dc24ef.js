import{_ as w,r as C,o as l,c as i,g as t,b7 as M,b8 as p,w as r,i as u,j as v,k as N,l as y,a as n,F as m,q as h,t as d,a4 as D,b9 as S,ac as F,f as T,m as x,u as P,br as B,b as g,bt as U,bw as z,bx as A,bp as R,v as E,e as L,s as q}from"./index.0a02293b.js";import{s as O}from"./Services.9766e40c.js";import{V as W}from"./VForm.cf677e9c.js";import{V as j}from"./VAutocomplete.90a8efe2.js";import{V as k}from"./VTable.0b86f51f.js";import{V as H}from"./VDialog.be0fa08a.js";import{V as G}from"./VSnackbar.47b8f9db.js";import{V as J,a as K,b as Q,c as X}from"./VWindowItem.47cd302a.js";import"./VCounter.0e4a7297.js";import"./VSelect.e762c033.js";import"./VCheckboxBtn.1c3b42ae.js";import"./VChip.3f90d630.js";import"./VTextField.a38e65d3.js";const Y={mixins:[O],data(){return{isProgress:!1,snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,dialog:!1,Invoice_Payments:[],headers:[{text:"SO Number",value:"so_number"},{text:"Credit Note",value:"credit_note"}],cityID:"",headers2:[{text:"Payment Created Date",value:"payment_created_date"},{text:"Payment Mode",value:"payment_mode"},{text:"Payment Type",value:"payment_type"},{text:"Reference No",value:"reference_no"},{text:"Paid Amount",value:"paid_amount"}],Merchantpayment:{total_amount:"",total_paid:"",total_pending:""},loading2:!1,store_data:[],loading:!0,merchantName:[],storeMerchant:[o=>!!o||"Merchant is required"],selectedmerchants:null,storesdata:[]}},computed:{storesdata(){return this.store_data.filter(o=>o.credit_note!="")}},mounted(){this.cityID=localStorage.getItem("city_id"),this.getMerchantdetails().then(()=>{this.loading=!1}).catch(o=>{console.error("Error fetching merchants:",o)})},methods:{getCreditNoteupdate(o,a){this.isProgress=!0,a!=0?this.getCreditnote(o).then(c=>{console.log({response:c}),c.data.status==1?(this.snackbar=!0,this.snackbarText=c.data.message,this.color="primary",location.reload(),this.isProgress=!1):(this.snackbar=!0,this.snackbarText=c.data.message,this.color="on-background",this.isProgress=!1)}):(this.snackbar=!0,this.snackbarText="There is no Return Ammount",this.color="on-background",this.isProgress=!1)},getPDFupdate(o){this.loading2=!0,window.open(o,"_blank"),this.loading2=!1},viewrow(o){console.log("ste",o),this.Invoice_Payments=o,this.dialog=!0},handleMerchantSelection(o){this.loading2=!0,this.getMerchantpayments(o).then(a=>{console.log("check the response",a),a.data.status==1?(this.Merchantpayment.total_amount=a.data.data.total_amount,this.Merchantpayment.total_paid=a.data.data.total_paid,this.Merchantpayment.total_pending=a.data.data.total_pending,this.store_data=a.data.data.so_data,this.loading2=!1,this.snackbar=!0,this.snackbarText=a.data.message,this.color="primary"):(this.loading2=!1,this.snackbar=!0,this.snackbarText=a.data.message,this.color="on-background")})},getMerchantdetails(){return new Promise((o,a)=>{this.getMerchants(this.cityID).then(c=>{this.merchantName=c.data.data.map(_=>({value:_.merchant_id,text:_.merchant_uid})),console.log("mer",this.merchantName),o()}).catch(c=>{console.error("Error fetching merchants:",c),a(c)})})}}},I=o=>(z("data-v-510f17f1"),o=o(),A(),o),Z={key:0,class:"loading-container"},$={key:0,id:"app"},ee=I(()=>n("div",{id:"loading-bg"},[n("div",{class:"loading-logo"},[n("img",{src:R,height:"60",width:"68",alt:"Logo"})]),n("div",{class:"loading"},[n("div",{class:"effect-1 effects"}),n("div",{class:"effect-2 effects"}),n("div",{class:"effect-3 effects"})])],-1)),te=[ee],ae={class:"text-center"},se={class:"text-center"},oe={key:0},re=I(()=>n("td",{colspan:"16",class:"text-center"},[n("h1",null,"No Transactions Found !")],-1)),ne=[re],le={class:"text-center"},ie={class:"text-center"},ce={class:"text-center"},de={class:"text-center"},ue={class:"text-center"};function me(o,a,c,_,s,f){const b=C("VCardContent");return l(),i("div",null,[s.loading?(l(),i("div",Z,[t(M,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):p("",!0),t(y,null,{default:r(()=>[t(u,{cols:"12"},{default:r(()=>[t(v,{title:"Merchant Payment Details",class:"mb-4"},{default:r(()=>[t(N,null,{default:r(()=>[t(W,{class:"mt-6",ref:"purchaseOrderForm"},{default:r(()=>[t(y,null,{default:r(()=>[t(u,{md:"6",cols:"12"},{default:r(()=>[t(j,{modelValue:s.selectedmerchants,"onUpdate:modelValue":[a[0]||(a[0]=e=>s.selectedmerchants=e),a[1]||(a[1]=e=>f.handleMerchantSelection(s.selectedmerchants))],items:s.merchantName,"item-value":"value","item-title":"text",rules:s.storeMerchant,label:"Merchant","menu-props":{maxHeight:200},"no-underline":""},null,8,["modelValue","items","rules"])]),_:1}),t(u,{md:"6",cols:"12"}),t(u,{cols:"12"},{default:r(()=>[s.loading2?(l(),i("div",$,te)):p("",!0),t(k,{headers:s.headers,items:s.store_data},{default:r(()=>[n("thead",null,[n("tr",null,[(l(!0),i(m,null,h(s.headers,e=>(l(),i("th",{class:"text-center",key:e},d(e.text),1))),128))])]),n("tbody",null,[(l(!0),i(m,null,h(f.storesdata,(e,V)=>(l(),i("tr",{key:V},[n("td",ae,d(e.so_number),1),n("td",se,[D(t(S,{size:20,color:"primary",indeterminate:""},null,512),[[F,s.isProgress]]),e.credit_note!=""&&e.return_amount>0?(l(),T(x,{key:0,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:pe=>f.getPDFupdate(e.credit_note)},{default:r(()=>[t(P,{color:"error",icon:"iwwa:file-pdf",size:"26"})]),_:2},1032,["onClick"])):p("",!0)])]))),128))])]),_:1},8,["headers","items"])]),_:1}),t(u,{cols:"12",class:"d-flex flex-wrap gap-4"})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),t(H,{modelValue:s.dialog,"onUpdate:modelValue":a[3]||(a[3]=e=>s.dialog=e),"max-width":"800px",persistent:""},{default:r(()=>[t(v,null,{default:r(()=>[t(B,null,{default:r(()=>[g("Invoice Payments")]),_:1}),t(b,null,{default:r(()=>[t(k,{headers:s.headers,items:this.Invoice_Payments},{default:r(()=>[n("thead",null,[n("tr",null,[(l(!0),i(m,null,h(s.headers2,e=>(l(),i("th",{class:"text-center",key:e},d(e.text),1))),128))])]),n("tbody",null,[this.Invoice_Payments.length===0?(l(),i("tr",oe,ne)):p("",!0),(l(!0),i(m,null,h(this.Invoice_Payments,(e,V)=>(l(),i("tr",{key:V},[n("td",le,d(e.payment_created_date),1),n("td",ie,d(e.payment_mode),1),n("td",ce,d(e.payment_type),1),n("td",de,d(e.reference_no),1),n("td",ue," \u20B9"+d(e.paid_amount),1)]))),128))])]),_:1},8,["headers","items"])]),_:1}),t(U,null,{default:r(()=>[t(x,{onClick:a[2]||(a[2]=e=>s.dialog=!1)},{default:r(()=>[g("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(G,{modelValue:s.snackbar,"onUpdate:modelValue":a[4]||(a[4]=e=>s.snackbar=e),timeout:3500,color:s.color},{default:r(()=>[g(d(s.snackbarText),1)]),_:1},8,["modelValue","color"])])}const he=w(Y,[["render",me],["__scopeId","data-v-510f17f1"]]),_e={components:{Viewcreditnotedata:he},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Credit Note",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=E(),this.activeTab=L(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function fe(o,a,c,_,s,f){const b=C("Viewcreditnotedata");return l(),i("div",null,[t(J,{modelValue:s.activeTab,"onUpdate:modelValue":a[0]||(a[0]=e=>s.activeTab=e),"show-arrows":""},{default:r(()=>[(l(!0),i(m,null,h(s.tabs,e=>(l(),T(X,{key:e.icon,value:e.tab},{default:r(()=>[t(P,{size:"20",start:"",icon:e.icon},null,8,["icon"]),g(" "+d(e.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(q),t(Q,{modelValue:s.activeTab,"onUpdate:modelValue":a[1]||(a[1]=e=>s.activeTab=e),class:"mt-5 disable-tab-transition",touch:!1},{default:r(()=>[t(K,{value:"account"},{default:r(()=>[t(b)]),_:1})]),_:1},8,["modelValue"])])}const Ne=w(_e,[["render",fe]]);export{Ne as default};
