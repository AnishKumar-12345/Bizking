import{_ as b,o as n,c as u,g as t,w as o,i as h,j as y,k as w,l as V,a as r,F as f,q as p,t as d,b8 as k,m as _,u as m,b as x,v as S,e as T,s as C,r as I,f as z}from"./index.f18c6187.js";import{s as B}from"./Services.3a28b585.js";import{V as A}from"./VForm.e6e6fa5e.js";import{V as L}from"./VAutocomplete.40c4582b.js";import{V as N}from"./VTextField.5f8ea4e7.js";import{V as U}from"./VTable.90df48da.js";import{V as D}from"./VPagination.097c217a.js";import{V as F}from"./VSnackbar.390758bc.js";import{V as H,a as Q,b as R,c as P}from"./VWindowItem.a6b004d0.js";import"./VSelect.21a4d8be.js";import"./VCheckboxBtn.91114ff2.js";import"./VChip.95c2d987.js";const q={mixins:[B],data(){return{salesdata:[],routedata:[],searchQuery:"",snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,page:1,pageSize:10,cityID:"",routeuserid:"",headers:[{text:"Route Name",value:"route_name"},{text:"Status",value:"status"},{text:"Stores Count",value:"stores_count"},{text:"Visited Stores Count",value:"visited_stores_count"},{text:"Actions",value:"action"}]}},computed:{filteredSalesHistory(){const l=this.searchQuery.toLowerCase().trim();return this.routedata.filter(e=>e.route_name&&e.route_name.toLowerCase().includes(l)||e.status&&e.status.toLowerCase().includes(l)||e.stores_count&&e.stores_count.toLowerCase().includes(l)||e.visited_stores_count&&e.visited_stores_count.toLowerCase().includes(l))},paginatedItems(){const l=(this.page-1)*this.pageSize,e=l+this.pageSize;return this.filteredSalesHistory.slice(l,e)}},mounted(){this.cityID=localStorage.getItem("city_id"),this.getAllsales()},methods:{updatePagination(l){this.page=l},handleBrandSelection(l){this.viewroutes(l).then(e=>{console.log({response:e}),e.data.status==1?(this.routedata=e.data.data,this.snackbar=!0,this.snackbarText=e.data.message,this.color="primary"):(this.snackbar=!0,this.snackbarText=e.data.message,this.color="on-background",this.routedata=[])})},getAllsales(){this.getSalesassociate(this.cityID).then(l=>{this.salesdata=l.data.data,this.salesdata=this.salesdata.map(e=>({value:e.user_id,text:e.name}))})}}},W={style:{"max-width":"400px"}},j={key:0},E=r("td",{colspan:"16",class:"text-center"},[r("h1",null,"No data found !")],-1),M=[E],O={class:"text-center"},G={class:"text-center"},J={class:"text-center"},K={class:"text-center"},X={class:"text-center"};function Y(l,e,g,v,s,c){return n(),u("div",null,[t(V,null,{default:o(()=>[t(h,{cols:"12"},{default:o(()=>[t(y,{title:"View Routes",class:"mb-4"},{default:o(()=>[t(w,null,{default:o(()=>[t(A,{class:"mt-6",ref:"purchaseOrderForm"},{default:o(()=>[t(V,null,{default:o(()=>[t(h,{cols:"12",md:"6"},{default:o(()=>[t(L,{modelValue:s.routeuserid,"onUpdate:modelValue":[e[0]||(e[0]=a=>s.routeuserid=a),e[1]||(e[1]=a=>c.handleBrandSelection(s.routeuserid))],label:"Sales Associate",items:this.salesdata,"item-value":"value","item-title":"text","menu-props":{maxHeight:200},required:""},null,8,["modelValue","items"])]),_:1})]),_:1}),t(h,null,{default:o(()=>[r("div",W,[t(N,{class:"mb-3",modelValue:s.searchQuery,"onUpdate:modelValue":e[2]||(e[2]=a=>s.searchQuery=a),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),t(U,{headers:s.headers,items:c.paginatedItems,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:o(()=>[r("thead",null,[r("tr",null,[(n(!0),u(f,null,p(s.headers,a=>(n(),u("th",{class:"text-center",key:a},d(a.text),1))),128))])]),r("tbody",null,[c.filteredSalesHistory.length===0?(n(),u("tr",j,M)):k("",!0),(n(!0),u(f,null,p(this.paginatedItems,(a,i)=>(n(),u("tr",{key:i},[r("td",O,d(a.route_name),1),r("td",G,d(a.status),1),r("td",J,d(a.stores_count),1),r("td",K,d(a.visited_stores_count),1),r("td",X,[t(_,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"x-small"},{default:o(()=>[t(m,{icon:"ri-pencil-line",size:"22",color:"#BA8B32"})]),_:1}),t(_,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"x-small"},{default:o(()=>[t(m,{icon:"material-symbols:delete",size:"22",color:"error"})]),_:1}),t(_,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"x-small"},{default:o(()=>[t(m,{color:"success",icon:"basil:eye-outline",size:"22"})]),_:1})])]))),128))])]),_:1},8,["headers","items"])]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{modelValue:s.page,"onUpdate:modelValue":e[3]||(e[3]=a=>s.page=a),length:Math.ceil(c.filteredSalesHistory.length/s.pageSize),onInput:c.updatePagination},null,8,["modelValue","length","onInput"]),t(F,{modelValue:s.snackbar,"onUpdate:modelValue":e[4]||(e[4]=a=>s.snackbar=a),timeout:2e3,color:s.color},{default:o(()=>[x(d(s.snackbarText),1)]),_:1},8,["modelValue","color"])])}const Z=b(q,[["render",Y]]),$={components:{Viewroutes:Z},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Routes",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=S(),this.activeTab=T(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function ee(l,e,g,v,s,c){const a=I("Viewroutes");return n(),u("div",null,[t(H,{modelValue:s.activeTab,"onUpdate:modelValue":e[0]||(e[0]=i=>s.activeTab=i),"show-arrows":""},{default:o(()=>[(n(!0),u(f,null,p(s.tabs,i=>(n(),z(P,{key:i.icon,value:i.tab},{default:o(()=>[t(m,{size:"20",start:"",icon:i.icon},null,8,["icon"]),x(" "+d(i.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(C),t(R,{modelValue:s.activeTab,"onUpdate:modelValue":e[1]||(e[1]=i=>s.activeTab=i),class:"mt-5 disable-tab-transition",touch:!1},{default:o(()=>[t(Q,{value:"account"},{default:o(()=>[t(a)]),_:1})]),_:1},8,["modelValue"])])}const he=b($,[["render",ee]]);export{he as default};
