import{_ as w,o as c,c as h,g as s,b6 as V,b5 as k,f as y,w as l,a as o,F as f,q as M,t as n,b as p,m as g,u as C,j as S,k as U,l as b,i as d,v as T,e as z,s as L,r as I}from"./index.986c8b57.js";import{s as q}from"./Services.7881b1f6.js";import{V as i}from"./VTextField.78fcf9d0.js";import{V as P}from"./VChip.10586e46.js";import{V as A}from"./VTable.4ed8be04.js";import{V as D}from"./VPagination.51a41da9.js";import{V as N}from"./VForm.45c60dc8.js";import{V as x}from"./VSelect.1c2f57cf.js";import{V as O}from"./VDialog.11623bc4.js";import{V as B}from"./VSnackbar.34661357.js";import{V as F,a as Q,b as G,c as R}from"./VWindowItem.11d828b3.js";import"./index.2bd8ddc8.js";import"./VCheckboxBtn.11a37a8c.js";const W={mixins:[q],data(){return{storerules:[a=>!!a||"Store Address is required"],uidrules:[a=>!!a||"UID is required"],namerules:[a=>!!a||"Name is required"],gstrules:[a=>!!a||"GST is required"],pinrules:[a=>!!a||"PIN is required"],phonerules:[a=>!!a||" Mobile  is required",a=>/^[0-9]+$/.test(a)||"only number are accepted",a=>a&&a.length<=10&&a.length>=10||"Mobile must be  10 number"],snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,dialog:!1,loading:!0,searchQuery:"",page:1,pageSize:10,merchants:[],saveMerchant:{merchant_uid:"",merchant_name:"",merchant_id:"",merchant_code:"",store_address:"",gst:"",area_pincode:"",poc_name:"",poc_phone:"",owner_name:"",owner_phone:"",shop_size:"",shop_type:"",location:"",sales_person:"",created_date:"",status:"",created_by:""},salesdata:[],createdby:"",headers:[{text:"Sales Associate",value:"sales_person"},{text:"Merchant Name",value:"merchant_name"},{text:"Merchant UID",value:"merchant_uid"},{text:"Owner Name",value:"owner_name"},{text:"Owner Phone",value:"owner_phone"},{text:"POC Name",value:"poc_name"},{text:"POC Phone",value:"poc_phone"},{text:"Shop Size",value:"shop_size"},{text:"Shop Type",value:"shop_type"},{text:"Status",value:"status"},{text:"GST",value:"gst"},{text:"Update Date",value:"updated_date"},{text:"Created By",value:"created_by"},{text:"Created Date",value:"created_date"},{text:"Decision Authority",value:"decision_authority"},{text:"Store Address",value:"store_address"},{text:"Location",value:"location"},{text:"Area Pincode",value:"area_pincode"},{text:"Action",value:"actions"}]}},computed:{filteredMerchants(){const a=this.searchQuery.toLowerCase().trim();return this.merchants.filter(e=>e.merchant_name&&e.merchant_name.toLowerCase().includes(a)||e.merchant_uid&&e.merchant_uid.toLowerCase().includes(a)||e.owner_name&&e.owner_name.toLowerCase().includes(a)||e.owner_phone&&e.owner_phone.toLowerCase().includes(a)||e.poc_name&&e.poc_name.toLowerCase().includes(a)||e.poc_phone&&e.poc_phone.toLowerCase().includes(a)||e.shop_size&&e.shop_size.toLowerCase().includes(a)||e.shop_type&&e.shop_type.toLowerCase().includes(a)||e.status&&e.status.toLowerCase().includes(a)||e.gst&&e.gst.toLowerCase().includes(a)||e.updated_date&&e.updated_date.toLowerCase().includes(a)||e.created_date&&e.created_date.toLowerCase().includes(a)||e.decision_authority&&e.decision_authority.toLowerCase().includes(a)||e.store_address&&e.store_address.toLowerCase().includes(a)||e.location&&e.location.toLowerCase().includes(a)||e.area_pincode&&e.area_pincode.toLowerCase().includes(a))},paginatedItems(){const a=(this.page-1)*this.pageSize,e=a+this.pageSize;return this.filteredMerchants.slice().sort((v,r)=>new Date(r.created_date)-new Date(v.created_date)).slice(a,e)}},mounted(){this.getmerchants(),this.createdby=localStorage.getItem("user_id"),setTimeout(()=>{this.loading=!1},3e3),this.getAllsales()},methods:{validateForm(){this.$refs.purchaseOrderForm.validate().then(a=>{a.valid==!0?this.updatemerchant():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},updatemerchant(){const a={merchant_uid:this.saveMerchant.merchant_uid,merchant_name:this.saveMerchant.merchant_name,merchant_code:this.saveMerchant.merchant_code,store_address:this.saveMerchant.store_address,gst:this.saveMerchant.gst,status:this.saveMerchant.status==="Active"?"1":"0",area_pincode:this.saveMerchant.area_pincode,poc_name:this.saveMerchant.poc_name,poc_phone:this.saveMerchant.poc_phone,owner_name:this.saveMerchant.owner_name,owner_phone:this.saveMerchant.owner_phone,merchant_id:this.saveMerchant.merchant_id,shop_size:this.saveMerchant.shop_size,shop_type:this.saveMerchant.shop_type,location:this.saveMerchant.location,created_by:this.createdby,sales_person:this.saveMerchant.sales_person,created_date:this.saveMerchant.created_date};console.log("post",a),this.updateMerchantdetailsdata(a).then(e=>{e.data.status==1?(this.snackbarText=e.data.message,this.color="primary",this.snackbar=!0,this.dialog=!1,this.saveMerchant={},this.getmerchants()):(this.snackbarText=e.data.message,this.color="on-background",this.snackbar=!0)})},getAllsales(){this.getsalesperson().then(a=>{this.salesdata=a.data.data,this.salesdata=this.salesdata.map(e=>({value:e.user_id,text:e.name})),console.log("sales",this.salesdata)})},editmerchant(a){console.log("check the edit",a.merchant_id),this.getMerchantdetailsdata(a.merchant_id).then(e=>{console.log("set merchnt",e),e.data.status==1&&(this.dialog=!0,this.saveMerchant.merchant_uid=e.data.data.merchant_uid,this.saveMerchant.merchant_id=e.data.data.merchant_id,this.saveMerchant.created_date=e.data.data.created_date,this.saveMerchant.merchant_code=e.data.data.merchant_code,this.saveMerchant.merchant_name=e.data.data.merchant_name,this.saveMerchant.gst=e.data.data.gst,this.saveMerchant.area_pincode=e.data.data.area_pincode,this.saveMerchant.owner_name=e.data.data.owner_name,this.saveMerchant.owner_phone=e.data.data.owner_phone,this.saveMerchant.poc_name=e.data.data.poc_name,this.saveMerchant.poc_phone=e.data.data.poc_phone,this.saveMerchant.shop_size=e.data.data.shop_size,this.saveMerchant.shop_type=e.data.data.shop_type,this.saveMerchant.location=e.data.data.location,this.saveMerchant.sales_person=e.data.data.sales_person==this.salesdata.value?this.salesdata.map(_=>({value:_.user_id,text:_.name})):e.data.data.sales_person,this.saveMerchant.store_address=e.data.data.store_address,this.saveMerchant.status=e.data.data.status==1?"Active":"Inactive")})},resolveStatusVariant(a){return a==1?{color:"success"}:{color:"error"}},updatePagination(a){this.page=a},getmerchants(){this.getMerchantdetails().then(a=>{this.merchants=a.data.data,this.merchants.reverse()})}}},j={key:0,style:{"max-width":"400px"}},E={key:1,class:"loading-container"},H={class:"text-center"},J={class:"text-center"},K={class:"text-center"},X={class:"text-center"},Y={class:"text-center"},Z={class:"text-center"},$={class:"text-center"},ee={class:"text-center"},te={class:"text-center"},ae={class:"text-center"},se={class:"text-center"},re={class:"text-center"},le={class:"text-center"},oe={class:"text-center"},ne={class:"text-center"},de={class:"text-center"},ie={class:"text-center"},ce=["href"],ue={class:"text-center"},he={class:"text-center"};function me(a,e,_,v,r,m){return c(),h("div",null,[this.merchants!=null?(c(),h("div",j,[s(i,{class:"mb-3",modelValue:r.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=t=>r.searchQuery=t),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])])):V("",!0),r.loading?(c(),h("div",E,[s(k,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):V("",!0),this.merchants!=null?(c(),y(A,{key:2,headers:r.headers,items:r.merchants,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:l(()=>[o("thead",null,[o("tr",null,[(c(!0),h(f,null,M(r.headers,t=>(c(),h("th",{class:"text-center",key:t},n(t.text),1))),128))])]),o("tbody",null,[(c(!0),h(f,null,M(m.paginatedItems,(t,u)=>(c(),h("tr",{key:u},[o("td",H,n(t.sales_person),1),o("td",J,n(t.merchant_name),1),o("td",K,n(t.merchant_uid),1),o("td",X,n(t.owner_name),1),o("td",Y,n(t.owner_phone),1),o("td",Z,n(t.poc_name),1),o("td",$,n(t.poc_phone),1),o("td",ee,n(t.shop_size),1),o("td",te,n(t.shop_type),1),o("td",ae,[s(P,{color:m.resolveStatusVariant(t.status).color,class:"font-weight-medium",size:"small"},{default:l(()=>[p(n(t.status==1?"Active":"Inactive"),1)]),_:2},1032,["color"])]),o("td",se,n(t.gst),1),o("td",re,n(t.updated_date),1),o("td",le,n(t.created_by),1),o("td",oe,n(t.created_date),1),o("td",ne,n(t.decision_authority),1),o("td",de,n(t.store_address),1),o("td",ie,[o("a",{href:t.location,target:"_blank",style:{color:"blue"}},n(t.location),9,ce)]),o("td",ue,n(t.area_pincode),1),o("td",he,[s(g,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"x-small",style:{"margin-left":"auto",display:"block"},onClick:Ve=>m.editmerchant(t)},{default:l(()=>[s(C,{icon:"ri-pencil-line",size:"22",color:"#BA8B32"})]),_:2},1032,["onClick"])])]))),128))])]),_:1},8,["headers","items"])):V("",!0),s(D,{modelValue:r.page,"onUpdate:modelValue":e[1]||(e[1]=t=>r.page=t),length:Math.ceil(m.filteredMerchants.length/r.pageSize),onInput:m.updatePagination},null,8,["modelValue","length","onInput"]),s(O,{modelValue:r.dialog,"onUpdate:modelValue":e[17]||(e[17]=t=>r.dialog=t),"max-width":"1000"},{default:l(()=>[s(S,{title:"Update Merchant",class:"mb-2"},{default:l(()=>[s(U,null,{default:l(()=>[s(b,null,{default:l(()=>[s(d,{cols:"12"},{default:l(()=>[s(N,{class:"mt-6",ref:"purchaseOrderForm"},{default:l(()=>[s(b,null,{default:l(()=>[s(d,{cols:"12",md:"6"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.merchant_uid,"onUpdate:modelValue":e[2]||(e[2]=t=>this.saveMerchant.merchant_uid=t),label:"Merchant UID",rules:r.uidrules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{cols:"12",md:"6"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.merchant_name,"onUpdate:modelValue":e[3]||(e[3]=t=>this.saveMerchant.merchant_name=t),label:"Merchant Name",rules:r.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.gst,"onUpdate:modelValue":e[4]||(e[4]=t=>this.saveMerchant.gst=t),label:"GST",rules:r.gstrules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.area_pincode,"onUpdate:modelValue":e[5]||(e[5]=t=>this.saveMerchant.area_pincode=t),label:"Area Pincode",rules:r.pinrules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.owner_name,"onUpdate:modelValue":e[6]||(e[6]=t=>this.saveMerchant.owner_name=t),label:"Owner Name",rules:r.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.owner_phone,"onUpdate:modelValue":e[7]||(e[7]=t=>this.saveMerchant.owner_phone=t),label:"Owner Phone",rules:r.phonerules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.poc_name,"onUpdate:modelValue":e[8]||(e[8]=t=>this.saveMerchant.poc_name=t),label:"POC Name",rules:r.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.poc_phone,"onUpdate:modelValue":e[9]||(e[9]=t=>this.saveMerchant.poc_phone=t),label:"POC Phone",rules:r.phonerules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.shop_size,"onUpdate:modelValue":e[10]||(e[10]=t=>this.saveMerchant.shop_size=t),label:"Shop Size"},null,8,["modelValue"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.shop_type,"onUpdate:modelValue":e[11]||(e[11]=t=>this.saveMerchant.shop_type=t),label:"Shop Type"},null,8,["modelValue"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.location,"onUpdate:modelValue":e[12]||(e[12]=t=>this.saveMerchant.location=t),label:"Location"},null,8,["modelValue"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(x,{modelValue:this.saveMerchant.sales_person,"onUpdate:modelValue":e[13]||(e[13]=t=>this.saveMerchant.sales_person=t),label:"Sales Person",items:this.salesdata,"item-value":"value","item-title":"text",rules:r.namerules,required:""},null,8,["modelValue","items","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(x,{modelValue:this.saveMerchant.status,"onUpdate:modelValue":e[14]||(e[14]=t=>this.saveMerchant.status=t),label:"Status",items:["Active","Inactive"],required:""},null,8,["modelValue"])]),_:1}),s(d,{cols:"12"},{default:l(()=>[s(i,{modelValue:this.saveMerchant.store_address,"onUpdate:modelValue":e[15]||(e[15]=t=>this.saveMerchant.store_address=t),label:"Store Address",rules:r.storerules},null,8,["modelValue","rules"])]),_:1}),s(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[s(g,{onClick:e[16]||(e[16]=t=>m.validateForm())},{default:l(()=>[p("Save")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(B,{modelValue:r.snackbar,"onUpdate:modelValue":e[18]||(e[18]=t=>r.snackbar=t),timeout:3500,color:r.color},{default:l(()=>[p(n(r.snackbarText),1)]),_:1},8,["modelValue","color"])])}const _e=w(W,[["render",me]]),pe={components:{Viewmerchant:_e},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Merchant",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=T(),this.activeTab=z(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function ve(a,e,_,v,r,m){const t=I("Viewmerchant");return c(),h("div",null,[s(F,{modelValue:r.activeTab,"onUpdate:modelValue":e[0]||(e[0]=u=>r.activeTab=u),"show-arrows":""},{default:l(()=>[(c(!0),h(f,null,M(r.tabs,u=>(c(),y(R,{key:u.icon,value:u.tab},{default:l(()=>[s(C,{size:"20",start:"",icon:u.icon},null,8,["icon"]),p(" "+n(u.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(L),s(G,{modelValue:r.activeTab,"onUpdate:modelValue":e[1]||(e[1]=u=>r.activeTab=u),class:"mt-5 disable-tab-transition",touch:!1},{default:l(()=>[s(Q,{value:"account"},{default:l(()=>[s(t)]),_:1})]),_:1},8,["modelValue"])])}const Le=w(pe,[["render",ve]]);export{Le as default};
