import{_ as w,o as u,c as m,g as l,b8 as v,f as S,w as n,a as o,F as f,q as y,t as r,b as V,m as b,u as C,j as L,k as U,l as x,i as d,bp as k,bq as q,v as I,e as T,r as P,s as z}from"./index.08705643.js";import{s as A}from"./Services.f9e4372b.js";import{V as i}from"./VTextField.0584a3e6.js";import{V as N}from"./VChip.cd0ade04.js";import{V as B}from"./VTable.eda8fa83.js";import{V as D}from"./VPagination.f3ba474e.js";import{V as O}from"./VForm.eec84c64.js";import{V as g}from"./VAutocomplete.457394fd.js";import{V as M}from"./VSelect.00b3ff1f.js";import{V as F}from"./VDialog.54dfbcf0.js";import{V as Q}from"./VSnackbar.89c018e7.js";import{V as G,a as H,b as R,c as E}from"./VWindowItem.2d182e11.js";import"./VCounter.d136124c.js";import"./VCheckboxBtn.770726d6.js";const W={mixins:[A],data(){return{storerules:[a=>!!a||"Store Address is required"],salespersonrules:[a=>!!a||"Agree Payment Mode is required"],uidrules:[a=>!!a||"UID is required"],namerules:[a=>!!a||"Name is required"],namerulessale:[a=>!!a||"Name is required"],gstrules:[a=>!!a||"GST is required"],locationrules:[a=>!!a||"Branch is required"],pinrules:[a=>!!a||"PIN is required",a=>a&&/^\d{6}$/.test(a)||"PIN must be 6 digits"],phonerules:[a=>!!a||" Mobile  is required",a=>/^[0-9]+$/.test(a)||"only number are accepted",a=>a&&a.length<=10&&a.length>=10||"Mobile must be  10 number"],Logitude:[a=>!!a||"Longitude is required",a=>/^\s*-?(\d+(\.\d+)?|[0-8]?\d(\.\d+)?|90(\.0+)?)\s*$/.test(a)||"Invalid Longitude Format"],latitude:[a=>!!a||"Latitude is required",a=>/^\s*-?([0-8]?\d(\.\d+)?|90(\.0+)?|[1-8]?\d(\.\d+)?|89(\.999+)?|[1-8]\d(\.\d+)?|90\.0+?)\s*$/.test(a)||"Invalid Latitude Format"],snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,dialog:!1,loading:!0,searchQuery:"",page:1,pageSize:10,merchants:[],saveMerchant:{merchant_uid:"",merchant_name:"",merchant_id:"",merchant_code:"",store_address:"",gst:"",area_pincode:"",poc_name:"",poc_phone:"",owner_name:"",owner_phone:"",shop_size:"",shop_type:"",location:"",sales_person:"",created_date:"",latitude:"",longitude:"",status:"",created_by:"",city_id:"",location_id:"",payment_type:"",entity_id:""},salesdata:[],Soperson:[],Sodata:[],cityID:null,createdby:"",locationsdata:[],cityLoaction:[],headers:[{text:"City Name",value:"branch"},{text:"City Location",value:"location"},{text:"Billing Address",value:"billing_address"},{text:"Payment Type",value:"payment_type"},{text:"Sales Associate",value:"sales_person"},{text:"Merchant Name",value:"merchant_name"},{text:"Merchant UID",value:"merchant_uid"},{text:"Owner Name",value:"owner_name"},{text:"Owner Phone",value:"owner_phone"},{text:"POC Name",value:"poc_name"},{text:"POC Phone",value:"poc_phone"},{text:"Shop Size",value:"shop_size"},{text:"Shop Type",value:"shop_type"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"},{text:"Status",value:"status"},{text:"GST",value:"gst"},{text:"Update Date",value:"updated_date"},{text:"Created By",value:"created_by"},{text:"Created Date",value:"created_date"},{text:"Store Address",value:"store_address"},{text:"Area Pincode",value:"area_pincode"},{text:"Action",value:"actions"}]}},computed:{filteredMerchants(){const a=this.searchQuery.toLowerCase().trim();return this.merchants.filter(e=>e.branch&&e.branch.toLowerCase().includes(a)||e.sales_person&&e.sales_person.toLowerCase().includes(a)||e.merchant_name&&e.merchant_name.toLowerCase().includes(a)||e.merchant_uid&&e.merchant_uid.toLowerCase().includes(a)||e.owner_name&&e.owner_name.toLowerCase().includes(a)||e.owner_phone&&e.owner_phone.toLowerCase().includes(a)||e.poc_name&&e.poc_name.toLowerCase().includes(a)||e.poc_phone&&e.poc_phone.toLowerCase().includes(a)||e.shop_size&&e.shop_size.toLowerCase().includes(a)||e.shop_type&&e.shop_type.toLowerCase().includes(a)||e.status&&e.status.toLowerCase().includes(a)||e.gst&&e.gst.toLowerCase().includes(a)||e.updated_date&&e.updated_date.toLowerCase().includes(a)||e.created_date&&e.created_date.toLowerCase().includes(a)||e.decision_authority&&e.decision_authority.toLowerCase().includes(a)||e.store_address&&e.store_address.toLowerCase().includes(a)||e.location&&e.location.toLowerCase().includes(a)||e.area_pincode&&e.area_pincode.toLowerCase().includes(a)||e.latitude&&e.latitude.toString().includes(a)||e.longitude&&e.longitude.toString().includes(a))},paginatedItems(){const a=(this.page-1)*this.pageSize,e=a+this.pageSize;return this.filteredMerchants.slice().sort((p,t)=>new Date(t.created_date)-new Date(p.created_date)).slice(a,e)}},watch:{"saveMerchant.city_id":function(a,e){a!==e&&this.handleBrandSelection(a)}},mounted(){this.getBranchnames(),this.cityID=localStorage.getItem("city_id"),this.createdby=localStorage.getItem("user_id"),this.getmerchantdetails().then(()=>{this.loading=!1}).catch(e=>{console.error("Error fetching merchants:",e)});const a=localStorage.getItem("sodetails");if(a)try{this.Soperson=JSON.parse(a),this.Sodata=this.Soperson.map(e=>({value:e.entity_id,text:e.name})),Array.isArray(this.Soperson)||(this.Soperson=[])}catch{this.Soperson=[]}this.getAllsales()},methods:{handleBrandSelection(a){this.getCitylocation(a).then(e=>{this.cityLoaction=e.data.data.map(c=>({value:c.location_id,text:c.location}))})},validateForm(){this.$refs.purchaseOrderForm.validate().then(a=>{a.valid==!0?this.updatemerchant():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},getBranchnames(){this.Locationdata().then(a=>{this.locationsdata=a.data.data.map(e=>({value:e.city_id,text:e.city}))})},updatemerchant(){const a={merchant_uid:this.saveMerchant.merchant_uid,merchant_name:this.saveMerchant.merchant_name,merchant_code:this.saveMerchant.merchant_code,store_address:this.saveMerchant.store_address,gst:this.saveMerchant.gst,status:this.saveMerchant.status==="Active"?"1":"0",area_pincode:this.saveMerchant.area_pincode,poc_name:this.saveMerchant.poc_name,poc_phone:this.saveMerchant.poc_phone,owner_name:this.saveMerchant.owner_name,owner_phone:this.saveMerchant.owner_phone,merchant_id:this.saveMerchant.merchant_id,shop_size:this.saveMerchant.shop_size,shop_type:this.saveMerchant.shop_type,location:this.saveMerchant.location,longitude:this.saveMerchant.longitude,latitude:this.saveMerchant.latitude,city_id:this.saveMerchant.city_id,location_id:this.saveMerchant.location_id,created_by:this.createdby,sales_person:this.saveMerchant.sales_person,created_date:this.saveMerchant.created_date,billing_address:this.saveMerchant.billing_address,payment_type:this.saveMerchant.payment_type,entity_id:this.saveMerchant.entity_id};this.updateMerchantdetailsdata(a).then(e=>{e.data.status==1?(this.snackbarText=e.data.message,this.color="primary",this.snackbar=!0,this.dialog=!1,this.saveMerchant={},this.getmerchantdetails()):(this.snackbarText=e.data.message,this.color="on-background",this.snackbar=!0)})},getAllsales(){this.getsalesperson().then(a=>{this.salesdata=a.data.data,this.salesdata=this.salesdata.map(e=>({value:e.user_id,text:e.name}))})},editmerchant(a){this.getMerchantdetailsdata(a.merchant_id).then(e=>{var c,p;e.data.status==1&&(this.dialog=!0,this.saveMerchant.merchant_uid=e.data.data.merchant_uid,this.saveMerchant.merchant_id=e.data.data.merchant_id,this.saveMerchant.created_date=e.data.data.created_date,this.saveMerchant.merchant_code=e.data.data.merchant_code,this.saveMerchant.merchant_name=e.data.data.merchant_name,this.saveMerchant.gst=e.data.data.gst,this.saveMerchant.area_pincode=e.data.data.area_pincode,this.saveMerchant.owner_name=e.data.data.owner_name,this.saveMerchant.owner_phone=e.data.data.owner_phone,this.saveMerchant.poc_name=e.data.data.poc_name,this.saveMerchant.latitude=e.data.data.latitude,this.saveMerchant.longitude=e.data.data.longitude,this.saveMerchant.poc_phone=e.data.data.poc_phone,this.saveMerchant.shop_size=e.data.data.shop_size,this.saveMerchant.shop_type=e.data.data.shop_type,this.saveMerchant.billing_address=e.data.data.billing_address,this.saveMerchant.city_id=((c=this.locationsdata.find(t=>t.value===e.data.data.city_id))==null?void 0:c.value)||e.data.data.city_id,this.saveMerchant.location_id=((p=this.cityLoaction.find(t=>t.value===e.data.data.location_id))==null?void 0:p.value)||e.data.data.location_id,this.saveMerchant.location=e.data.data.location,this.saveMerchant.sales_person=e.data.data.sales_person==this.salesdata.value?this.salesdata.map(t=>({value:t.user_id,text:t.name})):e.data.data.sales_person,this.saveMerchant.store_address=e.data.data.store_address,this.saveMerchant.payment_type=e.data.data.payment_type,this.saveMerchant.entity_id=e.data.data.entity_id,this.saveMerchant.status=e.data.data.status==1?"Active":"Inactive")})},resolveStatusVariant(a){return a==1?{color:"success"}:{color:"error"}},updatePagination(a){this.page=a},getmerchantdetails(){return new Promise((a,e)=>{this.getMerchants(this.cityID).then(c=>{this.merchants=c.data.data,this.merchants.reverse(),a()}).catch(c=>{e(c)})})}}},j={key:0,style:{"max-width":"400px"}},J={key:1,id:"app"},K=k('<div id="loading-bg"><div class="loading-logo"><img src="'+q+'" height="60" width="68" alt="Logo"></div><div class="loading"><div class="effect-1 effects"></div><div class="effect-2 effects"></div><div class="effect-3 effects"></div></div></div>',1),X=[K],Y={key:0},Z=o("td",{colspan:"16",class:"text-center"},[o("h1",null,"No data found !")],-1),$=[Z],ee={class:"text-center"},te={class:"text-center"},ae={class:"text-center"},se={class:"text-center"},le={class:"text-center"},ne={class:"text-center"},oe={class:"text-center"},re={class:"text-center"},de={class:"text-center"},ie={class:"text-center"},ce={class:"text-center"},ue={class:"text-center"},he={class:"text-center"},me={class:"text-center"},_e={class:"text-center"},pe={class:"text-center"},ve={class:"text-center"},Ve={class:"text-center"},ge={class:"text-center"},Me={class:"text-center"},fe={class:"text-center"},ye={class:"text-center"},be={class:"text-center"};function xe(a,e,c,p,t,_){return u(),m("div",null,[t.merchants!=null?(u(),m("div",j,[l(i,{modelValue:t.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=s=>t.searchQuery=s),class:"mb-3",density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])])):v("",!0),t.loading?(u(),m("div",J,X)):v("",!0),t.merchants!=null?(u(),S(B,{key:2,headers:t.headers,items:t.merchants,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:n(()=>[o("thead",null,[o("tr",null,[(u(!0),m(f,null,y(t.headers,s=>(u(),m("th",{key:s,class:"text-center"},r(s.text),1))),128))])]),o("tbody",null,[_.filteredMerchants.length===0?(u(),m("tr",Y,$)):v("",!0),(u(!0),m(f,null,y(_.paginatedItems,(s,h)=>(u(),m("tr",{key:h},[o("td",ee,r(s.city),1),o("td",te,r(s.location),1),o("td",ae,r(s.billing_address),1),o("td",se,r(s.payment_type),1),o("td",le,r(s.sales_person),1),o("td",ne,r(s.merchant_name),1),o("td",oe,r(s.merchant_uid),1),o("td",re,r(s.owner_name),1),o("td",de,r(s.owner_phone),1),o("td",ie,r(s.poc_name),1),o("td",ce,r(s.poc_phone),1),o("td",ue,r(s.shop_size),1),o("td",he,r(s.shop_type),1),o("td",me,r(s.latitude),1),o("td",_e,r(s.longitude),1),o("td",pe,[l(N,{color:_.resolveStatusVariant(s.status).color,class:"font-weight-medium",size:"small"},{default:n(()=>[V(r(s.status==1?"Active":"Inactive"),1)]),_:2},1032,["color"])]),o("td",ve,r(s.gst),1),o("td",Ve,r(s.updated_date),1),o("td",ge,r(s.created_by),1),o("td",Me,r(s.created_date),1),o("td",fe,r(s.store_address),1),o("td",ye,r(s.area_pincode),1),o("td",be,[l(b,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"x-small",style:{"margin-left":"auto",display:"block"},onClick:Le=>_.editmerchant(s)},{default:n(()=>[l(C,{icon:"ri-pencil-line",size:"22",color:"#BA8B32"})]),_:2},1032,["onClick"])])]))),128))])]),_:1},8,["headers","items"])):v("",!0),l(D,{modelValue:t.page,"onUpdate:modelValue":e[1]||(e[1]=s=>t.page=s),length:Math.ceil(_.filteredMerchants.length/t.pageSize),onInput:_.updatePagination},null,8,["modelValue","length","onInput"]),l(F,{modelValue:t.dialog,"onUpdate:modelValue":e[24]||(e[24]=s=>t.dialog=s),"max-width":"1000"},{default:n(()=>[l(L,{title:"Update Merchant",class:"mb-2"},{default:n(()=>[l(U,null,{default:n(()=>[l(x,null,{default:n(()=>[l(d,{cols:"12"},{default:n(()=>[l(O,{ref:"purchaseOrderForm",class:"mt-6"},{default:n(()=>[l(x,null,{default:n(()=>[l(d,{cols:"12",md:"6"},{default:n(()=>[l(g,{modelValue:t.saveMerchant.city_id,"onUpdate:modelValue":[e[2]||(e[2]=s=>t.saveMerchant.city_id=s),e[3]||(e[3]=s=>_.handleBrandSelection(t.saveMerchant.city_id))],label:"City Names",items:t.locationsdata,"item-title":"text","item-value":"value",rules:t.locationrules,required:"",readonly:""},null,8,["modelValue","items","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(g,{modelValue:t.saveMerchant.location_id,"onUpdate:modelValue":e[4]||(e[4]=s=>t.saveMerchant.location_id=s),label:"City Location",items:t.cityLoaction,"item-value":"value","item-title":"text",rules:a.locationrules2,"menu-props":{maxHeight:200}},null,8,["modelValue","items","rules"])]),_:1}),l(d,{cols:"12",md:"6"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.merchant_uid,"onUpdate:modelValue":e[5]||(e[5]=s=>t.saveMerchant.merchant_uid=s),label:"Merchant UID",rules:t.uidrules,required:""},null,8,["modelValue","rules"])]),_:1}),l(d,{cols:"12",md:"6"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.merchant_name,"onUpdate:modelValue":e[6]||(e[6]=s=>t.saveMerchant.merchant_name=s),label:"Merchant Name",rules:t.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.gst,"onUpdate:modelValue":e[7]||(e[7]=s=>t.saveMerchant.gst=s),label:"GST",required:""},null,8,["modelValue"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.area_pincode,"onUpdate:modelValue":e[8]||(e[8]=s=>t.saveMerchant.area_pincode=s),label:"Area Pincode",rules:t.pinrules,required:""},null,8,["modelValue","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.owner_name,"onUpdate:modelValue":e[9]||(e[9]=s=>t.saveMerchant.owner_name=s),label:"Owner Name",rules:t.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.owner_phone,"onUpdate:modelValue":e[10]||(e[10]=s=>t.saveMerchant.owner_phone=s),label:"Owner Phone",rules:t.phonerules,required:""},null,8,["modelValue","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.poc_name,"onUpdate:modelValue":e[11]||(e[11]=s=>t.saveMerchant.poc_name=s),label:"POC Name",rules:t.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.poc_phone,"onUpdate:modelValue":e[12]||(e[12]=s=>t.saveMerchant.poc_phone=s),label:"POC Phone",rules:t.phonerules,required:""},null,8,["modelValue","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.shop_size,"onUpdate:modelValue":e[13]||(e[13]=s=>t.saveMerchant.shop_size=s),label:"Shop Size"},null,8,["modelValue"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.shop_type,"onUpdate:modelValue":e[14]||(e[14]=s=>t.saveMerchant.shop_type=s),label:"Shop Type"},null,8,["modelValue"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.location,"onUpdate:modelValue":e[15]||(e[15]=s=>t.saveMerchant.location=s),label:"Location"},null,8,["modelValue"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(M,{modelValue:t.saveMerchant.sales_person,"onUpdate:modelValue":e[16]||(e[16]=s=>t.saveMerchant.sales_person=s),label:"Sales Person",items:t.salesdata,"item-value":"value","item-title":"text",rules:t.namerulessale,required:"","menu-props":{maxHeight:200}},null,8,["modelValue","items","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.latitude,"onUpdate:modelValue":e[17]||(e[17]=s=>t.saveMerchant.latitude=s),label:"Latitude",rules:t.latitude},null,8,["modelValue","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.longitude,"onUpdate:modelValue":e[18]||(e[18]=s=>t.saveMerchant.longitude=s),label:"Longitude",rules:t.Logitude},null,8,["modelValue","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(M,{modelValue:t.saveMerchant.status,"onUpdate:modelValue":e[19]||(e[19]=s=>t.saveMerchant.status=s),label:"Status",items:["Active","Inactive"],required:""},null,8,["modelValue"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.store_address,"onUpdate:modelValue":e[20]||(e[20]=s=>t.saveMerchant.store_address=s),label:"Store Address",rules:t.storerules},null,8,["modelValue","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(i,{modelValue:t.saveMerchant.billing_address,"onUpdate:modelValue":e[21]||(e[21]=s=>t.saveMerchant.billing_address=s),label:"Billing Address"},null,8,["modelValue"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(M,{modelValue:t.saveMerchant.payment_type,"onUpdate:modelValue":e[22]||(e[22]=s=>t.saveMerchant.payment_type=s),label:"Payment Type ",items:["Cash On Delivery","Credit","GRN","POD"],rules:t.salespersonrules,required:"","menu-props":{maxHeight:200}},null,8,["modelValue","rules"])]),_:1}),l(d,{md:"6",cols:"12"},{default:n(()=>[l(g,{modelValue:t.saveMerchant.entity_id,"onUpdate:modelValue":e[23]||(e[23]=s=>t.saveMerchant.entity_id=s),label:"Billing From",items:t.Sodata,"item-value":"value","item-title":"text","menu-props":{maxHeight:200}},null,8,["modelValue","items"])]),_:1}),l(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:n(()=>[l(b,{onClick:_.validateForm},{default:n(()=>[V(" Save ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Q,{modelValue:t.snackbar,"onUpdate:modelValue":e[25]||(e[25]=s=>t.snackbar=s),timeout:3500,color:t.color},{default:n(()=>[V(r(t.snackbarText),1)]),_:1},8,["modelValue","color"])])}const we=w(W,[["render",xe]]),Se={components:{Viewmerchant:we},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Merchant",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=I(),this.activeTab=T(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function Ce(a,e,c,p,t,_){const s=P("Viewmerchant");return u(),m("div",null,[l(H,{modelValue:t.activeTab,"onUpdate:modelValue":e[0]||(e[0]=h=>t.activeTab=h),"show-arrows":""},{default:n(()=>[(u(!0),m(f,null,y(t.tabs,h=>(u(),S(G,{key:h.icon,value:h.tab},{default:n(()=>[l(C,{size:"20",start:"",icon:h.icon},null,8,["icon"]),V(" "+r(h.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),l(z),l(E,{modelValue:t.activeTab,"onUpdate:modelValue":e[1]||(e[1]=h=>t.activeTab=h),class:"mt-5 disable-tab-transition",touch:!1},{default:n(()=>[l(R,{value:"account"},{default:n(()=>[l(s)]),_:1})]),_:1},8,["modelValue"])])}const Ge=w(Se,[["render",Ce]]);export{Ge as default};
