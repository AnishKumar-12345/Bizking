import{_ as x,o as u,c as _,g as s,b6 as p,b5 as B,f as v,w as l,i as d,j as P,k,b as h,l as g,a as o,F as b,q as V,t as i,m as f,u as C,v as y,e as U,s as T,r as S}from"./index.986c8b57.js";import{s as L}from"./Services.7881b1f6.js";import{V as n}from"./VTextField.78fcf9d0.js";import{V as N,a as F}from"./VAlert.ed85d860.js";import{V as q}from"./VChip.10586e46.js";import{V as I}from"./VTable.4ed8be04.js";import{V as A}from"./VPagination.51a41da9.js";import{V as M}from"./VForm.45c60dc8.js";import{V as O}from"./VAutocomplete.fe04c61c.js";import{V as R}from"./VSelect.1c2f57cf.js";import{V as D}from"./VDialog.11623bc4.js";import{V as G}from"./VSnackbar.34661357.js";import{V as Q,a as K,b as H,c as W}from"./VWindowItem.11d828b3.js";import"./index.2bd8ddc8.js";import"./VCheckboxBtn.11a37a8c.js";const j={mixins:[L],data(){return{maxPaginationPages:5,storerules:[t=>!!t||"Store Address is required"],uidrules:[t=>!!t||"UID is required"],namerules:[t=>!!t||"Name is required"],gstrules:[t=>!!t||"GST is required"],pinrules:[t=>!!t||"PIN is required"],phonerules:[t=>!!t||" Mobile  is required",t=>/^[0-9]+$/.test(t)||"only number are accepted",t=>t&&t.length<=10&&t.length>=10||"Mobile must be  10 number"],snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,dialog:!1,loading:!0,searchQuery:"",page:1,pageSize:10,products:[],saveProduct:{merchant_uid:"",brand_name:"",sku_name:"",uom:"",hsn_code:"",mrp:"",status:"",brand_id:"",brand_product_id:"",total_given_margin:"",sgst:"",cgst:"",pitch_from:"",final_retail_cp:"",final_ret:"",bk_profit:"",bizkingz_cp_final:"",bc_margin_amt:"",bc_margin:""},salesdata:[],BrandNames:[],selectedBrand:null,createdby:"",headers:[{text:"Brand Name",value:"brand_name"},{text:"SKU Name",value:"sku_name"},{text:"UOM",value:"uom"},{text:"HSN Code",value:"hsn_code"},{text:"MRP",value:"mrp"},{text:"Status",value:"status"},{text:"Total Given Margin",value:"total_given_margin"},{text:"SGST",value:"sgst"},{text:"CGST",value:"cgst"},{text:"Pitch From",value:"pitch_from"},{text:"Final Retail CP",value:"final_retail_cp"},{text:"Final Retail",value:"final_ret"},{text:"BK Profit",value:"bk_profit"},{text:"Bizking CP Final",value:"bizkingz_cp_final"},{text:"BC Margin Amount",value:"bc_margin_amt"},{text:"BC Margin",value:"bc_margin"},{text:"Action",value:"actions"}]}},computed:{filteredProducts(){const t=this.searchQuery.toLowerCase().trim();return this.products.filter(e=>e.brand_name&&e.brand_name.toLowerCase().includes(t)||e.sku_name&&e.sku_name.toLowerCase().includes(t)||e.uom&&e.uom.toLowerCase().includes(t)||e.hsn_code&&e.hsn_code.toLowerCase().includes(t)||e.mrp&&e.mrp.toLowerCase().includes(t)||e.status&&e.status.toLowerCase().includes(t)||e.total_given_margin&&e.total_given_margin.toLowerCase().includes(t)||e.sgst&&e.sgst.toLowerCase().includes(t)||e.cgst&&e.cgst.toLowerCase().includes(t)||e.pitch_from&&e.pitch_from.toLowerCase().includes(t)||e.final_retail_cp&&e.final_retail_cp.toLowerCase().includes(t)||e.final_ret&&e.final_ret.toLowerCase().includes(t)||e.bk_profit&&e.bk_profit.toLowerCase().includes(t)||e.bizkingz_cp_final&&e.bizkingz_cp_final.toLowerCase().includes(t)||e.bc_margin_amt&&e.bc_margin_amt.toLowerCase().includes(t)||e.bc_margin&&e.bc_margin.toLowerCase().includes(t))},paginatedItems(){const t=(this.page-1)*this.pageSize,e=t+this.pageSize;return this.products.slice(t,e)}},mounted(){this.getBranddetails(),this.getProductsdata(),setTimeout(()=>{this.loading=!1},3500)},methods:{validateForm(){this.$refs.purchaseOrderForm.validate().then(t=>{t.valid==!0?this.UpdateProduct():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},UpdateProduct(){const t={brand_id:this.selectedBrand,brand_product_id:this.saveProduct.brand_product_id,sku_name:this.saveProduct.sku_name,uom:this.saveProduct.uom,hsn_code:this.saveProduct.hsn_code,mrp:this.saveProduct.mrp,total_given_margin:this.saveProduct.total_given_margin,bizkingz_cp_final:this.saveProduct.bizkingz_cp_final,pitch_from:this.saveProduct.pitch_from,final_ret:this.saveProduct.final_ret,final_retail_cp:this.saveProduct.final_retail_cp,bc_margin:this.saveProduct.bc_margin,bc_margin_amt:this.saveProduct.bc_margin_amt,bk_profit:this.saveProduct.bk_profit,cgst:this.saveProduct.cgst,sgst:this.saveProduct.sgst,status:this.saveProduct.status==="Active"?"1":"0"};console.log("post",t),this.updateProducts(t).then(e=>{e.data.status==1?(this.snackbarText=e.data.message,this.color="primary",this.snackbar=!0,this.dialog=!1,this.saveProduct={},this.getProductsdata()):(this.snackbarText=e.data.message,this.color="on-background",this.snackbar=!0)})},closeDialog(){this.dialog=!1},editProduct(t){console.log("check the edit",t),this.dialog=!0,this.selectedBrand=t.brand_name,this.selectedBrand=t.brand_id,this.saveProduct.brand_product_id=t.brand_product_id,this.saveProduct.sku_name=t.sku_name,this.saveProduct.uom=t.uom,this.saveProduct.hsn_code=t.hsn_code,this.saveProduct.mrp=t.mrp,this.saveProduct.status=t.status==1?"Active":"Inactive",this.saveProduct.total_given_margin=t.total_given_margin,this.saveProduct.sgst=t.sgst,this.saveProduct.cgst=t.cgst,this.saveProduct.pitch_from=t.pitch_from,this.saveProduct.final_retail_cp=t.final_retail_cp,this.saveProduct.final_ret=t.final_ret,this.saveProduct.bk_profit=t.bk_profit,this.saveProduct.bizkingz_cp_final=t.bizkingz_cp_final,this.saveProduct.bc_margin_amt=t.bc_margin_amt,this.saveProduct.bc_margin=t.bc_margin},resolveStatusVariant(t){return t==1?{color:"success"}:{color:"error"}},updatePagination(t){this.page=t},getProductsdata(){this.getProducts().then(t=>{this.products=t.data.data,console.log("merchants",this.products),this.products.reverse()})},getBranddetails(){this.getBrands().then(t=>{this.BrandNames=t.data,this.BrandNames=this.BrandNames.map(e=>({value:e.brand_id,text:e.brand_name})),console.log("mer",this.BrandNames)})}}},E={key:0,style:{"max-width":"400px"}},J={key:1,class:"loading-container"},X=o("p",{class:"mb-0"}," The system is not retrieving the Purchase Histories from Purchase Orders. Please ensure that you have applied for Purchase Orders !",-1),Y={class:"text-center"},Z={class:"text-center"},$={class:"text-center"},ee={class:"text-center"},te={class:"text-center"},ae={class:"text-center"},se={class:"text-center"},le={class:"text-center"},re={class:"text-center"},oe={class:"text-center"},de={class:"text-center"},ie={class:"text-center"},ne={class:"text-center"},ue={class:"text-center"},ce={class:"text-center"},me={class:"text-center"},_e={class:"text-center"};function he(t,e,w,z,r,m){return u(),_("div",null,[this.products!=null?(u(),_("div",E,[s(n,{class:"mb-3",modelValue:r.searchQuery,"onUpdate:modelValue":e[0]||(e[0]=a=>r.searchQuery=a),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])])):p("",!0),r.loading?(u(),_("div",J,[s(B,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):p("",!0),this.products==null?(u(),v(g,{key:2},{default:l(()=>[s(d,{cols:"12"},{default:l(()=>[s(P,{title:"Purchase Order View"},{default:l(()=>[s(k,null,{default:l(()=>[s(N,{color:"warning",variant:"tonal",class:"mb-4",border:"top"},{default:l(()=>[s(F,{class:"mb-1"},{default:l(()=>[h(" Are you sure you gave Purchase Orders? ")]),_:1}),X]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):p("",!0),this.products!=null?(u(),v(I,{key:3,headers:r.headers,items:m.paginatedItems,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:l(()=>[o("thead",null,[o("tr",null,[(u(!0),_(b,null,V(r.headers,a=>(u(),_("th",{class:"text-center",key:a},i(a.text),1))),128))])]),o("tbody",null,[(u(!0),_(b,null,V(m.paginatedItems,(a,c)=>(u(),_("tr",{key:c},[o("td",Y,i(a.brand_name),1),o("td",Z,i(a.sku_name),1),o("td",$,i(a.uom),1),o("td",ee,i(a.hsn_code),1),o("td",te,i(a.mrp),1),o("td",ae,[s(q,{color:m.resolveStatusVariant(a.status).color,class:"font-weight-medium",size:"small"},{default:l(()=>[h(i(a.status==1?"Active":"Inactive"),1)]),_:2},1032,["color"])]),o("td",se,i(a.total_given_margin),1),o("td",le,i(a.sgst),1),o("td",re,i(a.cgst),1),o("td",oe,i(a.pitch_from),1),o("td",de,i(a.final_retail_cp),1),o("td",ie,i(a.final_ret),1),o("td",ne,i(a.bk_profit),1),o("td",ue,i(a.bizkingz_cp_final),1),o("td",ce,i(a.bc_margin_amt),1),o("td",me,i(a.bc_margin),1),o("td",_e,[s(f,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"x-small",style:{"margin-left":"auto",display:"block"},onClick:ve=>m.editProduct(a)},{default:l(()=>[s(C,{icon:"ri-pencil-line",size:"22",color:"#BA8B32"})]),_:2},1032,["onClick"])])]))),128))])]),_:1},8,["headers","items"])):p("",!0),s(A,{modelValue:r.page,"onUpdate:modelValue":e[1]||(e[1]=a=>r.page=a),length:Math.ceil(m.filteredProducts.length/r.pageSize),onInput:m.updatePagination,max:r.maxPaginationPages},null,8,["modelValue","length","onInput","max"]),s(D,{modelValue:r.dialog,"onUpdate:modelValue":e[20]||(e[20]=a=>r.dialog=a),"max-width":"1000"},{default:l(()=>[s(P,{title:"Update Merchant",class:"mb-2"},{default:l(()=>[s(k,null,{default:l(()=>[s(g,null,{default:l(()=>[s(d,{cols:"12"},{default:l(()=>[s(M,{class:"mt-6",ref:"purchaseOrderForm"},{default:l(()=>[s(g,null,{default:l(()=>[s(d,{cols:"12",md:"6"},{default:l(()=>[s(O,{modelValue:r.selectedBrand,"onUpdate:modelValue":e[2]||(e[2]=a=>r.selectedBrand=a),label:"Brand Name",items:this.BrandNames,"item-value":"value","item-title":"text",rules:r.namerules,required:""},null,8,["modelValue","items","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.sku_name,"onUpdate:modelValue":e[3]||(e[3]=a=>this.saveProduct.sku_name=a),label:"SKU Name",rules:r.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.uom,"onUpdate:modelValue":e[4]||(e[4]=a=>this.saveProduct.uom=a),label:"UOM",rules:r.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.hsn_code,"onUpdate:modelValue":e[5]||(e[5]=a=>this.saveProduct.hsn_code=a),label:"HSN Code",rules:r.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.mrp,"onUpdate:modelValue":e[6]||(e[6]=a=>this.saveProduct.mrp=a),label:"MRP",rules:r.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.total_given_margin,"onUpdate:modelValue":e[7]||(e[7]=a=>this.saveProduct.total_given_margin=a),label:"Total Given Margin",rules:r.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.sgst,"onUpdate:modelValue":e[8]||(e[8]=a=>this.saveProduct.sgst=a),label:"SGST",rules:r.namerules,required:""},null,8,["modelValue","rules"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.cgst,"onUpdate:modelValue":e[9]||(e[9]=a=>this.saveProduct.cgst=a),label:"CGST"},null,8,["modelValue"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.pitch_from,"onUpdate:modelValue":e[10]||(e[10]=a=>this.saveProduct.pitch_from=a),label:"Pitch From"},null,8,["modelValue"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.final_retail_cp,"onUpdate:modelValue":e[11]||(e[11]=a=>this.saveProduct.final_retail_cp=a),label:"Final Retail CP"},null,8,["modelValue"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.final_ret,"onUpdate:modelValue":e[12]||(e[12]=a=>this.saveProduct.final_ret=a),label:"Final Retail"},null,8,["modelValue"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.bk_profit,"onUpdate:modelValue":e[13]||(e[13]=a=>this.saveProduct.bk_profit=a),label:"BK Profit"},null,8,["modelValue"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.bizkingz_cp_final,"onUpdate:modelValue":e[14]||(e[14]=a=>this.saveProduct.bizkingz_cp_final=a),label:"Bizking CP Final"},null,8,["modelValue"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.bc_margin_amt,"onUpdate:modelValue":e[15]||(e[15]=a=>this.saveProduct.bc_margin_amt=a),label:"BC margin Amount"},null,8,["modelValue"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(n,{modelValue:this.saveProduct.bc_margin,"onUpdate:modelValue":e[16]||(e[16]=a=>this.saveProduct.bc_margin=a),label:"BC margin "},null,8,["modelValue"])]),_:1}),s(d,{md:"6",cols:"12"},{default:l(()=>[s(R,{modelValue:this.saveProduct.status,"onUpdate:modelValue":e[17]||(e[17]=a=>this.saveProduct.status=a),label:"Status",items:["Active","Inactive"],required:""},null,8,["modelValue"])]),_:1}),s(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[s(f,{onClick:e[18]||(e[18]=a=>m.validateForm())},{default:l(()=>[h("Save")]),_:1}),s(f,{color:"secondary",variant:"tonal",onClick:e[19]||(e[19]=a=>m.closeDialog())},{default:l(()=>[h(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(G,{modelValue:r.snackbar,"onUpdate:modelValue":e[21]||(e[21]=a=>r.snackbar=a),timeout:3500,color:r.color},{default:l(()=>[h(i(r.snackbarText),1)]),_:1},8,["modelValue","color"])])}const pe=x(j,[["render",he]]),ge={components:{Viewproduct:pe},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Products",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=y(),this.activeTab=U(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function fe(t,e,w,z,r,m){const a=S("Viewproduct");return u(),_("div",null,[s(Q,{modelValue:r.activeTab,"onUpdate:modelValue":e[0]||(e[0]=c=>r.activeTab=c),"show-arrows":""},{default:l(()=>[(u(!0),_(b,null,V(r.tabs,c=>(u(),v(W,{key:c.icon,value:c.tab},{default:l(()=>[s(C,{size:"20",start:"",icon:c.icon},null,8,["icon"]),h(" "+i(c.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(T),s(H,{modelValue:r.activeTab,"onUpdate:modelValue":e[1]||(e[1]=c=>r.activeTab=c),class:"mt-5 disable-tab-transition",touch:!1},{default:l(()=>[s(K,{value:"account"},{default:l(()=>[s(a)]),_:1})]),_:1},8,["modelValue"])])}const Fe=x(ge,[["render",fe]]);export{Fe as default};
