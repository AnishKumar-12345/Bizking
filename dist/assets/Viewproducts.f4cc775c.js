import{_ as g,o as c,c as d,g as t,b7 as y,b8 as w,w as o,i as m,j as T,k as M,l as _,s as b,a as l,F as h,q as p,t as i,m as V,u as f,b as x,v as I,e as C,r as S,f as U}from"./index.472db999.js";import{s as z}from"./Services.e46cf55c.js";import{V as N}from"./VForm.d98948db.js";import{V as B}from"./VAutocomplete.d7487627.js";import{V as L}from"./VTextField.7fdc071b.js";import{V as P}from"./VTable.6e4c53e5.js";import{V as D}from"./VPagination.48dc8f24.js";import{V as F}from"./VSnackbar.0c823182.js";import{V as Q,a as A,b as R,c as j}from"./VWindowItem.ce73296d.js";import"./VSelect.5109e7cd.js";import"./VCheckboxBtn.eaf1da58.js";import"./VChip.5ed44cb2.js";const E={mixins:[z],components:{},data(){return{loading:!0,searchQuery:"",page:1,pageSize:10,snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,cityID:null,marchantstocksdata:[],selectedmerchants:null,merchantName:[],stockUpdatedate:null,headers:[{text:"Brand Name",value:"brand_name"},{text:"SKU",value:"sku_name"},{text:"UOM",value:"uom"},{text:"MRP",value:"mrp"},{text:"Total Given Margin",value:"total_given_margin"},{text:"Actions",value:"action"}]}},computed:{filteredMerchant(){const s=this.searchQuery.toLowerCase().trim();return this.marchantstocksdata.filter(e=>e.brand_name&&e.brand_name.toLowerCase().includes(s)||e.sku_name&&e.sku_name.toLowerCase().includes(s)||e.uom&&e.uom.toLowerCase().includes(s)||e.mrp&&e.mrp.toLowerCase().includes(s)||e.total_given_margin&&e.total_given_margin.toLowerCase().includes(s))},paginatedItems(){const s=(this.page-1)*this.pageSize,e=s+this.pageSize;return this.filteredMerchant.slice(s,e)},merchants(){return this.merchantName.map(s=>s.merchant_uid)}},mounted(){this.cityID=localStorage.getItem("city_id"),this.getMerchantdetails(),setTimeout(()=>{this.loading=!1},4e3)},methods:{handleMerchantSelection(){const s=this.merchantName.find(e=>e.merchant_uid===this.selectedmerchants);s&&(this.selectedMerchantId=s.merchant_id,this.getmerchantproducts(this.selectedMerchantId).then(e=>{e.status==1?(this.marchantstocksdata=e.merchant_product_details.products,console.log("Merchant Products:",this.marchantstocksdata)):(this.marchantstocksdata=[],this.snackbar=!0,this.snackbarText=e.message,this.color="on-background")}).catch(e=>{console.error("Error fetching merchant products:",e)}))},getMerchantdetails(){this.getMerchants(this.cityID).then(s=>{this.merchantName=s.data.data})}}},O={key:0,class:"loading-container"},W={style:{"max-width":"400px"}},q={class:"text-center"},G={class:"text-center"},H={class:"text-center"},K={class:"text-center"},J={class:"text-center"},X={class:"text-center",style:{display:"flex","justify-content":"center","align-items":"center"}};function Y(s,e,v,k,a,u){return c(),d("div",null,[a.loading?(c(),d("div",O,[t(y,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):w("",!0),t(_,null,{default:o(()=>[t(m,{cols:"12"},{default:o(()=>[t(T,{title:"Products",class:"mb-4"},{default:o(()=>[t(M,null,{default:o(()=>[t(N,{class:"mt-6",ref:"purchaseOrderForm"},{default:o(()=>[t(_,null,{default:o(()=>[t(m,{md:"6",cols:"12"},{default:o(()=>[t(B,{modelValue:a.selectedmerchants,"onUpdate:modelValue":[e[0]||(e[0]=r=>a.selectedmerchants=r),u.handleMerchantSelection],label:"Store or Merchant",items:u.merchants,"menu-props":{maxHeight:200}},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(b),t(m,{cols:"12"},{default:o(()=>[l("div",W,[t(L,{class:"mb-3",modelValue:a.searchQuery,"onUpdate:modelValue":e[1]||(e[1]=r=>a.searchQuery=r),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),t(P,{headers:a.headers,items:this.paginatedItems},{default:o(()=>[l("thead",null,[l("tr",null,[(c(!0),d(h,null,p(a.headers,r=>(c(),d("th",{class:"text-center",key:r},i(r.text),1))),128))])]),l("tbody",null,[(c(!0),d(h,null,p(this.paginatedItems,(r,n)=>(c(),d("tr",{key:n},[l("td",q,i(r.brand_name),1),l("td",G,i(r.sku_name),1),l("td",H,i(r.uom),1),l("td",K," \u20B9"+i(r.mrp),1),l("td",J,i(r.total_given_margin),1),l("td",X,[t(V,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"x-small",style:{"margin-left":"auto",display:"block"}},{default:o(()=>[t(f,{icon:"ri-pencil-line",size:"22",color:"#BA8B32"})]),_:1}),t(V,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"x-small",style:{"margin-left":"auto",display:"block"}},{default:o(()=>[t(f,{icon:"material-symbols:delete",size:"22",color:"error"})]),_:1})])]))),128))])]),_:1},8,["headers","items"]),t(D,{modelValue:a.page,"onUpdate:modelValue":e[2]||(e[2]=r=>a.page=r),length:Math.ceil(u.filteredMerchant.length/a.pageSize),onInput:s.updatePagination},null,8,["modelValue","length","onInput"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),t(F,{modelValue:a.snackbar,"onUpdate:modelValue":e[3]||(e[3]=r=>a.snackbar=r),timeout:3500,color:a.color},{default:o(()=>[x(i(a.snackbarText),1)]),_:1},8,["modelValue","color"])])}const Z=g(E,[["render",Y]]),$={components:{Viewproductsdata:Z},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Products",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=I(),this.activeTab=C(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function ee(s,e,v,k,a,u){const r=S("Viewproductsdata");return c(),d("div",null,[t(Q,{modelValue:a.activeTab,"onUpdate:modelValue":e[0]||(e[0]=n=>a.activeTab=n),"show-arrows":""},{default:o(()=>[(c(!0),d(h,null,p(a.tabs,n=>(c(),U(j,{key:n.icon,value:n.tab},{default:o(()=>[t(f,{size:"20",start:"",icon:n.icon},null,8,["icon"]),x(" "+i(n.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(b),t(R,{modelValue:a.activeTab,"onUpdate:modelValue":e[1]||(e[1]=n=>a.activeTab=n),class:"mt-5 disable-tab-transition",touch:!1},{default:o(()=>[t(A,{value:"account"},{default:o(()=>[t(r)]),_:1})]),_:1},8,["modelValue"])])}const he=g($,[["render",ee]]);export{he as default};
