import{_ as V,o as a,c,g as e,ba as g,b0 as h,f as _,w as r,i as x,j as w,k,b as p,l as P,a as i,F as m,s as f,t as u,n as T,v as b,x as H,e as C,u as I,r as S}from"./index.f3c5980a.js";import{s as R}from"./Services.8ccc7918.js";import{V as B,a as O}from"./VAlert.ab366ec9.js";import{V as A}from"./VChip.e64011a9.js";import{V as N}from"./VTable.33dcea60.js";import{V as z,a as D,b as F,c as L}from"./VWindowItem.73a53de7.js";import"./index.2bd8ddc8.js";const U={mixins:[R],data(){return{userRoles:"",loading:!0,purchaseHistory:[],userIds:"",createdBy:"",headers:[{text:"PO Number",value:"po_number"},{text:"Order Date",value:"created_date"},{text:"Status",value:"po_status"},{text:"Order To",value:"brand_name"},{text:"Shipped To",value:"brand_name"},{text:"Action",value:"actions"}]}},computed:{filteredPurchaseHistory(){return this.purchaseHistory.filter(t=>t.po_status==="Acknowledged"||t.po_status==="Shared"||t.po_status==="Received")}},mounted(){this.createdBy=localStorage.getItem("createdby"),this.userIds=localStorage.getItem("userId"),this.userRoles=localStorage.getItem("userRole"),this.getPurchasehistorydetails(),setTimeout(()=>{this.loading=!1},4e3)},methods:{inputstock(t){console.log("check the detials",t.po_id),this.$router.push({name:"Createwarehouseinput",query:{po_id:t.po_id}})},getPurchasehistorydetails(){this.getPurchaseorder(this.userIds,this.userRoles).then(t=>{console.log("check the view purchase order",t.data),this.purchaseHistory=t.data,console.log("check the view purchase History",this.purchaseHistory)})},resolveStatusVariant(t){return t=="Acknowledged"?{color:"warning"}:{color:"info"}}}},W={key:0,class:"loading-container"},j=i("p",{class:"mb-0"}," The system is not retrieving the Purchase Histories from Purchase Orders. Please ensure that you have applied for Purchase Orders !",-1),q={class:"text-center"},E={class:"text-center"},G={class:"text-center"},J={class:"text-center"},K={class:"text-center"},M={key:0,class:"text-center"};function Q(t,n,v,y,l,d){return a(),c("div",null,[l.loading?(a(),c("div",W,[e(g,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):h("",!0),this.filteredPurchaseHistory==null?(a(),_(P,{key:1},{default:r(()=>[e(x,{cols:"12"},{default:r(()=>[e(w,{title:"Purchase Order View"},{default:r(()=>[e(k,null,{default:r(()=>[e(B,{color:"warning",variant:"tonal",class:"mb-4",border:"top"},{default:r(()=>[e(O,{class:"mb-1"},{default:r(()=>[p(" Are you sure you gave Purchase Orders? ")]),_:1}),j]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):h("",!0),this.filteredPurchaseHistory!=null?(a(),_(N,{key:2,headers:l.headers,items:d.filteredPurchaseHistory,"item-key":"dessert",class:"table-rounded",height:"500","fixed-header":""},{default:r(()=>[i("thead",null,[i("tr",null,[(a(!0),c(m,null,f(l.headers,s=>(a(),c("th",{class:"text-center",key:s},u(s.text),1))),128))])]),i("tbody",null,[(a(!0),c(m,null,f(d.filteredPurchaseHistory,(s,o)=>(a(),c("tr",{key:o},[i("td",q,u(s.po_number),1),i("td",E,u(s.created_date),1),i("td",G,[e(A,{color:d.resolveStatusVariant(s.po_status).color,class:"font-weight-medium",size:"small"},{default:r(()=>[p(u(s.po_status),1)]),_:2},1032,["color"])]),i("td",J,u(s.brand_name),1),i("td",K,u(s.brand_name),1),s.po_status!="Received"?(a(),c("td",M,[e(T,{icon:"",variant:"text",color:"success",class:"me-2",size:"small"},{default:r(()=>[e(b,{icon:"mdi-invoice-receive-outline",color:"success",size:"30",onClick:$=>d.inputstock(s)},null,8,["onClick"])]),_:2},1024)])):h("",!0)]))),128))])]),_:1},8,["headers","items"])):h("",!0)])}const X=V(U,[["render",Q]]),Y={components:{Viewpurchasehistories:X},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Purchase History",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=H(),this.activeTab=C(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function Z(t,n,v,y,l,d){const s=S("Viewpurchasehistories");return a(),c("div",null,[e(z,{modelValue:l.activeTab,"onUpdate:modelValue":n[0]||(n[0]=o=>l.activeTab=o),"show-arrows":""},{default:r(()=>[(a(!0),c(m,null,f(l.tabs,o=>(a(),_(L,{key:o.icon,value:o.tab},{default:r(()=>[e(b,{size:"20",start:"",icon:o.icon},null,8,["icon"]),p(" "+u(o.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),e(I),e(F,{modelValue:l.activeTab,"onUpdate:modelValue":n[1]||(n[1]=o=>l.activeTab=o),class:"mt-5 disable-tab-transition",touch:!1},{default:r(()=>[e(D,{value:"account"},{default:r(()=>[e(s)]),_:1})]),_:1},8,["modelValue"])])}const ie=V(Y,[["render",Z]]);export{ie as default};
