import{_ as I,o as _,c as g,a,g as s,b8 as x,b7 as N,f as y,w as o,i as p,j as w,k as A,b as h,l as b,a4 as O,ac as U,F as k,q as T,t as d,m as f,u as D,s as G,bv as q,bw as z,bE as M,bo as R,v as Q,e as L,r as E}from"./index.871767d0.js";import{s as Y}from"./Services.d06bbe8b.js";import{V as v}from"./VTextField.aaf29b18.js";import{V as H,a as K}from"./VAlert.54eb7a6e.js";import{V as C}from"./VForm.33d3da31.js";import{V as W}from"./VAutocomplete.da11b3e2.js";import{V as S}from"./VChip.f2e91746.js";import{V as F}from"./VTable.cd435fce.js";import{V as Z}from"./VPagination.6a80a0b8.js";import{V as B}from"./VSelect.dcb7acbd.js";import{V as P}from"./VDialog.e7293739.js";import{V as j}from"./VTextarea.36d86a3b.js";import{V as J}from"./VSnackbar.2c6d9b4a.js";import{V as X,a as $,b as tt,c as et}from"./VWindowItem.db87fc1a.js";import"./VCheckboxBtn.230e21ce.js";const at={mixins:[Y],data(){return{cityLoaction:[],filterlocation:!0,locationdata:"",cancelOrderdetails:{po_id:"",cancel_reason:"",po_status:6},workingRules:[t=>!!t||"Cancel Reason is required"],dialog3:!1,dialog4:!1,cancelOrder:{},maxPaginationPages:5,searchQuery:"",page:1,pageSize:10,today:this.getFormattedDate(new Date),loading:!1,loading2:!1,Viewtotals:{total_po_amount:"",total_taxableammout:"",total_cgst:"",total_sgst:""},Statusrules:[t=>!!t||"Status Is Required"],quantityrules:[t=>!!t||"Quantity Is Required"],dateRules:[t=>!!t||"Date is required"],cityID:"",locationid:"",snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,dialog2:!1,viewProduct:[],combinedProducts:[],totals:{Quantity:0,TaxableAmmount:0,CGST:0,SGST:0,Ammount:0},AllBrandproducts:[],selectedBrandId:"",Brandname:[],editProduct:[],VproductData:{brand_id:"",user_id:"",created_date:"",po_status:"",total_cgst:"",total_sgst:"",you_saved:"",po_id:"",po_number:"",delivery_date:"",sub_total:"",total_so_amount:"",total_quantity:"",products:[{brand_product_id:"",sku_name:"",hsn_code:"",mrp:"",quantity:"",uom:"",price_per_unit:"",taxable_amount:"",cgst:"",sgst:"",amount:"",total_give_margin:""}]},productData:{brand_id:"",user_id:"",created_date:"",po_status:"",total_cgst:"",total_sgst:"",you_saved:"",po_id:"",po_number:"",delivery_date:"","sub_total(taxable_amount_total)":"",total_so_amount:"",total_quantity:"",products:[{brand_product_id:"",sku_name:"",hsn_code:"",mrp:"",quantity:"",uom:"",price_per_unit:"",taxable_amount:"",cgst:"",sgst:"",amount:"",total_give_margin:""}]},dialog:!1,purchaseorders:[],userIds:"",userRoles:"",createdBy:"",headers:[{text:"Purchase Order",value:"po_number"},{text:"Order Date",value:"created_date"},{text:"Status",value:"po_status"},{text:"Order To",value:"brand_name"},{text:"Shipped To",value:"brand_name"},{text:"Total",value:"total_po_amount"},{text:"Invoice No",value:"invoice_number"},{text:"Invoice",value:"invoice"},{text:"DC",value:"delivery_challan"},{text:"Action",value:"actions"}],headers2:[{text:"Product Name",value:"sku_name"},{text:"UOM",value:"uom"},{text:"HSN",value:"hsn_code"},{text:"MRP",value:"mrp"},{text:"Quantity",value:"quantity"},{text:"Price/Unit",value:"price_per_unit"},{text:"TaxableAmount",value:"taxable_amount"},{text:"CGST",value:"csgt"},{text:"SGST",value:"sgst"},{text:"Amount",value:"amount"}],headers3:[{text:"Product Name",value:"sku_name"},{text:"UOM",value:"uom"},{text:"HSN",value:"hsn_code"},{text:"MRP",value:"mrp"},{text:"Quantity",value:"quantity"},{text:"Price/Unit",value:"price_per_unit"},{text:"TaxableAmount",value:"taxable_amount"},{text:"CGST",value:"csgt"},{text:"SGST",value:"sgst"},{text:"Amount",value:"amount"}]}},computed:{filteredPurchaseOrder(){const t=this.searchQuery.toLowerCase().trim();return this.purchaseorders.filter(l=>l.po_number&&l.po_number.toLowerCase().includes(t)||l.created_date&&l.created_date.toLowerCase().includes(t)||l.po_status&&l.po_status.toLowerCase().includes(t)||l.brand_name&&l.brand_name.toLowerCase().includes(t)||l.total_po_amount&&l.total_po_amount.toString().includes(t)||l.invoice_number&&l.invoice_number.toLowerCase().includes(t))},paginatedItems(){const t=(this.page-1)*this.pageSize,l=t+this.pageSize;return this.filteredPurchaseOrder.slice(t,l)},totalIndividualAmount(){return this.AllBrandproducts.reduce((t,l)=>{const c=parseFloat(l.mrp),i=parseFloat(l.quantity);if(!isNaN(c)&&!isNaN(i)){const n=c*i;return t+n}return t},0)},savedamount(){const t=parseFloat(this.allAmmount),l=this.totalIndividualAmount-(isNaN(t)?0:t);return Math.max(0,l).toFixed(2)},allAmmount(){const t=this.calculateTotalamount.reduce((l,c)=>l+parseFloat(c),0);return parseFloat(t.toFixed(2))},allSGSTAmount(){const t=this.calculatedSGSTAmount.reduce((l,c)=>l+parseFloat(c),0);return parseFloat(t.toFixed(2))},allCGSTAmount(){const t=this.calculatedCGSTAmount.reduce((l,c)=>l+parseFloat(c),0);return parseFloat(t.toFixed(2))},allTaxableAmmount(){const t=this.calculatedTaxableAmount.reduce((l,c)=>l+parseFloat(c),0);return parseFloat(t.toFixed(2))},allQuantity(){const t=this.AllBrandproducts.reduce((l,c)=>{const i=parseFloat(c.quantity);return isNaN(i)?l:l+i},0);return isNaN(t)?0:t.toFixed(0)},calculateTotalamount(){return this.AllBrandproducts.map((t,l)=>{const c=parseFloat(this.calculatedTaxableAmount[l]),i=parseFloat(this.calculatedCGSTAmount[l]),n=parseFloat(this.calculatedSGSTAmount[l]),r=c+i+n;return isNaN(r)?0:r.toFixed(2)})},calculatedSGSTAmount(){return this.AllBrandproducts.map((t,l)=>{const c=parseFloat(this.calculatedTaxableAmount[l]),i=parseFloat(t.sgst.replace("%","")),n=c*i/100;return isNaN(n)?0:n.toFixed(2)})},calculatedCGSTAmount(){return this.AllBrandproducts.map((t,l)=>{const c=parseFloat(this.calculatedTaxableAmount[l]),i=parseFloat(t.cgst.replace("%","")),n=c*i/100;return isNaN(n)?0:n.toFixed(2)})},calculateMargin(){return this.AllBrandproducts.map((t,l)=>{const c=parseFloat(t.mrp),i=parseFloat(t.total_given_margin.replace("%","")),n=c*i/100;return isNaN(n)?0:n.toFixed(2)})},calculatedPricePerUnit(){return this.AllBrandproducts.map((t,l)=>{const c=parseFloat(t.mrp),i=parseFloat(this.calculateMargin[l]),n=c-i;return isNaN(n)?0:n.toFixed(2)})},calculatedTaxableAmount(){return this.AllBrandproducts.map((t,l)=>{const c=parseFloat(t.quantity),i=this.calculatedPricePerUnit[l],n=parseFloat(t.cgst.replace("%","")),r=parseFloat(t.sgst.replace("%","")),e=parseFloat(i);if(c===0||isNaN(c)||isNaN(e))return 0;const m=i/(100+(n+r))*100*c;return isNaN(m)?0:m.toFixed(2)})}},mounted(){this.cityID=localStorage.getItem("city_id"),this.locationID=localStorage.getItem("location_id"),this.createdBy=localStorage.getItem("createdby"),this.userIds=localStorage.getItem("userId"),this.userRoles=localStorage.getItem("userRole"),this.handleBrandSelection(),this.getPurchaseorderdetails().then(()=>{this.loading=!1}).catch(t=>{console.error("Error fetching merchants:",t)})},methods:{locationdetails(){this.loading=!0,this.getPurchaseorder(this.cityID,this.locationdata).then(t=>{console.log("check the get res",t),t.status==1?(this.purchaseorders=t.data,this.purchaseorders.reverse(),this.loading=!1):this.loading=!1})},handleBrandSelection(){this.getCitylocation(this.cityID).then(t=>{this.cityLoaction=t.data.data.map(l=>({value:l.location_id,text:l.location}))})},getImageupdate(t){window.open(t,"_blank")},getImageupdate2(t){window.open(t,"_blank")},validateForm8(){this.$refs.purchaseOrderForm5.validate().then(t=>{t.valid==!0?this.cancelordersata():(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},cancelordersata(){console.log("check te data",this.cancelOrder.po_id);const t={po_id:this.cancelOrder.po_id,cancel_reason:this.cancelOrderdetails.cancel_reason,po_status:6};console.log("check the data",t),this.Cancelpurchaseorder(t).then(l=>{console.log("details data",l),l.data.status==1?(this.snackbar=!0,this.color="primary",this.cancelOrderdetails={},this.snackbarText=l.data.message,this.getPurchaseorderdetails().then(()=>{this.loading=!1}).catch(c=>{console.error("Error fetching merchants:",c)}),this.dialog4=!1):(this.snackbar=!0,this.color="on-background",this.dialog4=!1)})},cancelstock(t){this.dialog3=!0,console.log("test",t),this.cancelOrder=t},validateFormopen(){this.dialog4=!0,this.dialog3=!1},closeDialogform(){this.dialog3=!1},updatePagination(t){this.page=t},getFormattedDate(t){const l=t.getFullYear(),c=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${l}-${c}-${i}`},colorTGMmargin(t){return t?{color:"success"}:{color:"error"}},colorSGSTmargin(t){return t?{color:"success"}:{color:"error"}},colorCGSTmargin(t){return t?{color:"success"}:{color:"error"}},getPDFupdate(t){this.loading2=!0,this.getPurchasePDF(t).then(l=>{const c=l.data.po_file;this.loading2=!1,window.open(c,"_blank")})},DownloadPDF(t){if(t==null)this.snackbar=!0,this.snackbarText="PDF is not available",this.color="on-background";else{const l=t;window.open(l,"_blank")}},closedialog2(){this.dialog2=!1},validateForm(){this.$refs.purchaseOrderForm.validate().then(t=>{t.valid==!0?this.allQuantity>=1?this.saveProducteditData():(this.snackbar=!0,this.snackbarText="Please give Quantities",this.color="on-background"):(this.snackbar=!0,this.snackbarText="Please give all mandatory fields",this.color="on-background")})},deleteRow(t){const l=this.AllBrandproducts.indexOf(t);l!==-1&&this.AllBrandproducts.splice(l,1)},saveProducteditData(){const t={Draft:1,Created:2,Shared:3,Acknowledged:4,Received:5},l=Math.max(this.AllBrandproducts.length,this.calculatedPricePerUnit.length,this.calculatedTaxableAmount.length,this.calculatedCGSTAmount.length,this.calculatedSGSTAmount.length,this.calculateTotalamount.length),c=[];for(let r=0;r<l;r++){const e=this.AllBrandproducts[r];!e||e.quantity<=0||c.push({brand_product_id:e.brand_product_id,sku_name:e.sku_name,hsn_code:e.hsn_code,mrp:e.mrp,quantity:`${e.quantity}`,uom:e.uom,price_per_unit:this.calculatedPricePerUnit[r]||"0",taxable_amount:this.calculatedTaxableAmount[r]||"0",csgt:this.calculatedCGSTAmount[r]||"0",sgst:this.calculatedSGSTAmount[r]||"0",amount:this.calculateTotalamount[r]||"0",sgst_percentage:e.sgst.includes("%")?`${e.sgst}`:`${e.sgst}%`,cgst_percentage:e.cgst.includes("%")?`${e.cgst}`:`${e.cgst}%`,total_give_margin:e.total_given_margin})}const i=this.editProduct.map(r=>r.brand_product_id),n={brand_id:this.selectedBrandId,user_id:this.userIds,created_date:this.productData.created_date,delivery_date:this.productData.delivery_date,po_status:t[this.productData.po_status],total_cgst:`${this.allCGSTAmount}`,total_sgst:`${this.allSGSTAmount}`,you_saved:`${this.savedamount}`,sub_total:`${this.allTaxableAmmount}`,total_po_amount:`${this.allAmmount}`,total_quantity:`${this.allQuantity}`,po_id:this.productData.po_id,po_number:this.productData.po_number,products:c.concat(this.editProduct.filter(r=>!i.includes(r.brand_product_id)).map(r=>({brand_product_id:r.brand_product_id,sku_name:r.sku_name,hsn_code:r.hsn_code,mrp:r.mrp,quantity:r.quantity,uom:r.uom,price_per_unit:r.price_per_unit,taxable_amount:r.taxable_amount,csgt:r.cgst,sgst:r.sgst,amount:r.amount,total_give_margin:r.total_give_margin})))};this.postupdatePurchaseorder(n).then(r=>{r.status==1?(this.snackbar=!0,this.color="primary",this.formData={},this.snackbarText=r.message,this.getPurchaseorderdetails(),this.dialog=!1):(this.snackbar=!0,this.color="on-background")})},preventPaste(t){const c=(t.clipboardData||window.clipboardData).getData("text");/^[0-9]+$/.test(c)||t.preventDefault()},preventDecimal(t){(t.key==="."||t.key===","||t.key==="+"||t.key==="-"||t.keyCode===189||t.keyCode===109)&&t.preventDefault()},colorTGMmargin(t){return t?{color:"success"}:{color:"error"}},colorSGSTmargin(t){return t?{color:"success"}:{color:"error"}},colorCGSTmargin(t){return t?{color:"success"}:{color:"error"}},getBrandsdata(){this.getBrands(this.cityID,this.locationID).then(t=>{this.Brandname=t.data})},viewrow(t){this.dialog2=!0,this.VproductData.brand_name=t.brand_name,this.VproductData.created_date=t.created_date,this.VproductData.po_status=t.po_status,this.VproductData.po_number=t.po_number,this.VproductData.po_id=t.po_id,this.VproductData.total_po_amount=t.total_po_amount,this.VproductData.total_cgst=t.total_cgst,this.VproductData.total_sgst=t.total_sgst,this.VproductData.you_saved=t.you_saved,this.VproductData.total_quantity=t.total_quantity,this.VproductData.sub_total=t.sub_total,this.VproductData.delivery_date=t.delivery_date,this.viewProduct=t.products},editrow(t){this.dialog=!0,this.productData.brand_name=t.brand_name,this.productData.created_date=t.created_date,this.productData.delivery_date=t.delivery_date,this.productData.po_status=t.po_status,this.productData.po_number=t.po_number,this.productData.po_id=t.po_id,this.editProduct=t.products,this.productData.brand_name===t.brand_name&&(this.selectedBrandId=t.brand_id,this.getBrandproducts(this.selectedBrandId).then(l=>{this.AllBrandproducts=l.data,this.AllBrandproducts=this.AllBrandproducts.map(c=>{const i=this.editProduct.find(n=>n.brand_product_id==c.brand_product_id);return{...c,quantity:i?i.quantity:0}})}))},closeDialog(){this.dialog=!1},getPurchaseorderdetails(){return new Promise((t,l)=>{this.cityID!=""&&this.locationID!==""&&(this.loading=!0,this.filterlocation=!1,this.getPurchaseorder(this.cityID,this.locationID).then(c=>{this.purchaseorders=c.data,this.purchaseorders.reverse(),t()}).catch(c=>{console.error("Error fetching merchants:",c),l(c)}))})},colorPOstatus(t){return t=="Created"?{color:"primary"}:t=="Draft"?{color:"success"}:t=="Acknowledged"?{color:"warning"}:t=="Received"?{color:"success"}:t=="Shared"?{color:"info"}:{color:"error"}}}},u=t=>(q("data-v-bd1b75f2"),t=t(),z(),t),lt={style:{"max-width":"400px"}},st={key:0,id:"app"},ot=M('<div id="loading-bg" data-v-bd1b75f2><div class="loading-logo" data-v-bd1b75f2><img src="'+R+'" height="60" width="68" alt="Logo" data-v-bd1b75f2></div><div class="loading" data-v-bd1b75f2><div class="effect-1 effects" data-v-bd1b75f2></div><div class="effect-2 effects" data-v-bd1b75f2></div><div class="effect-3 effects" data-v-bd1b75f2></div></div></div>',1),rt=[ot],nt={key:1,class:"loading-container"},dt=u(()=>a("p",{class:"mb-0"}," The system is not retrieving the Purchase Orders. Please ensure that you have applied for Purchase Orders !",-1)),ct={key:0},ut=u(()=>a("td",{colspan:"16",class:"text-center"},[a("h1",null,"No data found !")],-1)),it=[ut],_t={class:"text-center"},ht={class:"text-center"},pt={class:"text-center"},mt={class:"text-center"},gt={class:"text-center"},ft={class:"text-center"},xt={class:"text-center"},bt={class:"text-center"},vt={class:"text-center"},yt={class:"text-center"},Vt={class:"text-center"},Dt={class:"text-center"},St={class:"text-center"},kt={class:"text-center"},Tt={class:"text-center"},wt={class:"text-center"},At=u(()=>a("br",null,null,-1)),Ct={class:"text-center"},Pt={class:"text-center"},Ft=u(()=>a("br",null,null,-1)),Bt={class:"text-center"},Gt=u(()=>a("br",null,null,-1)),It={class:"text-center"},Nt=u(()=>a("td",{class:"text-center"},"Total",-1)),Ot=u(()=>a("td",null,null,-1)),Ut=u(()=>a("td",null,null,-1)),qt=u(()=>a("td",null,null,-1)),zt={class:"text-center"},Mt=u(()=>a("td",null,null,-1)),Rt={class:"text-center"},Qt={class:"text-center"},Lt={class:"text-center"},Et={class:"text-center"},Yt=u(()=>a("td",null,null,-1)),Ht=u(()=>a("tr",null,[a("td",{class:"text-left",style:{"font-weight":"Bold"}}," Tax Details: "),a("td",{colspan:"4",class:"text-right"}),a("td",{colspan:"4",class:"text-left",style:{"font-weight":"Bold"}}," Amounts: "),a("td",{colspan:"4",class:"text-center"})],-1)),Kt=u(()=>a("td",{class:"text-left"},"CGST",-1)),Wt={colspan:"4",class:"text-right"},Zt=u(()=>a("td",{colspan:"4",class:"text-left"}," SubTotal ",-1)),jt={colspan:"4",class:"text-center"},Jt=u(()=>a("td",{class:"text-left"},"SGST",-1)),Xt={colspan:"4",class:"text-right"},$t=u(()=>a("td",{colspan:"4",class:"text-left"}," Total ",-1)),te={colspan:"4",class:"text-center"},ee=u(()=>a("td",{class:"text-left"},null,-1)),ae=u(()=>a("td",{colspan:"4",class:"text-right"},null,-1)),le=u(()=>a("td",{colspan:"4",class:"text-left"}," Advance ",-1)),se={colspan:"4",class:"text-center"},oe=u(()=>a("td",{class:"text-left"},null,-1)),re=u(()=>a("td",{colspan:"4",class:"text-right"},null,-1)),ne=u(()=>a("td",{colspan:"4",class:"text-left"}," Balance ",-1)),de={colspan:"4",class:"text-center"},ce=u(()=>a("td",{class:"text-left"},null,-1)),ue=u(()=>a("td",{colspan:"4",class:"text-right"},null,-1)),ie=u(()=>a("td",{colspan:"4",class:"text-left"}," You Saved ",-1)),_e={colspan:"4",class:"text-center"},he={class:"text-center"},pe={class:"text-center"},me={class:"text-center"},ge={class:"text-center"},fe={class:"text-center"},xe={class:"text-center"},be={class:"text-center"},ve={class:"text-center"},ye={class:"text-center"},Ve={class:"text-center"},De=u(()=>a("td",{class:"text-center"},"Total",-1)),Se=u(()=>a("td",null,null,-1)),ke=u(()=>a("td",null,null,-1)),Te=u(()=>a("td",null,null,-1)),we={class:"text-center"},Ae=u(()=>a("td",null,null,-1)),Ce={class:"text-center"},Pe={class:"text-center"},Fe={class:"text-center"},Be={class:"text-center"},Ge=u(()=>a("td",null,null,-1)),Ie=u(()=>a("tr",null,[a("td",{class:"text-left",style:{"font-weight":"Bold"}}," Tax Details: "),a("td",{colspan:"4",class:"text-right"}),a("td",{colspan:"4",class:"text-left",style:{"font-weight":"Bold"}}," Amounts: "),a("td",{colspan:"4",class:"text-center"})],-1)),Ne=u(()=>a("td",{class:"text-left"},"CGST",-1)),Oe={colspan:"4",class:"text-right"},Ue=u(()=>a("td",{colspan:"4",class:"text-left"}," SubTotal ",-1)),qe={colspan:"4",class:"text-center"},ze=u(()=>a("td",{class:"text-left"},"SGST",-1)),Me={colspan:"4",class:"text-right"},Re=u(()=>a("td",{colspan:"4",class:"text-left"}," Total ",-1)),Qe={colspan:"4",class:"text-center"},Le=u(()=>a("td",{class:"text-left"},null,-1)),Ee=u(()=>a("td",{colspan:"4",class:"text-right"},null,-1)),Ye=u(()=>a("td",{colspan:"4",class:"text-left"}," Advance ",-1)),He={colspan:"4",class:"text-center"},Ke=u(()=>a("td",{class:"text-left"},null,-1)),We=u(()=>a("td",{colspan:"4",class:"text-right"},null,-1)),Ze=u(()=>a("td",{colspan:"4",class:"text-left"}," Balance ",-1)),je={colspan:"4",class:"text-center"},Je=u(()=>a("td",{class:"text-left"},null,-1)),Xe=u(()=>a("td",{colspan:"4",class:"text-right"},null,-1)),$e=u(()=>a("td",{colspan:"4",class:"text-left"}," You Saved ",-1)),ta={colspan:"4",class:"text-center"};function ea(t,l,c,i,n,r){return _(),g("div",null,[a("div",lt,[s(v,{class:"mb-3",modelValue:n.searchQuery,"onUpdate:modelValue":l[0]||(l[0]=e=>n.searchQuery=e),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),n.loading?(_(),g("div",st,rt)):x("",!0),n.loading2?(_(),g("div",nt,[s(N,{height:"5",color:"error",indeterminate:"",class:"custom-loader","full-width":""})])):x("",!0),this.purchaseorders==null?(_(),y(b,{key:2},{default:o(()=>[s(p,{cols:"12"},{default:o(()=>[s(w,{title:"Purchase Order View"},{default:o(()=>[s(A,null,{default:o(()=>[s(H,{color:"warning",variant:"tonal",class:"mb-4",border:"top"},{default:o(()=>[s(K,{class:"mb-1"},{default:o(()=>[h(" Are you sure you gave Purchase Orders? ")]),_:1}),dt]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):x("",!0),O(s(w,{class:"mb-2"},{default:o(()=>[s(A,null,{default:o(()=>[s(b,null,{default:o(()=>[s(p,{cols:"12"},{default:o(()=>[s(C,{class:"mt-6"},{default:o(()=>[s(b,null,{default:o(()=>[s(p,{md:"6",cols:"12"},{default:o(()=>[s(W,{modelValue:n.locationdata,"onUpdate:modelValue":[l[1]||(l[1]=e=>n.locationdata=e),l[2]||(l[2]=e=>r.locationdetails())],label:"Location",items:this.cityLoaction,"item-value":"value","item-title":"text","menu-props":{maxHeight:200}},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),[[U,n.filterlocation]]),this.purchaseorders!=null?(_(),y(F,{key:3,headers:n.headers,items:this.paginatedItems,class:"table-rounded",height:"500","fixed-header":""},{default:o(()=>[a("thead",null,[a("tr",null,[(_(!0),g(k,null,T(n.headers,e=>(_(),g("th",{class:"text-center",key:e},d(e.text),1))),128))])]),a("tbody",null,[r.filteredPurchaseOrder.length===0?(_(),g("tr",ct,it)):x("",!0),(_(!0),g(k,null,T(this.paginatedItems,(e,m)=>(_(),g("tr",{key:m},[a("td",_t,d(e.po_number),1),a("td",ht,d(e.created_date),1),a("td",pt,[s(S,{color:r.colorPOstatus(e.po_status).color,class:"font-weight-medium",size:"small"},{default:o(()=>[h(d(e.po_status),1)]),_:2},1032,["color"])]),a("td",mt,d(e.brand_name),1),a("td",gt,d(e.brand_name==e.brand_name?"Mouriya Spiritual & Naturals(BIZKINGZ)":e.brand_name),1),a("td",ft,"\u20B9"+d(e.total_po_amount),1),a("td",xt,d(e.invoice_number),1),a("td",bt,[e.invoice!=""?(_(),y(f,{key:0,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:V=>r.getImageupdate(e.invoice)},{default:o(()=>[s(D,{color:"success",icon:"ic:twotone-photo-camera-back",size:"26"})]),_:2},1032,["onClick"])):x("",!0)]),a("td",vt,[e.delivery_challan!=""?(_(),y(f,{key:0,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:V=>r.getImageupdate2(e.delivery_challan)},{default:o(()=>[s(D,{color:"success",icon:"ic:twotone-photo-camera-back",size:"26"})]),_:2},1032,["onClick"])):x("",!0)]),a("td",yt,[e.po_status!="Acknowledged"&&e.po_status!="Shared"&&e.po_status!="Received"&&e.po_status!="Cancelled"?(_(),y(f,{key:0,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:V=>r.editrow(e)},{default:o(()=>[s(D,{color:"warning",icon:"ri-pencil-line",size:"22"})]),_:2},1032,["onClick"])):x("",!0),e.po_status=="Acknowledged"||e.po_status=="Shared"||e.po_status=="Received"||e.po_status=="Cancelled"?(_(),y(f,{key:1,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:V=>r.viewrow(e)},{default:o(()=>[s(D,{color:"success",icon:"basil:eye-outline",size:"22"})]),_:2},1032,["onClick"])):x("",!0),e.po_status=="Acknowledged"||e.po_status=="Shared"||e.po_status=="Received"?(_(),y(f,{key:2,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:V=>r.getPDFupdate(e.po_id)},{default:o(()=>[s(D,{color:"error",icon:"iwwa:file-pdf",size:"26"})]),_:2},1032,["onClick"])):x("",!0),e.po_status=="Acknowledged"||e.po_status=="Shared"||e.po_status=="Draft"?(_(),y(f,{key:3,icon:"",variant:"text",color:"error",class:"me-2",size:"small",onClick:V=>r.cancelstock(e)},{default:o(()=>[s(D,{icon:"material-symbols:cancel-outline",color:"error",size:"30"})]),_:2},1032,["onClick"])):x("",!0)])]))),128))])]),_:1},8,["headers","items"])):x("",!0),s(Z,{modelValue:n.page,"onUpdate:modelValue":l[3]||(l[3]=e=>n.page=e),length:Math.ceil(r.filteredPurchaseOrder.length/n.pageSize),onInput:r.updatePagination,max:n.maxPaginationPages},null,8,["modelValue","length","onInput","max"]),s(P,{modelValue:n.dialog,"onUpdate:modelValue":l[10]||(l[10]=e=>n.dialog=e),"max-width":"1000"},{default:o(()=>[s(w,{title:"Purchase Order",class:"mb-2"},{default:o(()=>[s(A,null,{default:o(()=>[s(b,null,{default:o(()=>[s(p,{cols:"12"},{default:o(()=>[s(C,{class:"mt-6",ref:"purchaseOrderForm"},{default:o(()=>[s(b,null,{default:o(()=>[s(p,{md:"6",cols:"12"},{default:o(()=>[s(v,{modelValue:this.productData.brand_name,"onUpdate:modelValue":l[4]||(l[4]=e=>this.productData.brand_name=e),label:"Brand or Manufacturer",readonly:""},null,8,["modelValue"])]),_:1}),s(p,{cols:"12",md:"6"},{default:o(()=>[s(v,{modelValue:this.createdBy,"onUpdate:modelValue":l[5]||(l[5]=e=>this.createdBy=e),label:"Created By",readonly:""},null,8,["modelValue"])]),_:1}),s(p,{cols:"12",md:"6"},{default:o(()=>[s(v,{modelValue:this.productData.created_date,"onUpdate:modelValue":l[6]||(l[6]=e=>this.productData.created_date=e),type:"date",label:"Date",readonly:""},null,8,["modelValue"])]),_:1}),s(p,{md:"6",cols:"12"},{default:o(()=>[s(B,{modelValue:this.productData.po_status,"onUpdate:modelValue":l[7]||(l[7]=e=>this.productData.po_status=e),label:"PO Status",items:["Draft","Created","Shared","Acknowledged"],rules:n.Statusrules},null,8,["modelValue","rules"])]),_:1}),s(p,{md:"6",cols:"12"},{default:o(()=>[s(v,{modelValue:this.productData.delivery_date,"onUpdate:modelValue":l[8]||(l[8]=e=>this.productData.delivery_date=e),type:"date",label:"Delivery Date",min:n.today,rules:n.dateRules},null,8,["modelValue","min","rules"])]),_:1}),s(G),s(p,{cols:"12"},{default:o(()=>[s(F,{headers:n.headers2,items:n.AllBrandproducts},{default:o(()=>[a("thead",null,[a("tr",null,[(_(!0),g(k,null,T(n.headers2,e=>(_(),g("th",{class:"text-center",key:e},d(e.text),1))),128))])]),a("tbody",null,[(_(!0),g(k,null,T(this.AllBrandproducts,(e,m)=>(_(),g("tr",{key:m},[a("td",Vt,d(e.sku_name),1),a("td",Dt,d(e.uom),1),a("td",St,d(e.hsn_code),1),a("td",kt,"\u20B9"+d(e.mrp),1),a("td",Tt,[s(v,{onKeydown:r.preventDecimal,onPaste:r.preventPaste,type:"number",min:"0",max:"20000",modelValue:e.quantity,"onUpdate:modelValue":V=>e.quantity=V,style:{"min-width":"80px"}},null,8,["onKeydown","onPaste","modelValue","onUpdate:modelValue"])]),a("td",wt,[h(" \u20B9 "+d(r.calculatedPricePerUnit[m])+" ",1),At,s(S,{color:r.colorTGMmargin(e.total_given_margin).color,class:"font-weight-medium",size:"small"},{default:o(()=>[h(" ("+d(e.total_given_margin)+") ",1)]),_:2},1032,["color"])]),a("td",Ct,"\u20B9"+d(r.calculatedTaxableAmount[m]),1),a("td",Pt,[h(" \u20B9"+d(r.calculatedCGSTAmount[m])+" ",1),Ft,s(S,{color:r.colorCGSTmargin(e.cgst).color,class:"font-weight-medium",size:"small"},{default:o(()=>[h(" ("+d(e.cgst)+") ",1)]),_:2},1032,["color"])]),a("td",Bt,[h(" \u20B9"+d(r.calculatedSGSTAmount[m])+" ",1),Gt,s(S,{color:r.colorSGSTmargin(e.sgst).color,class:"font-weight-medium",size:"small"},{default:o(()=>[h(" ("+d(e.sgst)+") ",1)]),_:2},1032,["color"])]),a("td",It,"\u20B9"+d(r.calculateTotalamount[m]),1),a("td",null,[s(f,{icon:"",variant:"text",color:"error",class:"me-2",size:"small",onClick:V=>r.deleteRow(e)},{default:o(()=>[s(D,{icon:"mdi-minus-circle-outline",size:"24"})]),_:2},1032,["onClick"])])]))),128))]),a("tfoot",null,[a("tr",null,[Nt,Ot,Ut,qt,a("td",zt,d(r.allQuantity),1),Mt,a("td",Rt,"\u20B9"+d(r.allTaxableAmmount),1),a("td",Qt,"\u20B9"+d(r.allCGSTAmount),1),a("td",Lt,"\u20B9"+d(r.allSGSTAmount),1),a("td",Et,"\u20B9"+d(r.allAmmount),1),Yt]),Ht,a("tr",null,[Kt,a("td",Wt," \u20B9"+d(r.allCGSTAmount),1),Zt,a("td",jt," \u20B9"+d(r.allAmmount),1)]),a("tr",null,[Jt,a("td",Xt," \u20B9"+d(r.allSGSTAmount),1),$t,a("td",te," \u20B9"+d(r.allAmmount),1)]),a("tr",null,[ee,ae,le,a("td",se," \u20B9"+d(n.totals.Quantity),1)]),a("tr",null,[oe,re,ne,a("td",de," \u20B9"+d(r.allAmmount),1)]),a("tr",null,[ce,ue,ie,a("td",_e," \u20B9"+d(r.savedamount),1)])])]),_:1},8,["headers","items"])]),_:1}),s(p,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:o(()=>[s(f,{onClick:r.validateForm},{default:o(()=>[h("Save")]),_:1},8,["onClick"]),s(f,{color:"secondary",variant:"tonal",onClick:l[9]||(l[9]=e=>r.closeDialog())},{default:o(()=>[h(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(P,{modelValue:n.dialog2,"onUpdate:modelValue":l[17]||(l[17]=e=>n.dialog2=e),"max-width":"1000"},{default:o(()=>[s(w,{title:"Purchase Order",class:"mb-2"},{default:o(()=>[s(A,null,{default:o(()=>[s(b,null,{default:o(()=>[s(p,{cols:"12"},{default:o(()=>[s(C,{class:"mt-6"},{default:o(()=>[s(b,null,{default:o(()=>[s(p,{md:"6",cols:"12"},{default:o(()=>[s(B,{modelValue:this.VproductData.brand_name,"onUpdate:modelValue":l[11]||(l[11]=e=>this.VproductData.brand_name=e),label:"Brand or Manufacturer",readonly:""},null,8,["modelValue"])]),_:1}),s(p,{cols:"12",md:"6"},{default:o(()=>[s(v,{modelValue:this.createdBy,"onUpdate:modelValue":l[12]||(l[12]=e=>this.createdBy=e),label:"Created By",readonly:""},null,8,["modelValue"])]),_:1}),s(p,{cols:"12",md:"6"},{default:o(()=>[s(v,{modelValue:this.VproductData.created_date,"onUpdate:modelValue":l[13]||(l[13]=e=>this.VproductData.created_date=e),type:"date",label:"Date",readonly:""},null,8,["modelValue"])]),_:1}),s(p,{md:"6",cols:"12"},{default:o(()=>[s(B,{modelValue:this.VproductData.po_status,"onUpdate:modelValue":l[14]||(l[14]=e=>this.VproductData.po_status=e),label:"PO Status",readonly:""},null,8,["modelValue"])]),_:1}),s(p,{md:"6",cols:"12"},{default:o(()=>[s(v,{modelValue:this.VproductData.delivery_date,"onUpdate:modelValue":l[15]||(l[15]=e=>this.VproductData.delivery_date=e),type:"date",label:"Delivery Date",readonly:""},null,8,["modelValue"])]),_:1}),s(G),s(p,{cols:"12"},{default:o(()=>[s(F,{headers:n.headers3,items:n.viewProduct},{default:o(()=>[a("thead",null,[a("tr",null,[(_(!0),g(k,null,T(n.headers3,e=>(_(),g("th",{class:"text-center",key:e},d(e.text),1))),128))])]),a("tbody",null,[(_(!0),g(k,null,T(this.viewProduct,(e,m)=>(_(),g("tr",{key:m},[a("td",he,d(e.sku_name),1),a("td",pe,d(e.uom),1),a("td",me,d(e.hsn_code),1),a("td",ge," \u20B9"+d(e.mrp),1),a("td",fe,d(e.quantity),1),a("td",xe,[h(" \u20B9"+d(e.price_per_unit)+" ",1),s(S,{color:r.colorTGMmargin(e.total_give_margin).color,class:"font-weight-medium",size:"small"},{default:o(()=>[h(" ("+d(e.total_give_margin)+") ",1)]),_:2},1032,["color"])]),a("td",be," \u20B9"+d(e.taxable_amount),1),a("td",ve,[h(" \u20B9"+d(e.csgt)+" ",1),s(S,{color:r.colorTGMmargin(e.cgst_percentage).color,class:"font-weight-medium",size:"small"},{default:o(()=>[h(" ("+d(e.cgst_percentage)+") ",1)]),_:2},1032,["color"])]),a("td",ye,[h(" \u20B9"+d(e.sgst)+" ",1),s(S,{color:r.colorTGMmargin(e.sgst_percentage).color,class:"font-weight-medium",size:"small"},{default:o(()=>[h(" ("+d(e.sgst_percentage)+") ",1)]),_:2},1032,["color"])]),a("td",Ve," \u20B9"+d(e.amount),1)]))),128))]),a("tfoot",null,[a("tr",null,[De,Se,ke,Te,a("td",we,d(this.VproductData.total_quantity),1),Ae,a("td",Ce,"\u20B9"+d(this.VproductData.sub_total),1),a("td",Pe,"\u20B9"+d(this.VproductData.total_cgst),1),a("td",Fe,"\u20B9"+d(this.VproductData.total_sgst),1),a("td",Be,"\u20B9"+d(this.VproductData.total_po_amount),1),Ge]),Ie,a("tr",null,[Ne,a("td",Oe," \u20B9"+d(this.VproductData.total_cgst),1),Ue,a("td",qe," \u20B9"+d(this.VproductData.total_po_amount),1)]),a("tr",null,[ze,a("td",Me," \u20B9"+d(this.VproductData.total_sgst),1),Re,a("td",Qe," \u20B9"+d(this.VproductData.total_po_amount),1)]),a("tr",null,[Le,Ee,Ye,a("td",He," \u20B9"+d(n.totals.Quantity),1)]),a("tr",null,[Ke,We,Ze,a("td",je," \u20B9"+d(this.VproductData.total_po_amount),1)]),a("tr",null,[Je,Xe,$e,a("td",ta," \u20B9"+d(this.VproductData.you_saved),1)])])]),_:1},8,["headers","items"])]),_:1}),s(p,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:o(()=>[s(f,{color:"primary",onClick:l[16]||(l[16]=e=>r.closedialog2())},{default:o(()=>[h(" Close ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(P,{modelValue:n.dialog3,"onUpdate:modelValue":l[19]||(l[19]=e=>n.dialog3=e),"max-width":"400",persistent:""},{default:o(()=>[s(w,{title:"Cancel Order",class:"mb-2"},{default:o(()=>[s(A,null,{default:o(()=>[s(b,null,{default:o(()=>[s(p,{cols:"12"},{default:o(()=>[s(C,{class:"mt-4",ref:"purchaseOrderForm"},{default:o(()=>[s(b,null,{default:o(()=>[s(p,{md:"12",cols:"12"},{default:o(()=>[h(" Are you sure want to cancel the order ? ")]),_:1}),s(p,{md:"12",cols:"12"},{default:o(()=>[s(f,{onClick:r.validateFormopen},{default:o(()=>[h("Yes")]),_:1},8,["onClick"]),h(" \xA0 "),s(f,{color:"secondary",variant:"tonal",onClick:l[18]||(l[18]=e=>r.closeDialogform())},{default:o(()=>[h(" No ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(P,{modelValue:n.dialog4,"onUpdate:modelValue":l[22]||(l[22]=e=>n.dialog4=e),"max-width":"500",persistent:""},{default:o(()=>[s(w,{title:"Cancel Order",class:"mb-2"},{default:o(()=>[s(A,null,{default:o(()=>[s(b,null,{default:o(()=>[s(p,{cols:"12"},{default:o(()=>[s(C,{class:"mt-4",ref:"purchaseOrderForm5"},{default:o(()=>[s(b,null,{default:o(()=>[s(p,{md:"12",cols:"12"},{default:o(()=>[s(j,{modelValue:this.cancelOrderdetails.cancel_reason,"onUpdate:modelValue":l[20]||(l[20]=e=>this.cancelOrderdetails.cancel_reason=e),label:"Cancel Reason","row-height":"30",rows:"4",variant:"filled","auto-grow":"",shaped:"",rules:n.workingRules},null,8,["modelValue","rules"])]),_:1}),s(p,{md:"12",cols:"12"},{default:o(()=>[s(f,{onClick:r.validateForm8},{default:o(()=>[h("Save")]),_:1},8,["onClick"]),h(" \xA0 "),s(f,{color:"secondary",variant:"tonal",onClick:l[21]||(l[21]=e=>t.closeDialog4())},{default:o(()=>[h(" No ")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(J,{modelValue:n.snackbar,"onUpdate:modelValue":l[23]||(l[23]=e=>n.snackbar=e),timeout:2e3,color:n.color},{default:o(()=>[h(d(n.snackbarText),1)]),_:1},8,["modelValue","color"])])}const aa=I(at,[["render",ea],["__scopeId","data-v-bd1b75f2"]]),la={components:{Viewpurchaseorders:aa},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Purchase Order",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=Q(),this.activeTab=L(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function sa(t,l,c,i,n,r){const e=E("Viewpurchaseorders");return _(),g("div",null,[s(X,{modelValue:n.activeTab,"onUpdate:modelValue":l[0]||(l[0]=m=>n.activeTab=m),"show-arrows":""},{default:o(()=>[(_(!0),g(k,null,T(n.tabs,m=>(_(),y(et,{key:m.icon,value:m.tab},{default:o(()=>[s(D,{size:"20",start:"",icon:m.icon},null,8,["icon"]),h(" "+d(m.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(G),s(tt,{modelValue:n.activeTab,"onUpdate:modelValue":l[1]||(l[1]=m=>n.activeTab=m),class:"mt-5 disable-tab-transition",touch:!1},{default:o(()=>[s($,{value:"account"},{default:o(()=>[s(e)]),_:1})]),_:1},8,["modelValue"])])}const va=I(la,[["render",sa]]);export{va as default};
