import{_ as b,o as a,c as n,g as t,ba as V,b0 as d,f as h,w as o,i as w,j as S,k as T,b as f,l as C,a as l,F as m,s as p,t as c,n as y,v,x as D,e as O,u as z,r as A}from"./index.a28698aa.js";import{s as B}from"./Services.8ccc7918.js";import{V as F,a as N}from"./VAlert.2541d0b0.js";import{V as P}from"./VChip.efe16ed4.js";import{V as H}from"./VTable.3848be69.js";import{V as R,a as I,b as L,c as U}from"./VWindowItem.c1e4a163.js";import"./index.2bd8ddc8.js";const W={mixins:[B],data(){return{loading2:!1,loaded:!1,loading:!0,saleshistory:[],headers:[{text:"Sales Order",value:"salesorder"},{text:"Order Date",value:"orderdate"},{text:"Status",value:"status"},{text:"Order From",value:"orderfrom"},{text:"Shipped To",value:"shippedto"},{text:"Order Value",value:"ordervalue"},{text:"Action",value:"actions",sortable:!1}]}},computed:{filteredSalesHistory(){return this.saleshistory.filter(s=>s.so_status==="Acknowledged"||s.so_status==="Delivered"||s.so_status==="Received"||s.so_status==="Shipped")}},mounted(){this.getSalesorderdetails(),setTimeout(()=>{this.loading=!1},2500)},methods:{getPDFupdate(s){this.loading2=!0,window.open(s,"_blank"),this.loading2=!1},outputstock(s){console.log("check the detials",s.so_id),this.$router.push({name:"Createwarehouseoutput",query:{so_id:s.so_id}})},resolveStatusVariant(s){return s=="Acknowledged"?{color:"warning"}:{color:"success"}},getSalesorderdetails(){this.getSalesorders().then(s=>{this.saleshistory=s.data,console.log("check rhe res",this.saleshistory)})}}},j={key:0,class:"loading-container"},q={key:1,class:"loading-container"},E=l("p",{class:"mb-0"}," The system is not retrieving the Sales Orders. Please ensure that you have applied for Sales Orders !",-1),G={class:"text-center"},J={class:"text-center"},K={class:"text-center"},M={class:"text-center"},Q={class:"text-center"},X={class:"text-center"},Y={class:"text-center"};function Z(s,u,g,x,r,_){return a(),n("div",null,[r.loading?(a(),n("div",j,[t(V,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):d("",!0),r.loading2?(a(),n("div",q,[t(V,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):d("",!0),this.saleshistory==null?(a(),h(C,{key:2},{default:o(()=>[t(w,{cols:"12"},{default:o(()=>[t(S,{title:"Sales Order View"},{default:o(()=>[t(T,null,{default:o(()=>[t(F,{color:"warning",variant:"tonal",class:"mb-4",border:"top"},{default:o(()=>[t(N,{class:"mb-1"},{default:o(()=>[f(" Are you sure you gave Sales Orders? ")]),_:1}),E]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):d("",!0),this.saleshistory!=null?(a(),h(H,{key:3,headers:r.headers,items:r.saleshistory,class:"table-rounded",height:"500","fixed-header":""},{default:o(()=>[l("thead",null,[l("tr",null,[(a(!0),n(m,null,p(r.headers,e=>(a(),n("th",{class:"text-center",key:e},c(e.text),1))),128))])]),l("tbody",null,[(a(!0),n(m,null,p(this.filteredSalesHistory,(e,i)=>(a(),n("tr",{key:i},[l("td",G,c(e.so_number),1),l("td",J,c(e.created_date),1),l("td",K,[t(P,{color:_.resolveStatusVariant(e.so_status).color,class:"font-weight-medium",size:"small"},{default:o(()=>[f(c(e.so_status),1)]),_:2},1032,["color"])]),l("td",M,c(e.merchant_name),1),l("td",Q,c(e.merchant_name),1),l("td",X,c(e.total_so_amount),1),l("td",Y,[e.so_status!="Shipped"&&e.so_status!="Delivered"?(a(),h(y,{key:0,icon:"",variant:"text",color:"success",class:"me-2",size:"small"},{default:o(()=>[t(v,{icon:"mdi-invoice-receive-outline",color:"success",size:"30",onClick:k=>_.outputstock(e)},null,8,["onClick"])]),_:2},1024)):d("",!0),e.so_status=="Shipped"||e.so_status=="Delivered"?(a(),h(y,{key:1,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:k=>_.getPDFupdate(e.delivery_challan_file)},{default:o(()=>[t(v,{color:"error",icon:"iwwa:file-pdf",size:"26"})]),_:2},1032,["onClick"])):d("",!0)])]))),128))])]),_:1},8,["headers","items"])):d("",!0)])}const $=b(W,[["render",Z]]),ee={components:{Saleshistory:$},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Sales History",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=D(),this.activeTab=O(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function te(s,u,g,x,r,_){const e=A("Saleshistory");return a(),n("div",null,[t(R,{modelValue:r.activeTab,"onUpdate:modelValue":u[0]||(u[0]=i=>r.activeTab=i),"show-arrows":""},{default:o(()=>[(a(!0),n(m,null,p(r.tabs,i=>(a(),h(U,{key:i.icon,value:i.tab},{default:o(()=>[t(v,{size:"20",start:"",icon:i.icon},null,8,["icon"]),f(" "+c(i.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(z),t(L,{modelValue:r.activeTab,"onUpdate:modelValue":u[1]||(u[1]=i=>r.activeTab=i),class:"mt-5 disable-tab-transition",touch:!1},{default:o(()=>[t(I,{value:"account"},{default:o(()=>[t(e)]),_:1})]),_:1},8,["modelValue"])])}const ce=b(ee,[["render",te]]);export{ce as default};
