import{_ as y,o as a,c as d,g as s,bj as v,bg as h,f as _,w as o,i as k,j as w,k as T,b as p,l as C,a as l,F as m,q as f,t as u,m as V,u as g,v as z,e as I,s as D,r as O}from"./index.9e8238bc.js";import{s as P}from"./Services.a0afbe6c.js";import{V as A,a as B}from"./VAlert.941969da.js";import{V as F}from"./VChip.61664a67.js";import{V as H}from"./VTable.47b87660.js";import{V as N}from"./VPagination.1c6f1b80.js";import{V as R,a as U,b as j,c as q}from"./VWindowItem.c8530ca1.js";import"./index.2bd8ddc8.js";const L={mixins:[P],data(){return{page:1,pageSize:10,loading2:!1,loaded:!1,loading:!0,saleshistory:[],headers:[{text:"Sales Order",value:"salesorder"},{text:"Order Date",value:"orderdate"},{text:"Status",value:"status"},{text:"Order From",value:"orderfrom"},{text:"Shipped To",value:"shippedto"},{text:"Order Value",value:"ordervalue"},{text:"Action",value:"actions",sortable:!1}]}},computed:{filteredSalesHistory(){return this.saleshistory.filter(e=>e.so_status==="Acknowledged"||e.so_status==="Delivered"||e.so_status==="Received"||e.so_status==="Shipped")},paginatedItems(){const e=(this.page-1)*this.pageSize,n=e+this.pageSize;return this.filteredSalesHistory.slice(e,n)}},mounted(){this.getSalesorderdetails(),setTimeout(()=>{this.loading=!1},2500)},methods:{updatePagination(e){this.page=e},getPDFupdate(e){this.loading2=!0,window.open(e,"_blank"),this.loading2=!1},outputstock(e){console.log("check the detials",e.so_id),this.$router.push({name:"Createwarehouseoutput",query:{so_id:e.so_id}})},resolveStatusVariant(e){return e=="Acknowledged"?{color:"warning"}:{color:"success"}},getSalesorderdetails(){this.getSalesorders().then(e=>{this.saleshistory=e.data,this.saleshistory.reverse(),console.log("check rhe res",this.saleshistory)})}}},W={key:0,class:"loading-container"},E={key:1,class:"loading-container"},M=l("p",{class:"mb-0"}," The system is not retrieving the Sales Orders. Please ensure that you have applied for Sales Orders !",-1),G={class:"text-center"},J={class:"text-center"},K={class:"text-center"},Q={class:"text-center"},X={class:"text-center"},Y={class:"text-center"},Z={class:"text-center"};function $(e,n,b,x,r,c){return a(),d("div",null,[r.loading?(a(),d("div",W,[s(v,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):h("",!0),r.loading2?(a(),d("div",E,[s(v,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):h("",!0),this.saleshistory==null?(a(),_(C,{key:2},{default:o(()=>[s(k,{cols:"12"},{default:o(()=>[s(w,{title:"Sales Order View"},{default:o(()=>[s(T,null,{default:o(()=>[s(A,{color:"warning",variant:"tonal",class:"mb-4",border:"top"},{default:o(()=>[s(B,{class:"mb-1"},{default:o(()=>[p(" Are you sure you gave Sales Orders? ")]),_:1}),M]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):h("",!0),this.saleshistory!=null?(a(),_(H,{key:3,headers:r.headers,items:c.paginatedItems,class:"table-rounded",height:"500","fixed-header":""},{default:o(()=>[l("thead",null,[l("tr",null,[(a(!0),d(m,null,f(r.headers,t=>(a(),d("th",{class:"text-center",key:t},u(t.text),1))),128))])]),l("tbody",null,[(a(!0),d(m,null,f(this.paginatedItems,(t,i)=>(a(),d("tr",{key:i},[l("td",G,u(t.so_number),1),l("td",J,u(t.created_date),1),l("td",K,[s(F,{color:c.resolveStatusVariant(t.so_status).color,class:"font-weight-medium",size:"small"},{default:o(()=>[p(u(t.so_status),1)]),_:2},1032,["color"])]),l("td",Q,u(t.merchant_name),1),l("td",X,u(t.merchant_name),1),l("td",Y,u(t.total_so_amount),1),l("td",Z,[t.so_status!="Shipped"&&t.so_status!="Delivered"?(a(),_(V,{key:0,icon:"",variant:"text",color:"success",class:"me-2",size:"small"},{default:o(()=>[s(g,{icon:"mdi-invoice-receive-outline",color:"success",size:"30",onClick:S=>c.outputstock(t)},null,8,["onClick"])]),_:2},1024)):h("",!0),t.so_status=="Shipped"||t.so_status=="Delivered"?(a(),_(V,{key:1,icon:"",variant:"text",color:"default",class:"me-2",size:"x-small",onClick:S=>c.getPDFupdate(t.delivery_challan_file)},{default:o(()=>[s(g,{color:"error",icon:"iwwa:file-pdf",size:"26"})]),_:2},1032,["onClick"])):h("",!0)])]))),128))])]),_:1},8,["headers","items"])):h("",!0),s(N,{modelValue:r.page,"onUpdate:modelValue":n[0]||(n[0]=t=>r.page=t),length:Math.ceil(c.filteredSalesHistory.length/r.pageSize),onInput:c.updatePagination},null,8,["modelValue","length","onInput"])])}const ee=y(L,[["render",$]]),te={components:{Saleshistory:ee},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Sales History",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=z(),this.activeTab=I(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function se(e,n,b,x,r,c){const t=O("Saleshistory");return a(),d("div",null,[s(R,{modelValue:r.activeTab,"onUpdate:modelValue":n[0]||(n[0]=i=>r.activeTab=i),"show-arrows":""},{default:o(()=>[(a(!0),d(m,null,f(r.tabs,i=>(a(),_(q,{key:i.icon,value:i.tab},{default:o(()=>[s(g,{size:"20",start:"",icon:i.icon},null,8,["icon"]),p(" "+u(i.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),s(D),s(j,{modelValue:r.activeTab,"onUpdate:modelValue":n[1]||(n[1]=i=>r.activeTab=i),class:"mt-5 disable-tab-transition",touch:!1},{default:o(()=>[s(U,{value:"account"},{default:o(()=>[s(t)]),_:1})]),_:1},8,["modelValue"])])}const ce=y(te,[["render",se]]);export{ce as default};
