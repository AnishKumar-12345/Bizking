import{_,o as i,c as d,g as t,b5 as v,b6 as w,w as n,i as m,j as y,k as T,l as V,s as g,a as l,F as h,q as p,t as c,b,v as M,e as C,r as S,f as U,u as I}from"./index.89c3bcd2.js";import{s as L}from"./Services.7881b1f6.js";import{V as N}from"./VForm.2a801050.js";import{V as z}from"./VAutocomplete.a602cfa1.js";import{V as f}from"./VTextField.2bb12e56.js";import{V as B}from"./VTable.40471282.js";import{V as F}from"./VPagination.9a0a5039.js";import{V as Q}from"./VSnackbar.ed58e230.js";import{V as O,a as P,b as D,c as E}from"./VWindowItem.598181d2.js";import"./index.2bd8ddc8.js";import"./VSelect.a4e0af3a.js";import"./VCheckboxBtn.7fb327e2.js";import"./VChip.2a54a4ff.js";const H={mixins:[L],components:{},data(){return{loading:!0,searchQuery:"",page:1,pageSize:10,snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,marchantstocksdata:[],selectedmerchants:null,merchantName:[],stockUpdatedate:null,headers:[{text:"Brand Name",value:"brand_name"},{text:"SKU",value:"sku_name"},{text:"UOM",value:"uom"},{text:"Physical SOH",value:"physical_soh"},{text:"Closing",value:"closing"},{text:"Opening",value:"opening"}]}},computed:{filteredMerchant(){const o=this.searchQuery.toLowerCase().trim();return this.marchantstocksdata.filter(e=>e.brand_name&&e.brand_name.toLowerCase().includes(o)||e.sku_name&&e.sku_name.toLowerCase().includes(o)||e.uom&&e.uom.toLowerCase().includes(o)||e.physical_soh&&e.physical_soh.toLowerCase().includes(o)||e.closing&&e.closing.toLowerCase().includes(o)||e.opening&&e.opening.toLowerCase().includes(o))},paginatedItems(){const o=(this.page-1)*this.pageSize,e=o+this.pageSize;return this.filteredMerchant.slice(o,e)},merchants(){return this.merchantName.map(o=>o.merchant_uid)}},mounted(){this.getMerchantdetails(),setTimeout(()=>{this.loading=!1},4e3)},methods:{handleMerchantSelection(){const o=this.merchantName.find(e=>e.merchant_uid===this.selectedmerchants);o&&(this.selectedMerchantId=o.merchant_id,this.getMerchantproductsstock(this.selectedMerchantId).then(e=>{e.status==1?(this.stockUpdatedate=e.data.stock_updated_date,this.marchantstocksdata=e.data.products):(this.marchantstocksdata=[],this.snackbar=!0,this.snackbarText=e.message,this.color="on-background")}).catch(e=>{console.error("Error fetching merchant products:",e)}))},getMerchantdetails(){this.getMerchants().then(o=>{this.merchantName=o.data.data})}}},R={key:0,class:"loading-container"},W={style:{"max-width":"400px"}},j={class:"text-center"},q={class:"text-center"},A={class:"text-center"},K={class:"text-center"},G={class:"text-center"},J={class:"text-center"};function X(o,e,k,x,s,u){return i(),d("div",null,[s.loading?(i(),d("div",R,[t(v,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):w("",!0),t(V,null,{default:n(()=>[t(m,{cols:"12"},{default:n(()=>[t(y,{title:"Merchants",class:"mb-4"},{default:n(()=>[t(T,null,{default:n(()=>[t(N,{class:"mt-6",ref:"purchaseOrderForm"},{default:n(()=>[t(V,null,{default:n(()=>[t(m,{md:"6",cols:"12"},{default:n(()=>[t(z,{modelValue:s.selectedmerchants,"onUpdate:modelValue":[e[0]||(e[0]=a=>s.selectedmerchants=a),u.handleMerchantSelection],label:"Store or Merchant",items:u.merchants,"menu-props":{maxHeight:200}},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(m,{cols:"12",md:"6"},{default:n(()=>[t(f,{modelValue:this.stockUpdatedate,"onUpdate:modelValue":e[1]||(e[1]=a=>this.stockUpdatedate=a),label:"Stock Updated Date",readonly:""},null,8,["modelValue"])]),_:1}),t(g),t(m,{cols:"12"},{default:n(()=>[l("div",W,[t(f,{class:"mb-3",modelValue:s.searchQuery,"onUpdate:modelValue":e[2]||(e[2]=a=>s.searchQuery=a),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),t(B,{headers:s.headers,items:this.paginatedItems},{default:n(()=>[l("thead",null,[l("tr",null,[(i(!0),d(h,null,p(s.headers,a=>(i(),d("th",{class:"text-center",key:a},c(a.text),1))),128))])]),l("tbody",null,[(i(!0),d(h,null,p(this.paginatedItems,(a,r)=>(i(),d("tr",{key:r},[l("td",j,c(a.brand_name),1),l("td",q,c(a.sku_name),1),l("td",A,c(a.uom),1),l("td",K,c(a.physical_soh),1),l("td",G,c(a.closing),1),l("td",J,c(a.opening),1)]))),128))])]),_:1},8,["headers","items"]),t(F,{modelValue:s.page,"onUpdate:modelValue":e[3]||(e[3]=a=>s.page=a),length:Math.ceil(u.filteredMerchant.length/s.pageSize),onInput:o.updatePagination},null,8,["modelValue","length","onInput"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),t(Q,{modelValue:s.snackbar,"onUpdate:modelValue":e[4]||(e[4]=a=>s.snackbar=a),timeout:3500,color:s.color},{default:n(()=>[b(c(s.snackbarText),1)]),_:1},8,["modelValue","color"])])}const Y=_(H,[["render",X]]),Z={components:{Viewstore:Y},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Store Stocks",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=M(),this.activeTab=C(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function $(o,e,k,x,s,u){const a=S("Viewstore");return i(),d("div",null,[t(O,{modelValue:s.activeTab,"onUpdate:modelValue":e[0]||(e[0]=r=>s.activeTab=r),"show-arrows":""},{default:n(()=>[(i(!0),d(h,null,p(s.tabs,r=>(i(),U(E,{key:r.icon,value:r.tab},{default:n(()=>[t(I,{size:"20",start:"",icon:r.icon},null,8,["icon"]),b(" "+c(r.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(g),t(D,{modelValue:s.activeTab,"onUpdate:modelValue":e[1]||(e[1]=r=>s.activeTab=r),class:"mt-5 disable-tab-transition",touch:!1},{default:n(()=>[t(P,{value:"account"},{default:n(()=>[t(a)]),_:1})]),_:1},8,["modelValue"])])}const he=_(Z,[["render",$]]);export{he as default};
