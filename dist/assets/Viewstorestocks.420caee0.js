import{_ as w,r as M,o as r,c as d,g as o,b7 as T,b8 as g,w as n,i as V,j as x,k as D,l as y,s as U,a as s,f as S,m as v,b as h,F as _,q as f,t as i,bq as N,bs as O,bo as I,v as P,e as E,u as B}from"./index.6fab7df6.js";import{s as z}from"./Services.1c6b0dde.js";import{V as Q}from"./VForm.6f4c5848.js";import{V as F}from"./VAutocomplete.8e7223a1.js";import{V as p}from"./VTextField.29332737.js";import{V as C}from"./VTable.a4e5168f.js";import{V as H}from"./VPagination.46c64e8b.js";import{V as K}from"./VDialog.c4a56a32.js";import{V as j}from"./VSnackbar.48fa8d81.js";import{V as q,a as A,b as R,c as W}from"./VWindowItem.e8cea33b.js";import"./VSelect.e083373f.js";import"./VCheckboxBtn.8d36f67d.js";import"./VChip.3a7a00f2.js";const G={mixins:[z],components:{},data(){return{dialogHeaders:[{text:"Brand Name",value:"brand_name"},{text:"SKU",value:"sku_name"},{text:"UOM",value:"uom"},{text:"Physical SOH",value:"physical_soh"},{text:"Closing",value:"closing"},{text:"Opening",value:"opening"}],editDialog:!1,editedItem:{physical_soh:null,closing:null,opening:null},loading:!0,loading2:!1,loading3:!1,searchQuery:"",page:1,pageSize:10,snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,marchantstocksdata:[],editmarchantstocksdata:[],selectedmerchants:null,merchantName:[],stockUpdatedate:null,headers:[{text:"Brand Name",value:"brand_name"},{text:"SKU",value:"sku_name"},{text:"UOM",value:"uom"},{text:"Physical SOH",value:"physical_soh"},{text:"Closing",value:"closing"},{text:"Opening",value:"opening"}],headers2:[{text:"Brand Name",value:"brand_name"},{text:"SKU",value:"sku_name"},{text:"UOM",value:"uom"},{text:"Physical SOH",value:"physical_soh"},{text:"Closing",value:"closing"},{text:"Opening",value:"opening"}]}},computed:{filterededitMerchant(){const a=this.searchQuery.toLowerCase().trim();return this.editmarchantstocksdata.filter(e=>e.brand_name&&e.brand_name.toLowerCase().includes(a)||e.sku_name&&e.sku_name.toLowerCase().includes(a)||e.uom&&e.uom.toLowerCase().includes(a)||e.physical_soh&&e.physical_soh.toLowerCase().includes(a)||e.closing&&e.closing.toLowerCase().includes(a)||e.opening&&e.opening.toLowerCase().includes(a))},paginatededitItems(){const a=(this.page-1)*this.pageSize,e=a+this.pageSize;return this.filterededitMerchant.slice(a,e)},filteredMerchant(){const a=this.searchQuery.toLowerCase().trim();return this.marchantstocksdata.filter(e=>e.brand_name&&e.brand_name.toLowerCase().includes(a)||e.sku_name&&e.sku_name.toLowerCase().includes(a)||e.uom&&e.uom.toLowerCase().includes(a)||e.physical_soh&&e.physical_soh.toLowerCase().includes(a)||e.closing&&e.closing.toLowerCase().includes(a)||e.opening&&e.opening.toLowerCase().includes(a))},paginatedItems(){const a=(this.page-1)*this.pageSize,e=a+this.pageSize;return this.filteredMerchant.slice(a,e)},merchants(){return this.merchantName.map(a=>a.merchant_uid)}},mounted(){this.getMerchantdetails().then(()=>{this.loading=!1}).catch(a=>{console.error("Error fetching merchants:",a)})},methods:{openEditDialog(a){console.log("Merchant_id",a),this.editDialog=!0,this.loading3=!0,this.getMerchantproductsstock(a).then(e=>{console.log("Merchant Products:",e),e.status==1?(this.editmarchantstocksdata=e.data.products,this.loading3=!1):(this.editmarchantstocksdata=[],this.snackbar=!0,this.snackbarText=e.message,this.color="on-background")}).catch(e=>{console.error("Error fetching merchant products:",e)})},handleMerchantSelection(){const a=this.merchantName.find(e=>e.merchant_uid===this.selectedmerchants);a&&(this.selectedMerchantId=a.merchant_id,this.loading2=!0,this.getMerchantproductsstock(this.selectedMerchantId).then(e=>{console.log("Merchant Products:",e),e.status==1?(this.stockUpdatedate=e.data.stock_updated_date,this.marchantstocksdata=e.data.products,this.loading2=!1):(this.marchantstocksdata=[],this.snackbar=!0,this.snackbarText=e.message,this.color="on-background")}).catch(e=>{console.error("Error fetching merchant products:",e)}))},updatePagination(a){this.page=a},getMerchantdetails(){return new Promise((a,e)=>{this.getMerchants().then(u=>{this.merchantName=u.data.data,a()}).catch(u=>{console.error("Error fetching merchants:",u),e(u)})})}}},J={key:0,class:"loading-container"},X={style:{"max-width":"400px"}},Y={key:0,id:"app"},Z=s("div",{id:"loading-bg"},[s("div",{class:"loading-logo"},[s("img",{src:I,height:"60",width:"68",alt:"Logo"})]),s("div",{class:"loading"},[s("div",{class:"effect-1 effects"}),s("div",{class:"effect-2 effects"}),s("div",{class:"effect-3 effects"})])],-1),$=[Z],ee={class:"d-flex justify-end mt-4"},te={key:0},ae=s("td",{colspan:"16",class:"text-center"},[s("h1",null,"No data found !")],-1),se=[ae],oe={class:"text-center"},le={class:"text-center"},ne={class:"text-center"},re={class:"text-center"},de={class:"text-center"},ie={class:"text-center"},ce={key:0,id:"app"},ue=s("div",{id:"loading-bg"},[s("div",{class:"loading-logo"},[s("img",{src:I,height:"60",width:"68",alt:"Logo"})]),s("div",{class:"loading"},[s("div",{class:"effect-1 effects"}),s("div",{class:"effect-2 effects"}),s("div",{class:"effect-3 effects"})])],-1),he=[ue],me={class:"text-center"},ge={class:"text-center"},pe={class:"text-center"},_e={class:"text-center"},fe={class:"text-center"},Ve={class:"text-center"};function be(a,e,u,L,l,c){const b=M("VCardContent");return r(),d("div",null,[l.loading?(r(),d("div",J,[o(T,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):g("",!0),o(y,null,{default:n(()=>[o(V,{cols:"12"},{default:n(()=>[o(x,{title:"Merchants",class:"mb-4"},{default:n(()=>[o(D,null,{default:n(()=>[o(Q,{class:"mt-6",ref:"purchaseOrderForm"},{default:n(()=>[o(y,null,{default:n(()=>[o(V,{md:"6",cols:"12"},{default:n(()=>[o(F,{modelValue:l.selectedmerchants,"onUpdate:modelValue":[e[0]||(e[0]=t=>l.selectedmerchants=t),c.handleMerchantSelection],label:"Store or Merchant",items:c.merchants,"menu-props":{maxHeight:200}},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),o(V,{cols:"12",md:"6"},{default:n(()=>[o(p,{modelValue:this.stockUpdatedate,"onUpdate:modelValue":e[1]||(e[1]=t=>this.stockUpdatedate=t),label:"Stock Updated Date",readonly:""},null,8,["modelValue"])]),_:1}),o(U),o(V,{cols:"12"},{default:n(()=>[s("div",X,[o(p,{class:"mb-3",modelValue:l.searchQuery,"onUpdate:modelValue":e[2]||(e[2]=t=>l.searchQuery=t),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),l.loading2?(r(),d("div",Y,$)):g("",!0),s("div",ee,[l.selectedmerchants!==null?(r(),S(v,{key:0,color:"primary",onClick:e[3]||(e[3]=t=>c.openEditDialog(this.selectedMerchantId))},{default:n(()=>[h(" Edit Merchant ")]),_:1})):g("",!0)]),o(C,{headers:l.headers,items:this.paginatedItems},{default:n(()=>[s("thead",null,[s("tr",null,[(r(!0),d(_,null,f(l.headers,t=>(r(),d("th",{class:"text-center",key:t},i(t.text),1))),128))])]),s("tbody",null,[c.filteredMerchant.length===0?(r(),d("tr",te,se)):g("",!0),(r(!0),d(_,null,f(this.paginatedItems,(t,k)=>(r(),d("tr",{key:k},[s("td",oe,i(t.brand_name),1),s("td",le,i(t.sku_name),1),s("td",ne,i(t.uom),1),s("td",re,i(t.physical_soh),1),s("td",de,i(t.closing),1),s("td",ie,i(t.opening),1)]))),128))])]),_:1},8,["headers","items"]),o(H,{modelValue:l.page,"onUpdate:modelValue":e[4]||(e[4]=t=>l.page=t),length:Math.ceil(c.filteredMerchant.length/l.pageSize),onInput:c.updatePagination},null,8,["modelValue","length","onInput"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),o(K,{modelValue:l.editDialog,"onUpdate:modelValue":e[7]||(e[7]=t=>l.editDialog=t),"max-width":"800px",persistent:""},{default:n(()=>[o(x,null,{default:n(()=>[o(N,null,{default:n(()=>[h("Edit Stock Data")]),_:1}),o(b,null,{default:n(()=>[l.loading3?(r(),d("div",ce,he)):g("",!0),o(C,{headers:l.headers,items:this.paginatededitItems},{default:n(()=>[s("thead",null,[s("tr",null,[(r(!0),d(_,null,f(l.headers2,t=>(r(),d("th",{class:"text-center",key:t},i(t.text),1))),128))])]),s("tbody",null,[(r(!0),d(_,null,f(this.paginatededitItems,(t,k)=>(r(),d("tr",{key:k},[s("td",me,i(t.brand_name),1),s("td",ge,i(t.sku_name),1),s("td",pe,i(t.uom),1),s("td",_e,[o(p,{modelValue:t.physical_soh,"onUpdate:modelValue":m=>t.physical_soh=m},null,8,["modelValue","onUpdate:modelValue"])]),s("td",fe,[o(p,{modelValue:t.closing,"onUpdate:modelValue":m=>t.closing=m},null,8,["modelValue","onUpdate:modelValue"])]),s("td",Ve,[o(p,{modelValue:t.opening,"onUpdate:modelValue":m=>t.opening=m},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])]),_:1},8,["headers","items"])]),_:1}),o(O,null,{default:n(()=>[o(v,{onClick:e[5]||(e[5]=t=>a.validateForm())},{default:n(()=>[h("Save")]),_:1}),o(v,{onClick:e[6]||(e[6]=t=>l.editDialog=!1)},{default:n(()=>[h("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(j,{modelValue:l.snackbar,"onUpdate:modelValue":e[8]||(e[8]=t=>l.snackbar=t),timeout:3500,color:l.color},{default:n(()=>[h(i(l.snackbarText),1)]),_:1},8,["modelValue","color"])])}const ke=w(G,[["render",be]]),ve={components:{Viewstore:ke},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Store Stocks",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=P(),this.activeTab=E(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function xe(a,e,u,L,l,c){const b=M("Viewstore");return r(),d("div",null,[o(q,{modelValue:l.activeTab,"onUpdate:modelValue":e[0]||(e[0]=t=>l.activeTab=t),"show-arrows":""},{default:n(()=>[(r(!0),d(_,null,f(l.tabs,t=>(r(),S(W,{key:t.icon,value:t.tab},{default:n(()=>[o(B,{size:"20",start:"",icon:t.icon},null,8,["icon"]),h(" "+i(t.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),o(U),o(R,{modelValue:l.activeTab,"onUpdate:modelValue":e[1]||(e[1]=t=>l.activeTab=t),class:"mt-5 disable-tab-transition",touch:!1},{default:n(()=>[o(A,{value:"account"},{default:n(()=>[o(b)]),_:1})]),_:1},8,["modelValue"])])}const Ee=w(ve,[["render",xe]]);export{Ee as default};
