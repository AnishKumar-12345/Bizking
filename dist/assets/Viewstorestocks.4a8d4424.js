import{_,o as i,c as d,g as t,b5 as y,b6 as w,w as n,i as m,j as T,k as C,l as V,s as g,a as l,F as h,q as p,t as c,m as M,u as b,b as k,v as S,e as U,r as I,f as L}from"./index.986c8b57.js";import{s as N}from"./Services.7881b1f6.js";import{V as B}from"./VForm.45c60dc8.js";import{V as z}from"./VAutocomplete.fe04c61c.js";import{V as f}from"./VTextField.78fcf9d0.js";import{V as F}from"./VTable.4ed8be04.js";import{V as Q}from"./VPagination.51a41da9.js";import{V as O}from"./VSnackbar.34661357.js";import{V as P,a as A,b as D,c as E}from"./VWindowItem.11d828b3.js";import"./index.2bd8ddc8.js";import"./VSelect.1c2f57cf.js";import"./VCheckboxBtn.11a37a8c.js";import"./VChip.10586e46.js";const R={mixins:[N],components:{},data(){return{loading:!0,searchQuery:"",page:1,pageSize:10,snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,marchantstocksdata:[],selectedmerchants:null,merchantName:[],stockUpdatedate:null,headers:[{text:"Brand Name",value:"brand_name"},{text:"SKU",value:"sku_name"},{text:"UOM",value:"uom"},{text:"Physical SOH",value:"physical_soh"},{text:"Closing",value:"closing"},{text:"Opening",value:"opening"},{text:"Actions",value:"action"}]}},computed:{filteredMerchant(){const s=this.searchQuery.toLowerCase().trim();return this.marchantstocksdata.filter(e=>e.brand_name&&e.brand_name.toLowerCase().includes(s)||e.sku_name&&e.sku_name.toLowerCase().includes(s)||e.uom&&e.uom.toLowerCase().includes(s)||e.physical_soh&&e.physical_soh.toLowerCase().includes(s)||e.closing&&e.closing.toLowerCase().includes(s)||e.opening&&e.opening.toLowerCase().includes(s))},paginatedItems(){const s=(this.page-1)*this.pageSize,e=s+this.pageSize;return this.filteredMerchant.slice(s,e)},merchants(){return this.merchantName.map(s=>s.merchant_uid)}},mounted(){this.getMerchantdetails(),setTimeout(()=>{this.loading=!1},4e3)},methods:{handleMerchantSelection(){const s=this.merchantName.find(e=>e.merchant_uid===this.selectedmerchants);s&&(this.selectedMerchantId=s.merchant_id,this.getMerchantproductsstock(this.selectedMerchantId).then(e=>{e.status==1?(this.stockUpdatedate=e.data.stock_updated_date,this.marchantstocksdata=e.data.products):(this.marchantstocksdata=[],this.snackbar=!0,this.snackbarText=e.message,this.color="on-background")}).catch(e=>{console.error("Error fetching merchant products:",e)}))},getMerchantdetails(){this.getMerchants().then(s=>{this.merchantName=s.data.data})}}},W={key:0,class:"loading-container"},j={style:{"max-width":"400px"}},q={class:"text-center"},H={class:"text-center"},K={class:"text-center"},G={class:"text-center"},J={class:"text-center"},X={class:"text-center"},Y={class:"text-center"};function Z(s,e,x,v,o,u){return i(),d("div",null,[o.loading?(i(),d("div",W,[t(y,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):w("",!0),t(V,null,{default:n(()=>[t(m,{cols:"12"},{default:n(()=>[t(T,{title:"Merchants",class:"mb-4"},{default:n(()=>[t(C,null,{default:n(()=>[t(B,{class:"mt-6",ref:"purchaseOrderForm"},{default:n(()=>[t(V,null,{default:n(()=>[t(m,{md:"6",cols:"12"},{default:n(()=>[t(z,{modelValue:o.selectedmerchants,"onUpdate:modelValue":[e[0]||(e[0]=a=>o.selectedmerchants=a),u.handleMerchantSelection],label:"Store or Merchant",items:u.merchants},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(m,{cols:"12",md:"6"},{default:n(()=>[t(f,{modelValue:this.stockUpdatedate,"onUpdate:modelValue":e[1]||(e[1]=a=>this.stockUpdatedate=a),label:"Stock Updated Date",readonly:""},null,8,["modelValue"])]),_:1}),t(g),t(m,{cols:"12"},{default:n(()=>[l("div",j,[t(f,{class:"mb-3",modelValue:o.searchQuery,"onUpdate:modelValue":e[2]||(e[2]=a=>o.searchQuery=a),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),t(F,{headers:o.headers,items:this.paginatedItems},{default:n(()=>[l("thead",null,[l("tr",null,[(i(!0),d(h,null,p(o.headers,a=>(i(),d("th",{class:"text-center",key:a},c(a.text),1))),128))])]),l("tbody",null,[(i(!0),d(h,null,p(this.paginatedItems,(a,r)=>(i(),d("tr",{key:r},[l("td",q,c(a.brand_name),1),l("td",H,c(a.sku_name),1),l("td",K,c(a.uom),1),l("td",G,c(a.physical_soh),1),l("td",J,c(a.closing),1),l("td",X,c(a.opening),1),l("td",Y,[t(M,{icon:"",variant:"text",color:"default",class:"mb-1 mt-2",size:"small",style:{"margin-left":"auto",display:"block"},onClick:e[3]||(e[3]=ae=>s.openproductdialog())},{default:n(()=>[t(b,{icon:"ri-pencil-line",size:"22",color:"#BA8B32"})]),_:1})])]))),128))])]),_:1},8,["headers","items"]),t(Q,{modelValue:o.page,"onUpdate:modelValue":e[4]||(e[4]=a=>o.page=a),length:Math.ceil(u.filteredMerchant.length/o.pageSize),onInput:s.updatePagination},null,8,["modelValue","length","onInput"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),t(O,{modelValue:o.snackbar,"onUpdate:modelValue":e[5]||(e[5]=a=>o.snackbar=a),timeout:3500,color:o.color},{default:n(()=>[k(c(o.snackbarText),1)]),_:1},8,["modelValue","color"])])}const $=_(R,[["render",Z]]),ee={components:{Viewstore:$},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Store Stocks",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=S(),this.activeTab=U(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function te(s,e,x,v,o,u){const a=I("Viewstore");return i(),d("div",null,[t(P,{modelValue:o.activeTab,"onUpdate:modelValue":e[0]||(e[0]=r=>o.activeTab=r),"show-arrows":""},{default:n(()=>[(i(!0),d(h,null,p(o.tabs,r=>(i(),L(E,{key:r.icon,value:r.tab},{default:n(()=>[t(b,{size:"20",start:"",icon:r.icon},null,8,["icon"]),k(" "+c(r.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(g),t(D,{modelValue:o.activeTab,"onUpdate:modelValue":e[1]||(e[1]=r=>o.activeTab=r),class:"mt-5 disable-tab-transition",touch:!1},{default:n(()=>[t(A,{value:"account"},{default:n(()=>[t(a)]),_:1})]),_:1},8,["modelValue"])])}const fe=_(ee,[["render",te]]);export{fe as default};
