import{_ as V,o as c,c as d,g as t,b5 as w,b6 as f,w as l,i as m,j as y,k as M,l as g,s as b,a as n,F as h,q as p,t as i,b as k,bn as T,v as C,e as S,r as U,f as I,u as L}from"./index.de79b275.js";import{s as N}from"./Services.b9a31770.js";import{V as z}from"./VForm.17b39114.js";import{V as B}from"./VAutocomplete.695f59da.js";import{V as _}from"./VTextField.826bb172.js";import{V as F}from"./VTable.e9b47113.js";import{V as P}from"./VPagination.8096ddfe.js";import{V as Q}from"./VSnackbar.068b1629.js";import{V as O,a as D,b as E,c as H}from"./VWindowItem.f0e80cfc.js";import"./index.2bd8ddc8.js";import"./VSelect.a66015f2.js";import"./VCheckboxBtn.2ba45b02.js";import"./VChip.12ee3bf1.js";const R={mixins:[N],components:{},data(){return{loading:!0,loading2:!1,searchQuery:"",page:1,pageSize:10,snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,marchantstocksdata:[],selectedmerchants:null,merchantName:[],stockUpdatedate:null,headers:[{text:"Brand Name",value:"brand_name"},{text:"SKU",value:"sku_name"},{text:"UOM",value:"uom"},{text:"Physical SOH",value:"physical_soh"},{text:"Closing",value:"closing"},{text:"Opening",value:"opening"}]}},computed:{filteredMerchant(){const o=this.searchQuery.toLowerCase().trim();return this.marchantstocksdata.filter(e=>e.brand_name&&e.brand_name.toLowerCase().includes(o)||e.sku_name&&e.sku_name.toLowerCase().includes(o)||e.uom&&e.uom.toLowerCase().includes(o)||e.physical_soh&&e.physical_soh.toLowerCase().includes(o)||e.closing&&e.closing.toLowerCase().includes(o)||e.opening&&e.opening.toLowerCase().includes(o))},paginatedItems(){const o=(this.page-1)*this.pageSize,e=o+this.pageSize;return this.filteredMerchant.slice(o,e)},merchants(){return this.merchantName.map(o=>o.merchant_uid)}},mounted(){this.getMerchantdetails(),setTimeout(()=>{this.loading=!1},4e3)},methods:{handleMerchantSelection(){const o=this.merchantName.find(e=>e.merchant_uid===this.selectedmerchants);o&&(this.selectedMerchantId=o.merchant_id,this.loading2=!0,this.getMerchantproductsstock(this.selectedMerchantId).then(e=>{console.log("Merchant Products:",e),e.status==1?(this.stockUpdatedate=e.data.stock_updated_date,this.marchantstocksdata=e.data.products,this.loading2=!1):(this.marchantstocksdata=[],this.snackbar=!0,this.snackbarText=e.message,this.color="on-background")}).catch(e=>{console.error("Error fetching merchant products:",e)}))},getMerchantdetails(){this.getMerchants().then(o=>{this.merchantName=o.data.data})}}},W={key:0,class:"loading-container"},j={style:{"max-width":"400px"}},q={key:0,id:"app"},A=n("div",{id:"loading-bg"},[n("div",{class:"loading-logo"},[n("img",{src:T,height:"60",width:"68",alt:"Logo"})]),n("div",{class:"loading"},[n("div",{class:"effect-1 effects"}),n("div",{class:"effect-2 effects"}),n("div",{class:"effect-3 effects"})])],-1),K=[A],G={class:"text-center"},J={class:"text-center"},X={class:"text-center"},Y={class:"text-center"},Z={class:"text-center"},$={class:"text-center"};function ee(o,e,v,x,a,u){return c(),d("div",null,[a.loading?(c(),d("div",W,[t(w,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):f("",!0),t(g,null,{default:l(()=>[t(m,{cols:"12"},{default:l(()=>[t(y,{title:"Merchants",class:"mb-4"},{default:l(()=>[t(M,null,{default:l(()=>[t(z,{class:"mt-6",ref:"purchaseOrderForm"},{default:l(()=>[t(g,null,{default:l(()=>[t(m,{md:"6",cols:"12"},{default:l(()=>[t(B,{modelValue:a.selectedmerchants,"onUpdate:modelValue":[e[0]||(e[0]=s=>a.selectedmerchants=s),u.handleMerchantSelection],label:"Store or Merchant",items:u.merchants,"menu-props":{maxHeight:200}},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(m,{cols:"12",md:"6"},{default:l(()=>[t(_,{modelValue:this.stockUpdatedate,"onUpdate:modelValue":e[1]||(e[1]=s=>this.stockUpdatedate=s),label:"Stock Updated Date",readonly:""},null,8,["modelValue"])]),_:1}),t(b),t(m,{cols:"12"},{default:l(()=>[n("div",j,[t(_,{class:"mb-3",modelValue:a.searchQuery,"onUpdate:modelValue":e[2]||(e[2]=s=>a.searchQuery=s),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),a.loading2?(c(),d("div",q,K)):f("",!0),t(F,{headers:a.headers,items:this.paginatedItems},{default:l(()=>[n("thead",null,[n("tr",null,[(c(!0),d(h,null,p(a.headers,s=>(c(),d("th",{class:"text-center",key:s},i(s.text),1))),128))])]),n("tbody",null,[(c(!0),d(h,null,p(this.paginatedItems,(s,r)=>(c(),d("tr",{key:r},[n("td",G,i(s.brand_name),1),n("td",J,i(s.sku_name),1),n("td",X,i(s.uom),1),n("td",Y,i(s.physical_soh),1),n("td",Z,i(s.closing),1),n("td",$,i(s.opening),1)]))),128))])]),_:1},8,["headers","items"]),t(P,{modelValue:a.page,"onUpdate:modelValue":e[3]||(e[3]=s=>a.page=s),length:Math.ceil(u.filteredMerchant.length/a.pageSize),onInput:o.updatePagination},null,8,["modelValue","length","onInput"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),t(Q,{modelValue:a.snackbar,"onUpdate:modelValue":e[4]||(e[4]=s=>a.snackbar=s),timeout:3500,color:a.color},{default:l(()=>[k(i(a.snackbarText),1)]),_:1},8,["modelValue","color"])])}const te=V(R,[["render",ee]]),ae={components:{Viewstore:te},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Store Stocks",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=C(),this.activeTab=S(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function se(o,e,v,x,a,u){const s=U("Viewstore");return c(),d("div",null,[t(O,{modelValue:a.activeTab,"onUpdate:modelValue":e[0]||(e[0]=r=>a.activeTab=r),"show-arrows":""},{default:l(()=>[(c(!0),d(h,null,p(a.tabs,r=>(c(),I(H,{key:r.icon,value:r.tab},{default:l(()=>[t(L,{size:"20",start:"",icon:r.icon},null,8,["icon"]),k(" "+i(r.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(b),t(E,{modelValue:a.activeTab,"onUpdate:modelValue":e[1]||(e[1]=r=>a.activeTab=r),class:"mt-5 disable-tab-transition",touch:!1},{default:l(()=>[t(D,{value:"account"},{default:l(()=>[t(s)]),_:1})]),_:1},8,["modelValue"])])}const _e=V(ae,[["render",se]]);export{_e as default};
