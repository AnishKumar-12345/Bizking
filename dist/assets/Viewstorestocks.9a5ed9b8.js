import{_ as b,o as r,c as i,g as t,b5 as w,b6 as p,w as l,i as m,j as y,k as M,l as g,s as k,a as n,F as f,q as _,t as d,b as v,bn as T,v as C,e as S,r as U,f as I,u as L}from"./index.31ad2059.js";import{s as N}from"./Services.67b8878a.js";import{V as P}from"./VForm.186d60d4.js";import{V as z}from"./VAutocomplete.be218b7a.js";import{V}from"./VTextField.a039c958.js";import{V as B}from"./VTable.3dcb99c1.js";import{V as F}from"./VPagination.c74da938.js";import{V as Q}from"./VSnackbar.53f954c9.js";import{V as E,a as O,b as D,c as H}from"./VWindowItem.ffe096d6.js";import"./index.2bd8ddc8.js";import"./VSelect.58d4499a.js";import"./VCheckboxBtn.789b42b6.js";import"./VChip.5f576ff0.js";const R={mixins:[N],components:{},data(){return{loading:!0,loading2:!1,searchQuery:"",page:1,pageSize:10,snackbar:!1,snackbarText:"",timeout:6e3,color:"",top:!1,bottom:!0,left:!1,right:!1,marchantstocksdata:[],selectedmerchants:null,merchantName:[],stockUpdatedate:null,headers:[{text:"Brand Name",value:"brand_name"},{text:"SKU",value:"sku_name"},{text:"UOM",value:"uom"},{text:"Physical SOH",value:"physical_soh"},{text:"Closing",value:"closing"},{text:"Opening",value:"opening"}]}},computed:{filteredMerchant(){const a=this.searchQuery.toLowerCase().trim();return this.marchantstocksdata.filter(e=>e.brand_name&&e.brand_name.toLowerCase().includes(a)||e.sku_name&&e.sku_name.toLowerCase().includes(a)||e.uom&&e.uom.toLowerCase().includes(a)||e.physical_soh&&e.physical_soh.toLowerCase().includes(a)||e.closing&&e.closing.toLowerCase().includes(a)||e.opening&&e.opening.toLowerCase().includes(a))},paginatedItems(){const a=(this.page-1)*this.pageSize,e=a+this.pageSize;return this.filteredMerchant.slice(a,e)},merchants(){return this.merchantName.map(a=>a.merchant_uid)}},mounted(){this.getMerchantdetails().then(()=>{this.loading=!1}).catch(a=>{console.error("Error fetching merchants:",a)})},methods:{handleMerchantSelection(){const a=this.merchantName.find(e=>e.merchant_uid===this.selectedmerchants);a&&(this.selectedMerchantId=a.merchant_id,this.loading2=!0,this.getMerchantproductsstock(this.selectedMerchantId).then(e=>{console.log("Merchant Products:",e),e.status==1?(this.stockUpdatedate=e.data.stock_updated_date,this.marchantstocksdata=e.data.products,this.loading2=!1):(this.marchantstocksdata=[],this.snackbar=!0,this.snackbarText=e.message,this.color="on-background")}).catch(e=>{console.error("Error fetching merchant products:",e)}))},getMerchantdetails(){return new Promise((a,e)=>{this.getMerchants().then(u=>{this.merchantName=u.data.data,a()}).catch(u=>{console.error("Error fetching merchants:",u),e(u)})})}}},W={key:0,class:"loading-container"},j={style:{"max-width":"400px"}},q={key:0,id:"app"},A=n("div",{id:"loading-bg"},[n("div",{class:"loading-logo"},[n("img",{src:T,height:"60",width:"68",alt:"Logo"})]),n("div",{class:"loading"},[n("div",{class:"effect-1 effects"}),n("div",{class:"effect-2 effects"}),n("div",{class:"effect-3 effects"})])],-1),K=[A],G={key:0},J=n("td",{colspan:"16",class:"text-center"},[n("h1",null,"No data found !")],-1),X=[J],Y={class:"text-center"},Z={class:"text-center"},$={class:"text-center"},ee={class:"text-center"},te={class:"text-center"},ae={class:"text-center"};function se(a,e,u,x,s,h){return r(),i("div",null,[s.loading?(r(),i("div",W,[t(w,{height:"5",color:"primary",indeterminate:"",class:"custom-loader","full-width":""})])):p("",!0),t(g,null,{default:l(()=>[t(m,{cols:"12"},{default:l(()=>[t(y,{title:"Merchants",class:"mb-4"},{default:l(()=>[t(M,null,{default:l(()=>[t(P,{class:"mt-6",ref:"purchaseOrderForm"},{default:l(()=>[t(g,null,{default:l(()=>[t(m,{md:"6",cols:"12"},{default:l(()=>[t(z,{modelValue:s.selectedmerchants,"onUpdate:modelValue":[e[0]||(e[0]=o=>s.selectedmerchants=o),h.handleMerchantSelection],label:"Store or Merchant",items:h.merchants,"menu-props":{maxHeight:200}},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(m,{cols:"12",md:"6"},{default:l(()=>[t(V,{modelValue:this.stockUpdatedate,"onUpdate:modelValue":e[1]||(e[1]=o=>this.stockUpdatedate=o),label:"Stock Updated Date",readonly:""},null,8,["modelValue"])]),_:1}),t(k),t(m,{cols:"12"},{default:l(()=>[n("div",j,[t(V,{class:"mb-3",modelValue:s.searchQuery,"onUpdate:modelValue":e[2]||(e[2]=o=>s.searchQuery=o),density:"compact",variant:"solo",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":""},null,8,["modelValue"])]),s.loading2?(r(),i("div",q,K)):p("",!0),t(B,{headers:s.headers,items:this.paginatedItems},{default:l(()=>[n("thead",null,[n("tr",null,[(r(!0),i(f,null,_(s.headers,o=>(r(),i("th",{class:"text-center",key:o},d(o.text),1))),128))])]),n("tbody",null,[h.filteredMerchant.length===0?(r(),i("tr",G,X)):p("",!0),(r(!0),i(f,null,_(this.paginatedItems,(o,c)=>(r(),i("tr",{key:c},[n("td",Y,d(o.brand_name),1),n("td",Z,d(o.sku_name),1),n("td",$,d(o.uom),1),n("td",ee,d(o.physical_soh),1),n("td",te,d(o.closing),1),n("td",ae,d(o.opening),1)]))),128))])]),_:1},8,["headers","items"]),t(F,{modelValue:s.page,"onUpdate:modelValue":e[3]||(e[3]=o=>s.page=o),length:Math.ceil(h.filteredMerchant.length/s.pageSize),onInput:a.updatePagination},null,8,["modelValue","length","onInput"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1}),t(Q,{modelValue:s.snackbar,"onUpdate:modelValue":e[4]||(e[4]=o=>s.snackbar=o),timeout:3500,color:s.color},{default:l(()=>[v(d(s.snackbarText),1)]),_:1},8,["modelValue","color"])])}const oe=b(R,[["render",se]]),ne={components:{Viewstore:oe},data(){return{currentroute:"",activeTab:"",tabs:[{title:"View Store Stocks",icon:"mdi-account-outline",tab:"account"}]}},mounted(){this.currentroute=C(),this.activeTab=S(this.currentroute.params.tab),this.activeTab=this.tabs[0].tab}};function le(a,e,u,x,s,h){const o=U("Viewstore");return r(),i("div",null,[t(E,{modelValue:s.activeTab,"onUpdate:modelValue":e[0]||(e[0]=c=>s.activeTab=c),"show-arrows":""},{default:l(()=>[(r(!0),i(f,null,_(s.tabs,c=>(r(),I(H,{key:c.icon,value:c.tab},{default:l(()=>[t(L,{size:"20",start:"",icon:c.icon},null,8,["icon"]),v(" "+d(c.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),t(k),t(D,{modelValue:s.activeTab,"onUpdate:modelValue":e[1]||(e[1]=c=>s.activeTab=c),class:"mt-5 disable-tab-transition",touch:!1},{default:l(()=>[t(O,{value:"account"},{default:l(()=>[t(o)]),_:1})]),_:1},8,["modelValue"])])}const ke=b(ne,[["render",le]]);export{ke as default};
