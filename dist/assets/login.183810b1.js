import{e as n,D as m,be as x,o as S,c as T,g as a,w as t,bq as P,k as _,n as C,l as D,i as h,aQ as u,m as B,b as f,j as E,bh as c,t as N,a as i,bp as q,bJ as M,a$ as R,bK as p}from"./index.0a02293b.js";import{c as j,d as U,b as z,a as A}from"./auth-v1-tree.54ebfcea.js";import{b as g}from"./route-block.011d1056.js";import{V as F}from"./VForm.cf677e9c.js";import{V as b}from"./VTextField.a38e65d3.js";import{V as K}from"./VSnackbar.47b8f9db.js";import"./VCounter.0e4a7297.js";const L={class:"auth-wrapper d-flex align-center justify-center pa-4"},Z=i("div",{class:"d-flex"},[i("img",{src:q,width:"80",height:"80"})],-1),$=i("h5",{class:"text-h5 font-weight-semibold mb-1"},"Welcome to BIZKINGZ! \u{1F44B}\u{1F3FB}",-1),G=i("p",{class:"mb-0"},"Please sign-in to your account and start the adventure",-1),J=i("br",null,null,-1),Q=i("br",null,null,-1),W={__name:"login",setup(H){const v=M(),l=n({email:"",password:"",remember:!1,timeout:6e3}),V=m(()=>{const s=[];return s.push(e=>!!e||"Email is required"),s.push(e=>/.+@.+\..+/.test(e)||"Email must be valid"),s}),w=m(()=>{const s=[];return s.push(e=>!!e||"Password is required"),s}),o=n({show:!1,message:"",color:""}),y=x(),k=m(()=>y.global.name.value==="light"?j:U),d=n(!1),I=()=>{if(!l.value.email||!l.value.password){o.value={show:!0,message:"Please give mandatory fields",color:"error"};return}const s={email:l.value.email,password:l.value.password};R.post("http://103.211.218.32/bizkingz/services/api/auth/login",s).then(e=>{e.data.status==1?(setTimeout(()=>{v.push("/Dashboardhome")},1e3),localStorage.setItem("createdby",e.data.data.name),localStorage.setItem("userId",e.data.data.user_id),localStorage.setItem("userRole",e.data.data.user_role),localStorage.setItem("user_id",e.data.data.user_id),localStorage.setItem("user_type",e.data.data.user_type),localStorage.setItem("city_id",e.data.data.city_id),localStorage.setItem("location_id",e.data.data.location_id),localStorage.setItem("gmail",e.data.data.email),p.commit("setsodetails",e.data.so_to_details),p.commit("setDeliverydetails",e.data.delivery_user_details),p.commit("setNotifications",e.data.notifications_details),o.value={show:!0,message:e.data.message,color:"primary"}):o.value={show:!0,message:e.data.message,color:"error"}}).catch(e=>{console.error("API Error:",e),o.value={show:!0,message:"An error occurred while logging in. Please try again.",color:"error"}})};return(s,e)=>(S(),T("div",L,[a(E,{class:"auth-card pa-4 pt-7","max-width":"448"},{default:t(()=>[a(P,{class:"justify-center"},{prepend:t(()=>[Z]),_:1}),a(_,{class:"pt-2"},{default:t(()=>[$,G]),_:1}),a(_,null,{default:t(()=>[a(F,{onSubmit:C(I,["prevent"])},{default:t(()=>[a(D,null,{default:t(()=>[a(h,{cols:"12"},{default:t(()=>[a(b,{modelValue:l.value.email,"onUpdate:modelValue":e[0]||(e[0]=r=>l.value.email=r),label:"Email",type:"email",rules:u(V)},null,8,["modelValue","rules"])]),_:1}),a(h,{cols:"12"},{default:t(()=>[a(b,{modelValue:l.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>l.value.password=r),label:"Password",type:d.value?"text":"password","append-inner-icon":d.value?"mdi-eye-off-outline":"mdi-eye-outline","onClick:appendInner":e[2]||(e[2]=r=>d.value=!d.value),rules:u(w)},null,8,["modelValue","type","append-inner-icon","rules"]),J,Q,a(B,{block:"",type:"submit",id:"button_id"},{default:t(()=>[f(" Login ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1}),a(c,{class:"auth-footer-start-tree d-none d-md-block",src:u(z),width:250},null,8,["src"]),a(c,{src:u(A),class:"auth-footer-end-tree d-none d-md-block",width:350},null,8,["src"]),a(c,{class:"auth-footer-mask d-none d-md-block",src:u(k)},null,8,["src"]),a(K,{modelValue:o.value.show,"onUpdate:modelValue":e[3]||(e[3]=r=>o.value.show=r),color:o.value.color,top:"",timeout:1e3},{default:t(()=>[f(N(o.value.message),1)]),_:1},8,["modelValue","color"])]))}};typeof g=="function"&&g(W);export{W as default};
